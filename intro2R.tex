% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{lmodern}
\usepackage{amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
  \usepackage{amssymb}
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Introduction to R for health data analysis},
  pdfauthor={Ehsan Karim, An Hoang and Yang Qu},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Global") elem.value = "Show Global";
    else elem.value = "Hide Global";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Global" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1 \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces\fi
  % set entry spacing
  \ifnum #2 > 0
  \setlength{\parskip}{#2\baselineskip}
  \fi
 }%
 {}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\title{Introduction to R for health data analysis}
\author{Ehsan Karim, An Hoang and Yang Qu}
\date{2021-07-25}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{preface}{%
\chapter*{Preface}\label{preface}}
\addcontentsline{toc}{chapter}{Preface}

This is a R tutorial for those who are not familiar with data wrangling. For providing some practical introduction to data wrangling, NHANES datasets will be used as examples in this tutorial.

\hypertarget{main-references}{%
\section*{Main references}\label{main-references}}
\addcontentsline{toc}{section}{Main references}

\begin{itemize}
\tightlist
\item
  Overall reference \citet{wickham2016r}
\end{itemize}

\hypertarget{version-history}{%
\section*{Version history}\label{version-history}}
\addcontentsline{toc}{section}{Version history}

This tutorial was initially created by a team supported by worklearn program in 2021 May-August (during Covid-19 pandemic). Initial team members included An Hoang and Yang Qu, working under the supervision of Ehsan Karim.

\hypertarget{contributor-list}{%
\section*{Contributor list}\label{contributor-list}}
\addcontentsline{toc}{section}{Contributor list}

\begin{itemize}
\tightlist
\item
  An Hoang (forestry, UBC)
\item
  Yang Qu (statistics, UBC)
\end{itemize}

\hypertarget{prerequisites}{%
\subsection*{Prerequisites}\label{prerequisites}}
\addcontentsline{toc}{subsection}{Prerequisites}

None.

\hypertarget{comments}{%
\subsection*{Comments}\label{comments}}
\addcontentsline{toc}{subsection}{Comments}

For any comments regarding this document, reach out to \href{http://ehsank.com/}{me}.

\hypertarget{r-and-rstudio-set-up}{%
\chapter{R and RStudio set up}\label{r-and-rstudio-set-up}}

\hypertarget{instructions}{%
\section{INSTRUCTIONS}\label{instructions}}

This tutorial is aiming to introduce you to R and RStudio. It will guide you to download and install R and RStudio and walk you through the main components in RStudio. Follow this tutorial step-by-step and finish setting up R and RStudio before the next tutorial.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/Xf1AfoGaxhwrWRQ38}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives}}

\begin{itemize}
\item
  Understand the difference between R and RStudio
\item
  Download and install R
\item
  Download and install RStudio
\item
  Be familiar with the main components in RStudio
\end{itemize}

\hypertarget{what-is-r}{%
\section{1. What is R}\label{what-is-r}}

R is a language and enviroment for statistical computing and graphics. It is commonly used in borh academia and industry.

It is:

\begin{itemize}
\item
  Free and open source
\item
  Easy to learn and use
\item
  Good compatibility - can be used in Windows, macOS, and Linux
\end{itemize}

For more information about R, check out this \href{https://www.r-project.org/about.html}{website}.

\textbf{DO QUESTION 1 OF THE QUIZ NOW}
\textgreater{} True of False: R is a programming language

\hypertarget{what-is-rstudio}{%
\section{2. What is RStudio}\label{what-is-rstudio}}

RStudio is not a language - is an IDE (Integrated Development Environment) for R. It hae two versions available: RStudio desktop and RStudio Server. We will use RStudio desktop in this tutorial.

There are lots of available IDEs for R. The reason why we chooes RStudio is that it has a fancy GUI and required features that makes working with R much easier and more efficient.

\textbf{DO QUESTION 2 OF THE QUIZ NOW}
\textgreater{} True of False: RStudio is a programming language which is similar to R

\hypertarget{download-and-install-r}{%
\section{3. Download and install R}\label{download-and-install-r}}

\begin{itemize}
\item
  Go to \url{https://www.r-project.org/} and click on \textbf{download R}
\item
  Choose CRAN location based on your geological location
\item
  Download R based on your operating system and choose the latest release version (it is Python 3.9.5 for now)
\item
  Open the downloaded package and follow the instruction there to finish the installation
\end{itemize}

\hypertarget{download-and-install-rstudio}{%
\section{4. Download and install RStudio}\label{download-and-install-rstudio}}

\textbf{Make sure you downloaded and installed R before doing the following steps}

\begin{itemize}
\item
  Go to \url{https://www.rstudio.com/products/rstudio/download/} and download the RStudio Desktop
\item
  Open the downloaded file and follow the instruction there to finish the installation
\end{itemize}

\hypertarget{rstudio-basics}{%
\section{5. RStudio basics}\label{rstudio-basics}}

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/TKTocvu.png}
\caption{image}
\end{figure}

RStudio have 4 main components:

\begin{itemize}
\item
  Script (top left)

  \begin{itemize}
  \item
    the Script is where you write the R code
  \item
    you can save the script as a \texttt{.R} file
  \end{itemize}
\item
  Console (bottom left)

  \begin{itemize}
  \item
    the console is where the R code being executed
  \item
    Output (except graphs and plots) will be shown after code executed
  \end{itemize}
\item
  Workspace (top right)

  \begin{itemize}
  \item
    all objects in the current working environments including variables, data, and functions are listed here with a brief display of their corresponding values.
  \item
    you can import other workspaces, save the current workspace, and clean up the current workspace
  \item
    R workspace file ends with \texttt{.RData}
  \end{itemize}
\item
  Files, Plots, Packages, Help (bottom right)

  \begin{itemize}
  \item
    Files is the place to view the Files and to set Working Directory
  \item
    Plots gives a preview of plot - it is the place where graphical output will be displayed
  \item
    Packages is the place to install/view/update packages
  \item
    Help is the place to get help about R
  \end{itemize}
\end{itemize}

\textbf{DO QUESTION 3 OF THE QUIZ NOW}
\textgreater{} In RStudio, where do you write your R code if you don't want it be saved?

\textbf{DO QUESTION 4 OF THE QUIZ NOW}
\textgreater{} In RStudio, where do you write your R code if you do want it be saved?

\textbf{DO QUESTION 5 OF THE QUIZ NOW}
\textgreater{} What type is the saved R code file?

\textbf{DO QUESTION 6 OF THE QUIZ NOW}
\textgreater{} In RStudio, where is your R code executed?

\textbf{DO QUESTION 7 OF THE QUIZ NOW}
\textgreater{} In RStudio, where is numerical output displayed?

\textbf{DO QUESTION 8 OF THE QUIZ NOW}
\textgreater{} In RStudio, where is graphical output displayed?

\textbf{DO QUESTION 9 OF THE QUIZ NOW}
\textgreater{} In RStudio, where are variables, data, functions stored?

\textbf{DO QUESTION 10 OF THE QUIZ NOW}
\textgreater{} What type is the workspace file?

\textbf{DO QUESTION 11 OF THE QUIZ NOW}
\textgreater{} Is there a way to find the details about functions and packages in RStudio?

\hypertarget{takeaways}{%
\section{TAKEAWAYS}\label{takeaways}}

By the end of this tutorial, you should be able to set up R and RStudio successfully. Please feel free to reach out if you have any issues with the set ups.

Before we proceed to the next tutorial, make sure that you're familiar with the RStudio GUI and features.

\hypertarget{introduction-to-r}{%
\chapter{Introduction to R}\label{introduction-to-r}}

\hypertarget{instructions-1}{%
\section{INSTRUCTIONS}\label{instructions-1}}

This tutorial will introduce you to the basics of the language of R. We will cover how to set up our working environment, mathematical and logical operators, the most common data types in R, explore a simple dataset, write an R function as well as how to seek for help within and outside of R.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/P5x4pRK39xrA9EJR9}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives-1}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives-1}}

\begin{itemize}
\tightlist
\item
  Be familiar with the basic procedures for setting up an R session with functions such as \texttt{getwd()}, \texttt{setwd()}, \texttt{dir()}, \texttt{install.packages()}, and \texttt{library()}.
\item
  Understand the very basic of how and when to use arithmetic and logical operators in R.
\item
  Be familiar with the most common types of data in R including string, vector, data frame, and list.
\item
  Explore a dataset using basic Base R functions.
\item
  Know how to write a new function in R.
\item
  Be comfortable with and know how to seek for help within and outside of R.
\end{itemize}

\hypertarget{set-up-basics}{%
\section{1. SET UP BASICS}\label{set-up-basics}}

\hypertarget{working-directory}{%
\subsection{Working Directory}\label{working-directory}}

One of the most important function in R is \texttt{getwd()}, or ``get working directory''. The output of this code is the pathway of your current R file. Interestingly, \texttt{getwd()} does not have any argument. In other words, you do not have to type anything in the \texttt{()}.

It is highly recommended that all of your files (the R file, any data files, images, etc) be in the same directory. This will make your project much more organized and your life a lot easier when we get into more complicated data analysis that involves more data files.

By default, your working directory is whatever folder your current R file is in.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getwd}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "C:/Users/ehsan/Documents/GitHub/intro2R"
\end{verbatim}

If at any point, you want to change your working directory to another folder, you can use \texttt{setwd()}. Different from \texttt{getwd()}, \texttt{setwd()} requires an argument within its brackets. To set a new working directory, you need to copy and paste the pathway within the brackets and in quotation marks ("").

This code is helpful when you need to pull files outside of the default working directory. However, you should be mindful when using this function because it gets very confusing very quickly.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#setwd("")}
\end{Highlighting}
\end{Shaded}

Another important function is \texttt{dir()}. This function lets you check all of the files that exist in your working directory.

This function is a good option if you want to check if there are any extra or missing files from your working directory.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dir}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "_book"                                 
##  [2] "_bookdown.yml"                         
##  [3] "_bookdown_files"                       
##  [4] "_build.sh"                             
##  [5] "_deploy.sh"                            
##  [6] "_output.yml"                           
##  [7] "0-r-and-rstudio-set-up.Rmd"            
##  [8] "1-introduction-to-r.Rmd"               
##  [9] "2-importing-data-into-r-with-readr.Rmd"
## [10] "3-introduction-to-nhanes.Rmd"          
## [11] "4-data-analysis-with-dplyr.Rmd"        
## [12] "5-data-visualization-with-ggplot.Rmd"  
## [13] "6-date-time-data-with-lubridate.Rmd"   
## [14] "7-data-summary-with-tableone.Rmd"      
## [15] "8-Exercise-Solutions.Rmd"              
## [16] "9-references.Rmd"                      
## [17] "book.bib"                              
## [18] "data"                                  
## [19] "DESCRIPTION"                           
## [20] "Dockerfile"                            
## [21] "docs"                                  
## [22] "header.html"                           
## [23] "images"                                
## [24] "index.Rmd"                             
## [25] "intro2R.Rmd"                           
## [26] "intro2R_cache"                         
## [27] "intro2R_files"                         
## [28] "LICENSE"                               
## [29] "now.json"                              
## [30] "packages.bib"                          
## [31] "preamble.tex"                          
## [32] "R.Rproj"                               
## [33] "README.md"                             
## [34] "style.css"                             
## [35] "toc.css"
\end{verbatim}

You will see that there are 2 CSV files in our working directory: last\_15\_bpx.csv and last\_15\_demo.csv. Do not worry about what they are right now (we will cover this in later tutorials). All you have to know for now is that these two files are currently residing in our input/tutorial-demo folder, AKA our working directory.

The example above is only to demonstrate how we would change our working directory. But since we want to remain in our default working directory for the rest of this tutorial, we will set our working directory back to the original directory.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# setwd("..") \# this ".." argument allows us to move back 1 folder}
\CommentTok{\# setwd("..") }
\CommentTok{\# setwd("..") \# so doing this three times means that we are moving back 3 folders}


\CommentTok{\# setwd("./data/") }
\CommentTok{\# now we\textquotesingle{}re back in the large folder that houses both input/tutorial{-}demo and kaggle/working}
\end{Highlighting}
\end{Shaded}

After setting a new working directory, it is in our best interest to check the working directory again to see if we are in the right place.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# check to see if we\textquotesingle{}re back to our original directory}
\FunctionTok{getwd}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "C:/Users/ehsan/Documents/GitHub/intro2R"
\end{verbatim}

\hypertarget{functions-debunked}{%
\subsubsection{Functions Debunked}\label{functions-debunked}}

Throughout our tutorials, you will see a recurring section named \textbf{Functions Debunked}. These sections aim to break down the function that you were just introduced to. Each of these section will include a link for you to find more information about the function, the different arguments that can be nested within each function, and an example.

For this first section, we will debunk \texttt{\#}. When you see a \texttt{\#} in a code chunk, this means that the following information is a note or comment. In other words, it doesn't code for anything - it is just notes explaining what we are doing. You can try adding a \texttt{\#} in front of our \texttt{getwd()} code above to see what happens!

If this doesn't make any sense to you right now, do not worry! It will make more sense as we move along the tutorials.

\hypertarget{installing-and-attaching-packages}{%
\subsection{Installing and Attaching Packages}\label{installing-and-attaching-packages}}

Now that we understand what working directories are, we can move onto installing and attaching packages.

There are a lot of packages on R, each has its own set of functions for different purposes. To access each set of function, we need to install the respective package. To install a package, we use \texttt{install.packages()}. Within the brackets, the only argument you need is the name of the package in quotation marks ("").

The most basic package on R is Base R. We do not actually need to install this package as it should be built into R by default. Therefore, by default, we should already have access to a range of basic R functions without having to install any packages. In this tutorial, we will only be using functions in this Base R package. However, in future tutorials, we will need to install pacakages such as dplyr and ggplot, which will give you access to even more and more advanced functions.

For the sake of demonstration, the ggplot2 package is installed below, but note that we will not be using any ggplot functions in this tutorial.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("ggplot2")}
\end{Highlighting}
\end{Shaded}

A related function is \texttt{library()}. This function is used to attach installed packages to your R session. Unlike \texttt{install.packages()} where you only need to use once, \texttt{library()} needs to be run every R session. In other words, you need to attach whatever package you need everytime to you and then reopen R.

In future tutorials, if the \texttt{library()} function does not work for you, it is most likely because you have not installed the package, and therefore need to use \texttt{install.packages()} first before \texttt{library()}.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# another difference from install.packages() is that we do not need "" in library()}
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

To make sure the package is successfully attached, we can try running a function in that package. After running the code below, you should only see a blank square. This is correct! We will go over why this is in tutorial 5.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-8-1.pdf}

\hypertarget{do-questions-1-3-of-the-google-quiz-now}{%
\subsubsection{DO QUESTIONS 1-3 OF THE GOOGLE QUIZ NOW}\label{do-questions-1-3-of-the-google-quiz-now}}

\begin{quote}
What is a ``Working Directory''?
\end{quote}

\begin{quote}
What is the main difference between \texttt{setwd()} and \texttt{getwd()}?
\end{quote}

\begin{quote}
We need to install the packages first before we can load them using \texttt{library()}. (True or False)
\end{quote}

\hypertarget{arithmetic-operators}{%
\section{2. ARITHMETIC OPERATORS}\label{arithmetic-operators}}

As expected from a data analysis software, you can use R like a calcultor using arithmetic operators! Here is a list of a few basic and common arithmetic operators in R:

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/1ww25MM.png}
\caption{Figure 1. Arithmetic Operators in R}
\end{figure}

These operators will prove themselves to be more useful in data analysis when we get to later tutorials, especially our Tutorial 4 on the dplyr package.

\hypertarget{try-it-yourself}{%
\subsection{1.1 Try it yourself}\label{try-it-yourself}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Can you replicate and solve these problems in R?
\end{enumerate}

\begin{itemize}
\tightlist
\item
  2\^{}2
\item
  2 × 2
\item
  2 + 5 × (5 ÷ 4)\^{}6
\item
  what is the remainder of 52 ÷ 5
\item
  what is the whole number solution to 82 ÷ 8
\end{itemize}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Can you solve for x using R?
\end{enumerate}

a \textless- 9 + 3 * 6

x \textless- a ÷ 2

\hypertarget{do-question-4-of-the-quiz-now}{%
\subsubsection{DO QUESTION 4 OF THE QUIZ NOW}\label{do-question-4-of-the-quiz-now}}

\begin{quote}
The output of \texttt{10\ \%\%\ 2} is equal to which of the following?
\end{quote}

\hypertarget{logical-operators}{%
\section{3. LOGICAL OPERATORS}\label{logical-operators}}

In addition, logical operators are also available on R. The main difference between arithmetic operators and logical operators is that logical operators will yield a logical (or TRUE/FALSE) output. This is a list of some common logical operators that can be used on R:

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/xG4F5kA.png}
\caption{Figure 2. Logical Operators in R}
\end{figure}

Similarly, these operators will be more useful when we learn about filtering data in future tutorials and you will also be provided with more examples then.

Here are a few example codes that you can try running:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\OtherTok{\textless{}{-}} \DecValTok{5} \SpecialCharTok{\textgreater{}} \DecValTok{4} 
    \CommentTok{\# the \textless{}{-} indicates that the information 5 \textgreater{} 4 is stored in the variable a {-} we will cover this in more detail in Section 4 of this tutorial}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{b }\OtherTok{\textless{}{-}} \DecValTok{8}
\NormalTok{b }\SpecialCharTok{!=} \DecValTok{8}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{==}\NormalTok{ b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{9} \SpecialCharTok{+} \DecValTok{10} \SpecialCharTok{*} \DecValTok{15} \SpecialCharTok{{-}} \DecValTok{8} \SpecialCharTok{\textless{}=} \DecValTok{103}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{11}\SpecialCharTok{+} \DecValTok{3}\SpecialCharTok{\^{}}\DecValTok{9} \SpecialCharTok{==} \DecValTok{19694}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
    \CommentTok{\# note that in R, "equal to" is coded by ==, = has another meaning that you will see in section 4}
\end{Highlighting}
\end{Shaded}

\hypertarget{try-it-yourself-1}{%
\subsection{1.2 Try it yourself}\label{try-it-yourself-1}}

Translate the following into R and find the output:
* 8 times 3 is greater than 8?
* eleven divided by seven is not equal to 2?
* 9 is less than or equal to 18?

\hypertarget{do-question-5-of-the-quiz-now}{%
\subsubsection{DO QUESTION 5 OF THE QUIZ NOW}\label{do-question-5-of-the-quiz-now}}

\begin{quote}
Which of the following operators code for ``equal to''?
\end{quote}

\hypertarget{most-common-data-types-in-r}{%
\section{4. MOST COMMON DATA TYPES IN R}\label{most-common-data-types-in-r}}

\hypertarget{strings}{%
\subsection{Strings}\label{strings}}

Strings are either single character or a collection of characters. Note that all strings are in \texttt{""}. For example:

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{"hello, my name is Alex"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "hello, my name is Alex"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{"Where are you?"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Where are you?"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{"I like to eat 6 apples"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "I like to eat 6 apples"
\end{verbatim}

\hypertarget{vectors}{%
\subsection{Vectors}\label{vectors}}

Vector is the simplest data type in R. It is basically a list of components stored in the same place (or variable). To write a vector, starts with \texttt{c()} and input the appropriate components within the brackets. For example:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{) }\CommentTok{\# numeric}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 2 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\StringTok{"hello"}\NormalTok{, }\StringTok{"bonjour"}\NormalTok{, }\StringTok{"ciao"}\NormalTok{) }\CommentTok{\# character – note that text needs to be in “”}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "hello"   "bonjour" "ciao"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{) }\CommentTok{\# logical – we will cover this in more detail later}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]  TRUE FALSE  TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\StringTok{"hello"}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{) }\CommentTok{\# mixed}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "1"     "hello" "TRUE"
\end{verbatim}

We can also store these vectors using the symbol \texttt{\textless{}-}.

\textbf{Note:} If you are using RStudio, they will be stored in our environment located in the top right window.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{numeric }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{10}\SpecialCharTok{:}\DecValTok{12}\NormalTok{) }\CommentTok{\# 10:12 means 10, 11, 12!}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{character }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"hello"}\NormalTok{, }\StringTok{"bonjour"}\NormalTok{, }\StringTok{"ciao"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{logical }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

What we just did was assigning values to variables where numeric, character, and logical are all variables!

\hypertarget{try-it-yourself-2}{%
\subsection{1.3 Try it yourself}\label{try-it-yourself-2}}

Can you try storing a string? Assign the string ``hello world, I am here'' to the variable named start.

\textbf{Note how the string is in "" but the variable name is not. Why do you think this is?}

After assigning values to our variables, we can tell R to retrieve them by typing any of these variable names. R will give us the components of data that we assigned to each variable as the output.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{numeric}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]  1  2  3 10 11 12
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{character}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "hello"   "bonjour" "ciao"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{logical}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]  TRUE FALSE  TRUE
\end{verbatim}

If you want to extract a particular component from a variable, you can use \texttt{{[}{]}}. For example:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{numeric[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{4}\NormalTok{] }\CommentTok{\# the first 4 components}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]  1  2  3 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{character[}\DecValTok{2}\NormalTok{] }\CommentTok{\# only the 2nd component}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "bonjour"
\end{verbatim}

\hypertarget{try-it-yourself-3}{%
\subsection{1.4 Try it yourself}\label{try-it-yourself-3}}

It is important to note that \textbf{R is case-sensitive}. This means that it distinguishes capitalized from non-capitalized characters, so logical and Logical are read as two separate things by R!

Try typing Logical with a capitalized ``L''. How does R respond to this?

We can also replace \texttt{\textless{}-} with \texttt{=} when assigning values to variables. But \texttt{=} has other uses as well - you will be introduced to their slight differences in future tutorials. Also, note that in R, \texttt{=} does not mean ``equal to''. As you have see in the previous section, ``equal to'' is coded by \texttt{==}.

\hypertarget{lists}{%
\subsection{Lists}\label{lists}}

A list is a collection of possibly unrelated components. It allows you to gather different types of data into one place. In the code below, we have numbers, characters, and data frame all in one place.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{list }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\AttributeTok{numeric =} \DecValTok{1}\NormalTok{, }\AttributeTok{character =} \FunctionTok{c}\NormalTok{(}\StringTok{"bonjour"}\NormalTok{, }\StringTok{"hello"}\NormalTok{), }\StringTok{"I like to eat 6 apples"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Similarly, you can also extract specific information from this list using \texttt{{[}{]}}. Note that in the code below, the output is ``bonjour'' AND ``hello'', this is because the second component of our list is a vector that houses both of these words.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{list[}\DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## $character
## [1] "bonjour" "hello"
\end{verbatim}

\hypertarget{functions-debunked-1}{%
\subsubsection{Functions Debunked}\label{functions-debunked-1}}

The arguments for \href{https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/list}{list()} are as follows:

list(
\textgreater{} \textbf{VARIABLE NAME OF ANY DATA TYPE} = \textbf{ANY DATA STORED WITHIN THAT VARIABLE} OR \textbf{ANY STRING}

)

\textbf{For example:} \texttt{list(numeric\ =\ 1,\ character\ =\ c("bonjour",\ "hello"),\ dataframe\ =\ logical)}

\hypertarget{dataframe}{%
\subsection{Dataframe}\label{dataframe}}

Dataframe, you guessed it, stores your data in the form of a dataframe or a table! Dataframe allows you to store multiple vectors into one single table.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataframe }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(numeric, character, logical)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataframe}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   numeric character logical
## 1       1     hello    TRUE
## 2       2   bonjour   FALSE
## 3       3      ciao    TRUE
## 4      10     hello    TRUE
## 5      11   bonjour   FALSE
## 6      12      ciao    TRUE
\end{verbatim}

\hypertarget{functions-debunked-2}{%
\subsubsection{Functions debunked}\label{functions-debunked-2}}

The arguments for \href{https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/data.frame}{data.frame()} are as follows:

data.frame(
\textgreater{} \textbf{VECTOR 1}

\begin{quote}
\textbf{VECTOR 2}
\end{quote}

\begin{quote}
\textbf{VECTOR n}
\end{quote}

)

\textbf{For example:} \texttt{dataframe\ \textless{}-\ data.frame(numeric,\ character,\ logical)}

If you want to change the column names of your data frame, you can use the function \texttt{names()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{names}\NormalTok{(dataframe) }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Number"}\NormalTok{, }\StringTok{"Text"}\NormalTok{, }\StringTok{"T/F"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Now if we check our data frame again, the new column names should appear.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataframe}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Number    Text   T/F
## 1      1   hello  TRUE
## 2      2 bonjour FALSE
## 3      3    ciao  TRUE
## 4     10   hello  TRUE
## 5     11 bonjour FALSE
## 6     12    ciao  TRUE
\end{verbatim}

\hypertarget{functions-debunked-3}{%
\subsubsection{Functions Debunked}\label{functions-debunked-3}}

The arguments for \href{https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/names}{names()} are as follows:

names(
\textgreater{} \textbf{NAME OF DATASET}) \textless-

\begin{quote}
\textbf{A VECTOR OF COMPONENTS WHOSE LENGTH MATCHES WITH THAT OF THE DATASET} (we will go over length in section 5 of this tutorial)
\end{quote}

\textbf{For example:} \texttt{names(dataframe)\ \textless{}-\ c("Number",\ "Text",\ "T/F")}

\hypertarget{try-it-yourself-4}{%
\subsection{1.5 Try it yourself}\label{try-it-yourself-4}}

Why do you think numeric, character, and logical are not in "" but Number, Text, and T/F are?

Similar to how we extracted information from vectors and lists, we can also use \texttt{{[}{]}} to extract certain rows, columns, or cells in a data frame.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataframe[}\DecValTok{1}\NormalTok{, ] }\CommentTok{\# only fhe first row}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Number  Text  T/F
## 1      1 hello TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataframe[, }\DecValTok{2}\NormalTok{] }\CommentTok{\# only the second column}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "hello"   "bonjour" "ciao"    "hello"   "bonjour" "ciao"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataframe[}\DecValTok{3}\NormalTok{, }\DecValTok{2}\NormalTok{] }\CommentTok{\# only cell (3,2) {-} the third row and second column}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "ciao"
\end{verbatim}

\hypertarget{do-questions-6-7-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 6 \& 7 OF THE QUIZ NOW}\label{do-questions-6-7-of-the-quiz-now}}

\begin{quote}
Which of the following codes would extract only rows 1, 3, 6 and only column 1 from our data frame?
\end{quote}

\begin{quote}
What is the value of the cell in the first row and third column of our data frame?
\end{quote}

We can also add a new column to our data frame using the function \texttt{cbind()} like below. Note how the column name is in \texttt{""}. It is also important that the new column has the same number of values as the rest of the columns. If the new column contains less values than the other columns, you can use \texttt{NA}, or ``not available'' values, to fill up the rest of the places!

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{new\_column }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(dataframe, }\StringTok{"new column"} \OtherTok{=} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{1}\NormalTok{, }\ConstantTok{NA}\NormalTok{))}
    \CommentTok{\# we will learn more about NA values in tutorial 4}
\end{Highlighting}
\end{Shaded}

Similarly, the function to add a new row is \texttt{rbind()}. The two functions work almost identical, but \texttt{rbind()} does not require a row name.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(new\_row }\OtherTok{\textless{}{-}} \FunctionTok{rbind}\NormalTok{(new\_column, }\FunctionTok{c}\NormalTok{(}\DecValTok{13}\NormalTok{, }\StringTok{"hello"}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{NA}\NormalTok{)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Number    Text   T/F new column
## 1      1   hello  TRUE          2
## 2      2 bonjour FALSE          3
## 3      3    ciao  TRUE          4
## 4     10   hello  TRUE          5
## 5     11 bonjour FALSE          1
## 6     12    ciao  TRUE       <NA>
## 7     13   hello FALSE       <NA>
\end{verbatim}

You may have noticed that the code above has an extra \texttt{()} that encompasses the whole code. This \texttt{()} is another way for us to print the output of our function - it is equivalent to if we just run the name of data frame new\_row. Try removing the extra \texttt{()} and see what happens!

\hypertarget{functions-debunked-4}{%
\subsubsection{Functions Debunked}\label{functions-debunked-4}}

\textbf{\href{https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cbind}{cbind()}} is used to create new columns in a data frame. The arguments are as follows:
cbind(
\textgreater{} \textbf{THE CURRENT DATAFRAME}

\begin{quote}
``\textbf{NAME OF THE NEW COLUMN}'' = \textbf{VALUE(S) IN THE NEW COLUMN}
\end{quote}

)

\textbf{\href{https://www.rdocumentation.org/packages/SparkR/versions/2.4.6/topics/rbind}{rbind}} is used to create new rows in a data frame. The arguments are as follows:
rbind(
\textgreater{} \textbf{THE CURRENT DATAFRAME}

\begin{quote}
\textbf{VALUES IN THE NEW ROW}
\end{quote}

)

There exists many other types of \href{https://www.statmethods.net/input/datatypes.html}{data types} on R, you are free to explore them on your own time. But what we have been introduced to are the most basic ones.

\hypertarget{exploring-a-dataset}{%
\section{5. EXPLORING A DATASET}\label{exploring-a-dataset}}

Now that you are familiar with the different data types and operators of R, we can move on to the fun parts of this tutorial: exploring a dataset!

To introduce you to the concept of exploring data on R, we will be using a dataset already available on R - in other words, we will not be importing data into R yet, we will cover this in another tutorial. Conveniently, R has a set of built-in datasets that we can use to practice using basic R functions. In this tutorial, we will use the dataset named ``faithful'' which contains information on the Old Faithful Geyser in Yellowstone National Park. Run the codes below to explore the dataset.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# information on the data}
\CommentTok{\# ?faithful}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# the actual data}
\NormalTok{faithful}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     eruptions waiting
## 1       3.600      79
## 2       1.800      54
## 3       3.333      74
## 4       2.283      62
## 5       4.533      85
## 6       2.883      55
## 7       4.700      88
## 8       3.600      85
## 9       1.950      51
## 10      4.350      85
## 11      1.833      54
## 12      3.917      84
## 13      4.200      78
## 14      1.750      47
## 15      4.700      83
## 16      2.167      52
## 17      1.750      62
## 18      4.800      84
## 19      1.600      52
## 20      4.250      79
## 21      1.800      51
## 22      1.750      47
## 23      3.450      78
## 24      3.067      69
## 25      4.533      74
## 26      3.600      83
## 27      1.967      55
## 28      4.083      76
## 29      3.850      78
## 30      4.433      79
## 31      4.300      73
## 32      4.467      77
## 33      3.367      66
## 34      4.033      80
## 35      3.833      74
## 36      2.017      52
## 37      1.867      48
## 38      4.833      80
## 39      1.833      59
## 40      4.783      90
## 41      4.350      80
## 42      1.883      58
## 43      4.567      84
## 44      1.750      58
## 45      4.533      73
## 46      3.317      83
## 47      3.833      64
## 48      2.100      53
## 49      4.633      82
## 50      2.000      59
## 51      4.800      75
## 52      4.716      90
## 53      1.833      54
## 54      4.833      80
## 55      1.733      54
## 56      4.883      83
## 57      3.717      71
## 58      1.667      64
## 59      4.567      77
## 60      4.317      81
## 61      2.233      59
## 62      4.500      84
## 63      1.750      48
## 64      4.800      82
## 65      1.817      60
## 66      4.400      92
## 67      4.167      78
## 68      4.700      78
## 69      2.067      65
## 70      4.700      73
## 71      4.033      82
## 72      1.967      56
## 73      4.500      79
## 74      4.000      71
## 75      1.983      62
## 76      5.067      76
## 77      2.017      60
## 78      4.567      78
## 79      3.883      76
## 80      3.600      83
## 81      4.133      75
## 82      4.333      82
## 83      4.100      70
## 84      2.633      65
## 85      4.067      73
## 86      4.933      88
## 87      3.950      76
## 88      4.517      80
## 89      2.167      48
## 90      4.000      86
## 91      2.200      60
## 92      4.333      90
## 93      1.867      50
## 94      4.817      78
## 95      1.833      63
## 96      4.300      72
## 97      4.667      84
## 98      3.750      75
## 99      1.867      51
## 100     4.900      82
## 101     2.483      62
## 102     4.367      88
## 103     2.100      49
## 104     4.500      83
## 105     4.050      81
## 106     1.867      47
## 107     4.700      84
## 108     1.783      52
## 109     4.850      86
## 110     3.683      81
## 111     4.733      75
## 112     2.300      59
## 113     4.900      89
## 114     4.417      79
## 115     1.700      59
## 116     4.633      81
## 117     2.317      50
## 118     4.600      85
## 119     1.817      59
## 120     4.417      87
## 121     2.617      53
## 122     4.067      69
## 123     4.250      77
## 124     1.967      56
## 125     4.600      88
## 126     3.767      81
## 127     1.917      45
## 128     4.500      82
## 129     2.267      55
## 130     4.650      90
## 131     1.867      45
## 132     4.167      83
## 133     2.800      56
## 134     4.333      89
## 135     1.833      46
## 136     4.383      82
## 137     1.883      51
## 138     4.933      86
## 139     2.033      53
## 140     3.733      79
## 141     4.233      81
## 142     2.233      60
## 143     4.533      82
## 144     4.817      77
## 145     4.333      76
## 146     1.983      59
## 147     4.633      80
## 148     2.017      49
## 149     5.100      96
## 150     1.800      53
## 151     5.033      77
## 152     4.000      77
## 153     2.400      65
## 154     4.600      81
## 155     3.567      71
## 156     4.000      70
## 157     4.500      81
## 158     4.083      93
## 159     1.800      53
## 160     3.967      89
## 161     2.200      45
## 162     4.150      86
## 163     2.000      58
## 164     3.833      78
## 165     3.500      66
## 166     4.583      76
## 167     2.367      63
## 168     5.000      88
## 169     1.933      52
## 170     4.617      93
## 171     1.917      49
## 172     2.083      57
## 173     4.583      77
## 174     3.333      68
## 175     4.167      81
## 176     4.333      81
## 177     4.500      73
## 178     2.417      50
## 179     4.000      85
## 180     4.167      74
## 181     1.883      55
## 182     4.583      77
## 183     4.250      83
## 184     3.767      83
## 185     2.033      51
## 186     4.433      78
## 187     4.083      84
## 188     1.833      46
## 189     4.417      83
## 190     2.183      55
## 191     4.800      81
## 192     1.833      57
## 193     4.800      76
## 194     4.100      84
## 195     3.966      77
## 196     4.233      81
## 197     3.500      87
## 198     4.366      77
## 199     2.250      51
## 200     4.667      78
## 201     2.100      60
## 202     4.350      82
## 203     4.133      91
## 204     1.867      53
## 205     4.600      78
## 206     1.783      46
## 207     4.367      77
## 208     3.850      84
## 209     1.933      49
## 210     4.500      83
## 211     2.383      71
## 212     4.700      80
## 213     1.867      49
## 214     3.833      75
## 215     3.417      64
## 216     4.233      76
## 217     2.400      53
## 218     4.800      94
## 219     2.000      55
## 220     4.150      76
## 221     1.867      50
## 222     4.267      82
## 223     1.750      54
## 224     4.483      75
## 225     4.000      78
## 226     4.117      79
## 227     4.083      78
## 228     4.267      78
## 229     3.917      70
## 230     4.550      79
## 231     4.083      70
## 232     2.417      54
## 233     4.183      86
## 234     2.217      50
## 235     4.450      90
## 236     1.883      54
## 237     1.850      54
## 238     4.283      77
## 239     3.950      79
## 240     2.333      64
## 241     4.150      75
## 242     2.350      47
## 243     4.933      86
## 244     2.900      63
## 245     4.583      85
## 246     3.833      82
## 247     2.083      57
## 248     4.367      82
## 249     2.133      67
## 250     4.350      74
## 251     2.200      54
## 252     4.450      83
## 253     3.567      73
## 254     4.500      73
## 255     4.150      88
## 256     3.817      80
## 257     3.917      71
## 258     4.450      83
## 259     2.000      56
## 260     4.283      79
## 261     4.767      78
## 262     4.533      84
## 263     1.850      58
## 264     4.250      83
## 265     1.983      43
## 266     2.250      60
## 267     4.750      75
## 268     4.117      81
## 269     2.150      46
## 270     4.417      90
## 271     1.817      46
## 272     4.467      74
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     eruptions waiting
## 1       3.600      79
## 2       1.800      54
## 3       3.333      74
## 4       2.283      62
## 5       4.533      85
## 6       2.883      55
## 7       4.700      88
## 8       3.600      85
## 9       1.950      51
## 10      4.350      85
## 11      1.833      54
## 12      3.917      84
## 13      4.200      78
## 14      1.750      47
## 15      4.700      83
## 16      2.167      52
## 17      1.750      62
## 18      4.800      84
## 19      1.600      52
## 20      4.250      79
## 21      1.800      51
## 22      1.750      47
## 23      3.450      78
## 24      3.067      69
## 25      4.533      74
## 26      3.600      83
## 27      1.967      55
## 28      4.083      76
## 29      3.850      78
## 30      4.433      79
## 31      4.300      73
## 32      4.467      77
## 33      3.367      66
## 34      4.033      80
## 35      3.833      74
## 36      2.017      52
## 37      1.867      48
## 38      4.833      80
## 39      1.833      59
## 40      4.783      90
## 41      4.350      80
## 42      1.883      58
## 43      4.567      84
## 44      1.750      58
## 45      4.533      73
## 46      3.317      83
## 47      3.833      64
## 48      2.100      53
## 49      4.633      82
## 50      2.000      59
## 51      4.800      75
## 52      4.716      90
## 53      1.833      54
## 54      4.833      80
## 55      1.733      54
## 56      4.883      83
## 57      3.717      71
## 58      1.667      64
## 59      4.567      77
## 60      4.317      81
## 61      2.233      59
## 62      4.500      84
## 63      1.750      48
## 64      4.800      82
## 65      1.817      60
## 66      4.400      92
## 67      4.167      78
## 68      4.700      78
## 69      2.067      65
## 70      4.700      73
## 71      4.033      82
## 72      1.967      56
## 73      4.500      79
## 74      4.000      71
## 75      1.983      62
## 76      5.067      76
## 77      2.017      60
## 78      4.567      78
## 79      3.883      76
## 80      3.600      83
## 81      4.133      75
## 82      4.333      82
## 83      4.100      70
## 84      2.633      65
## 85      4.067      73
## 86      4.933      88
## 87      3.950      76
## 88      4.517      80
## 89      2.167      48
## 90      4.000      86
## 91      2.200      60
## 92      4.333      90
## 93      1.867      50
## 94      4.817      78
## 95      1.833      63
## 96      4.300      72
## 97      4.667      84
## 98      3.750      75
## 99      1.867      51
## 100     4.900      82
## 101     2.483      62
## 102     4.367      88
## 103     2.100      49
## 104     4.500      83
## 105     4.050      81
## 106     1.867      47
## 107     4.700      84
## 108     1.783      52
## 109     4.850      86
## 110     3.683      81
## 111     4.733      75
## 112     2.300      59
## 113     4.900      89
## 114     4.417      79
## 115     1.700      59
## 116     4.633      81
## 117     2.317      50
## 118     4.600      85
## 119     1.817      59
## 120     4.417      87
## 121     2.617      53
## 122     4.067      69
## 123     4.250      77
## 124     1.967      56
## 125     4.600      88
## 126     3.767      81
## 127     1.917      45
## 128     4.500      82
## 129     2.267      55
## 130     4.650      90
## 131     1.867      45
## 132     4.167      83
## 133     2.800      56
## 134     4.333      89
## 135     1.833      46
## 136     4.383      82
## 137     1.883      51
## 138     4.933      86
## 139     2.033      53
## 140     3.733      79
## 141     4.233      81
## 142     2.233      60
## 143     4.533      82
## 144     4.817      77
## 145     4.333      76
## 146     1.983      59
## 147     4.633      80
## 148     2.017      49
## 149     5.100      96
## 150     1.800      53
## 151     5.033      77
## 152     4.000      77
## 153     2.400      65
## 154     4.600      81
## 155     3.567      71
## 156     4.000      70
## 157     4.500      81
## 158     4.083      93
## 159     1.800      53
## 160     3.967      89
## 161     2.200      45
## 162     4.150      86
## 163     2.000      58
## 164     3.833      78
## 165     3.500      66
## 166     4.583      76
## 167     2.367      63
## 168     5.000      88
## 169     1.933      52
## 170     4.617      93
## 171     1.917      49
## 172     2.083      57
## 173     4.583      77
## 174     3.333      68
## 175     4.167      81
## 176     4.333      81
## 177     4.500      73
## 178     2.417      50
## 179     4.000      85
## 180     4.167      74
## 181     1.883      55
## 182     4.583      77
## 183     4.250      83
## 184     3.767      83
## 185     2.033      51
## 186     4.433      78
## 187     4.083      84
## 188     1.833      46
## 189     4.417      83
## 190     2.183      55
## 191     4.800      81
## 192     1.833      57
## 193     4.800      76
## 194     4.100      84
## 195     3.966      77
## 196     4.233      81
## 197     3.500      87
## 198     4.366      77
## 199     2.250      51
## 200     4.667      78
## 201     2.100      60
## 202     4.350      82
## 203     4.133      91
## 204     1.867      53
## 205     4.600      78
## 206     1.783      46
## 207     4.367      77
## 208     3.850      84
## 209     1.933      49
## 210     4.500      83
## 211     2.383      71
## 212     4.700      80
## 213     1.867      49
## 214     3.833      75
## 215     3.417      64
## 216     4.233      76
## 217     2.400      53
## 218     4.800      94
## 219     2.000      55
## 220     4.150      76
## 221     1.867      50
## 222     4.267      82
## 223     1.750      54
## 224     4.483      75
## 225     4.000      78
## 226     4.117      79
## 227     4.083      78
## 228     4.267      78
## 229     3.917      70
## 230     4.550      79
## 231     4.083      70
## 232     2.417      54
## 233     4.183      86
## 234     2.217      50
## 235     4.450      90
## 236     1.883      54
## 237     1.850      54
## 238     4.283      77
## 239     3.950      79
## 240     2.333      64
## 241     4.150      75
## 242     2.350      47
## 243     4.933      86
## 244     2.900      63
## 245     4.583      85
## 246     3.833      82
## 247     2.083      57
## 248     4.367      82
## 249     2.133      67
## 250     4.350      74
## 251     2.200      54
## 252     4.450      83
## 253     3.567      73
## 254     4.500      73
## 255     4.150      88
## 256     3.817      80
## 257     3.917      71
## 258     4.450      83
## 259     2.000      56
## 260     4.283      79
## 261     4.767      78
## 262     4.533      84
## 263     1.850      58
## 264     4.250      83
## 265     1.983      43
## 266     2.250      60
## 267     4.750      75
## 268     4.117      81
## 269     2.150      46
## 270     4.417      90
## 271     1.817      46
## 272     4.467      74
\end{verbatim}

\hypertarget{functions-debunked-5}{%
\subsubsection{Functions Debunked}\label{functions-debunked-5}}

\textbf{\href{https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/print}{print()}} is another option for you to use if you want to see a variable, dataset, or any other type of output.

print(
\textgreater{} \textbf{ANY OBJECT}

)

\textbf{For example:} \texttt{print(faithful)}, \texttt{print(faithful\$eruptions)}, \texttt{print(1:12)}

\hypertarget{try-it-yourself-5}{%
\subsection{1.6 Try it yourself}\label{try-it-yourself-5}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  What are 2 ways that we can print rows 1 to 5 of the data frame faithful?
\item
  What is the value of the cell in the fourth row and second column of the data frame faithful?
\end{enumerate}

\hypertarget{dimensions}{%
\subsection{Dimensions}\label{dimensions}}

Usually, the first thing we want to do when exploring a dataset is to check its dimensions. To do this, we use the function \texttt{dim()} with the dataset name between the \texttt{()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 272   2
\end{verbatim}

You should see two numbers as the output: 272 and 2. This tells us that the dataset faithful has 272 rows (AKA observations) and 2 columns (AKA variables). Checking the dimensions of our datasets may be helpful when we want to check how large our dataset is after a certain data manipulation method. This may also be helpful to check if our manipulated or original data is abnormally large or small.

\hypertarget{structure}{%
\subsection{Structure}\label{structure}}

We can also check the structure of our data using the function \texttt{str()} with the dataset name between the \texttt{()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'data.frame':    272 obs. of  2 variables:
##  $ eruptions: num  3.6 1.8 3.33 2.28 4.53 ...
##  $ waiting  : num  79 54 74 62 85 55 88 85 51 85 ...
\end{verbatim}

In this case, we are provided with several pieces of information:
1. the dataset faithful is a data frame
2. there are two columns, or variables, in this dataset: eruptions and waiting
3. both eruptions and waiting contain numerical data

As you can see, \texttt{str()} can be very helpful if we want to check what kind of data we are working with and how large the data is.

\hypertarget{class}{%
\subsection{Class}\label{class}}

The class of our data can also be checked using the function \texttt{class()}. Similarly, the dataset name or the variable name can go between the \texttt{()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{eruptions)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

Note how if we are checking the class of the variable eruption, we need to have the dataset name followed by a \$ first before we can write the variable name.

\hypertarget{try-it-yourself-6}{%
\subsection{1.7 Try it yourself}\label{try-it-yourself-6}}

Write a code to find the structure of the variable waiting in the faithful dataset.

\hypertarget{length}{%
\subsection{Length}\label{length}}

We can also check the length of our dataset or variable using \texttt{length()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{length}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
    \DocumentationTok{\#\# the output should be 2 {-} the number of variables in our dataset!}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{length}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{eruption)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 272
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
    \DocumentationTok{\#\# the output should be 272 {-} the number of observations in this variable!}
\end{Highlighting}
\end{Shaded}

\hypertarget{try-it-yourself-7}{%
\subsection{1.8 Try it yourself}\label{try-it-yourself-7}}

Remember those variables that we created earlier in the tutorial? Try finding the lengths of data frame and numeric.

\textbf{Challenge:} Psst! There are actually 2 ways for you to find the length of numeric.

\hypertarget{head-and-tail}{%
\subsection{Head and Tail}\label{head-and-tail}}

So we are now somewhat familiar with the basic functions to explore the general information about our dataset, YAY! If you want to check the actual dataset (AKA see the actual table), but do not want to see the whole data frame with 272 rows, \texttt{head()} and \texttt{tail()} are good options.

\texttt{head()} shows you the first few rows of your dataset.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   eruptions waiting
## 1     3.600      79
## 2     1.800      54
## 3     3.333      74
## 4     2.283      62
## 5     4.533      85
## 6     2.883      55
\end{verbatim}

\texttt{tail()} shows you the last few rows of your dataset.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tail}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     eruptions waiting
## 267     4.750      75
## 268     4.117      81
## 269     2.150      46
## 270     4.417      90
## 271     1.817      46
## 272     4.467      74
\end{verbatim}

You can also choose how many rows you want to see

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(faithful, }\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    eruptions waiting
## 1      3.600      79
## 2      1.800      54
## 3      3.333      74
## 4      2.283      62
## 5      4.533      85
## 6      2.883      55
## 7      4.700      88
## 8      3.600      85
## 9      1.950      51
## 10     4.350      85
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tail}\NormalTok{(faithful, }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     eruptions waiting
## 271     1.817      46
## 272     4.467      74
\end{verbatim}

As you can see, \texttt{head()} and \texttt{tail()} allow you to check just a portion of the dataset. This is especially useful when you're working with large datasets and you only want to see part of it to make sure everything is okay!

\hypertarget{do-question-8-of-the-quiz-now}{%
\subsubsection{DO QUESTION 8 OF THE QUIZ NOW}\label{do-question-8-of-the-quiz-now}}

\begin{quote}
Which of the following codes is best to find how large our dataset is?
\end{quote}

\hypertarget{mathematical-functions-in-r}{%
\subsection{Mathematical Functions in R}\label{mathematical-functions-in-r}}

R has a range of mathemtical functions for us to use. Below are only a few basic ones, we will cover much more as we move through our tutorials. Note that these functions only work if the data class is numeric.

We can find the \textbf{mean} of waiting:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 70.89706
\end{verbatim}

We can also find the \textbf{maximum} and \textbf{minimum} values of waiting:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{max}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 96
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{min}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 43
\end{verbatim}

And the \textbf{1st, 2nd, 3rd, and 4th quantile} of waiting:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{quantile}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting, }\FloatTok{0.25}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 25% 
##  58
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{quantile}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting, }\FloatTok{0.5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 50% 
##  76
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{quantile}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting, }\FloatTok{0.75}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 75% 
##  82
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{quantile}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting, }\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 100% 
##   96
\end{verbatim}

As well as the \textbf{median} of waiting:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(faithful}\SpecialCharTok{$}\NormalTok{waiting)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 76
\end{verbatim}

Another powerful function in R is \texttt{summary()}. It literally summarizes everything that we have just covered in this subsection in one single table. Not only that, if you place the dataset name within the \texttt{()}, it actually runs all of the functions above for all variables in the dataset.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(faithful)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    eruptions        waiting    
##  Min.   :1.600   Min.   :43.0  
##  1st Qu.:2.163   1st Qu.:58.0  
##  Median :4.000   Median :76.0  
##  Mean   :3.488   Mean   :70.9  
##  3rd Qu.:4.454   3rd Qu.:82.0  
##  Max.   :5.100   Max.   :96.0
\end{verbatim}

\hypertarget{try-it-yourself-8}{%
\subsection{1.9 Try it yourself}\label{try-it-yourself-8}}

Recall that in order for us to refer to a variable in a dataset, we need to first type the dataset name following by a \$ before we can type the variable name.

A way to avoid repeating \texttt{faithful\$} everytime is to attach the dataset using \texttt{attach(faithful)}.

Try attaching the dataset faithful then find the mean of the variable eruptions without using \$!

\hypertarget{do-question-9-of-the-quiz-now}{%
\subsubsection{DO QUESTION 9 OF THE QUIZ NOW}\label{do-question-9-of-the-quiz-now}}

\begin{quote}
What information does the function \texttt{summary()} provide us with? (select all that apply)
\end{quote}

\hypertarget{writing-a-new-function-in-r}{%
\section{6. WRITING A NEW FUNCTION IN R}\label{writing-a-new-function-in-r}}

While R and its existing packages has a lot to offer, there may be times when the function that we want to use does not really exist. In situations like this, we may want to just write our own function! A function in R is a script and it aims to help you to write reproducible code.

For example, we want to write a function that helps us convert temperature from Celsius to Farenheit. To do this, we would need this shell first:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{F\_to\_C }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(F) \{\}}
\end{Highlighting}
\end{Shaded}

F\_to\_C is our function name, and \texttt{function(F)} tells R that we want to write a new function. The actual function that we write will be placed between the brackets \texttt{\{\}}.

Let's think of the math really quickly. To convert °F to °C, we would need to subtract 32 then times that by 5/9. So that should look like this: \texttt{(F\ -\ 32)\ *\ 5\ /\ 9}. And we want the function to print the results, so our final function should look like this:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{F\_to\_C }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(F) \{}
    \FunctionTok{print}\NormalTok{((F }\SpecialCharTok{{-}} \DecValTok{32}\NormalTok{) }\SpecialCharTok{*} \DecValTok{5} \SpecialCharTok{/} \DecValTok{9}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Each function has its own name and it is meant to be different from any other function names. To run it, you need to call the function name.

Now let's see if your function works. We can test it using a known value. Since we know that 32°F is equal to 0°C:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{F\_to\_C}\NormalTok{(}\DecValTok{32}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0
\end{verbatim}

Awesome! It works!

Here are a few other ways that we can create new functions! Note that we can also nest existing functions inside new functions to make our own functions! For example, knowing that \texttt{sprintf()} is an existing function, we can write the following:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hello }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(name)\{}
    \FunctionTok{sprintf}\NormalTok{(}\StringTok{"Hello \%s"}\NormalTok{, name)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{hello}\NormalTok{(}\StringTok{"Tim"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Hello Tim"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{hello}\NormalTok{(}\StringTok{"Elisa"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Hello Elisa"
\end{verbatim}

We can also write new functions that will give us a return statement. A return statement means you want some output or result after running the script to be returned. For example, the following function will always plus 1 to whatever number we nest between the \texttt{()}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{plus\_1 }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x)\{}
    \FunctionTok{return}\NormalTok{(x}\SpecialCharTok{+}\DecValTok{1}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plus\_1}\NormalTok{(}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 11
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plus\_1}\NormalTok{(}\FloatTok{20.93}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 21.93
\end{verbatim}

Note also that there can be more than one argument in a function! For example, the following function requires the arguments x and y, of which x will be multiplied by 10 and y will be added to the new x.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{math\_work }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x, y)\{}
\NormalTok{    x }\OtherTok{=}\NormalTok{ x }\SpecialCharTok{*} \DecValTok{10}
\NormalTok{    y }\OtherTok{=}\NormalTok{ y }\SpecialCharTok{+}\NormalTok{ x}
\NormalTok{    result }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(x, y)}
    \FunctionTok{return}\NormalTok{(result)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{math\_work}\NormalTok{(}\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [[1]]
## [1] 30
## 
## [[2]]
## [1] 35
\end{verbatim}

Once we have written a new function, it will saved in your Global Environment and we can continue to use it as long as the Environment is not wiped. Note that the new functions will not work if you open a new R session that does not store them as functions. But we can also run the code chunks above again to remind R of the new functions.

\hypertarget{for-loops}{%
\section{7. FOR LOOPS}\label{for-loops}}

In R, we can also write for loops that iterate a particular action/code that we want. For example, we can write a loop that adds 1 to every number of a vector. To do this, we first need to create a vector and assign it to a variable. Let's say we want the vector 1:10 to be assigned to k.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{k }\OtherTok{\textless{}{-}} \DecValTok{1}\SpecialCharTok{:}\DecValTok{10}
\end{Highlighting}
\end{Shaded}

After that, the for loop is written like so:

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ k)\{}
  \FunctionTok{print}\NormalTok{(k[i] }\SpecialCharTok{+} \DecValTok{1}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
\end{verbatim}

Another way for us to yield the same output is to define the vector 1:10 within the for loop directly, like so:

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)\{}
  \FunctionTok{print}\NormalTok{(i }\SpecialCharTok{+} \DecValTok{1}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
\end{verbatim}

We can write more complicated for loops by adding more functions, arithmetic operators, or even vectors! For example, if we want to create a different for loop that calculates for the \texttt{k\^{}2}, we should first create a new vector, k.sq, with the the same length as vector k.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{k.sq }\OtherTok{\textless{}{-}} \DecValTok{1}\SpecialCharTok{:}\DecValTok{10}
\end{Highlighting}
\end{Shaded}

After that, we can write our for loop like so:

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ k)\{    }
\NormalTok{  k.sq[i] }\OtherTok{\textless{}{-}}\NormalTok{ k[i]}\SpecialCharTok{\^{}}\DecValTok{2}
  \FunctionTok{print}\NormalTok{(k.sq[i])}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1
## [1] 4
## [1] 9
## [1] 16
## [1] 25
## [1] 36
## [1] 49
## [1] 64
## [1] 81
## [1] 100
\end{verbatim}

Now, everytime we call for \texttt{k.sq}, the new vector should be the output!

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{k.sq}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}

We can also write for loops for data frames. Let's take a look at our data frame, dataframe, again.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataframe}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Number    Text   T/F
## 1      1   hello  TRUE
## 2      2 bonjour FALSE
## 3      3    ciao  TRUE
## 4     10   hello  TRUE
## 5     11 bonjour FALSE
## 6     12    ciao  TRUE
\end{verbatim}

Now, let's say we want to loop through the entire data frame to find only the values under the ``Number'' column. To do that, we first need to know the number of rows our data frame has - we can use \texttt{nrow()} for this. But as we have learned before, we can just define this value directly in our for loop instead of having to do an extra step of finding the number of rows outside of the for loop.

In other words, our code would look like so:

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\FunctionTok{nrow}\NormalTok{(dataframe))\{}
  \FunctionTok{print}\NormalTok{(dataframe[i,}\StringTok{"Number"}\NormalTok{])}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1
## [1] 2
## [1] 3
## [1] 10
## [1] 11
## [1] 12
\end{verbatim}

We can also add conditions to our for loops by using \texttt{if}. For instance, we only want to print values under the ``T/F'' column where \texttt{i\ \textgreater{}\ 3}. To do that, we would need to write the following codes:

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\FunctionTok{nrow}\NormalTok{(dataframe))\{}
  \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{\textgreater{}} \DecValTok{3}\NormalTok{) }\FunctionTok{print}\NormalTok{(dataframe[i,}\StringTok{"T/F"}\NormalTok{])}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
## [1] FALSE
## [1] TRUE
\end{verbatim}

\hypertarget{help-within-and-outside-of-r}{%
\section{8. HELP WITHIN AND OUTSIDE OF R}\label{help-within-and-outside-of-r}}

It gets a while to get used to the language of R and no tutorials can fully explain the complexities and nuances of this language. Therefore, it is important to know how to and where to get help about R! There are so many ways for you to search for help on R, here are only a few methods:

\hypertarget{within-r}{%
\subsection{Within R}\label{within-r}}

If you have questions about a function or dataset in R, the easiest way to get help is to type ? before that particular function or dataset - as we have previously seen. Try running the codes below, what do you see?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ?mean}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ?faithful}
\end{Highlighting}
\end{Shaded}

If you want to know whether there is a function for a particular action, you can use ?? before the action. If your action is more than one word long (e.g.~geometric functions), you can put the entire phrase in quotation marks ("").

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ??"geometic functions"}
\end{Highlighting}
\end{Shaded}

After running the code above, you should see a list of functions, the package that it belongs to, as well as what it does. For example, the function \texttt{phil()} in the R package named BAS can be usedd to compound confluent hypergeometric function of two variables.

If you are using RStudio, you can also use the search box in the help window at the bottom right corner of our screen.

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/M9KAqcj.png}
\caption{Figure 3. Help window in RStudio}
\end{figure}

\hypertarget{outside-of-r}{%
\subsection{Outside of R}\label{outside-of-r}}

Outside of R, there are also plenty of resources for you to tap into \href{https://www.rdocumentation.org/}{R Documentation} is a good starting point.

Another resource is \href{https://stackoverflow.com/}{Stack Overflow}, an online forum where you can ask and answer questions relating to coding!

\hypertarget{do-question-10-of-the-quiz-now}{%
\subsubsection{DO QUESTION 10 OF THE QUIZ NOW}\label{do-question-10-of-the-quiz-now}}

\begin{quote}
What are some of the ways that we can find help about R? (select all that apply)
\end{quote}

\hypertarget{summary-and-takeways}{%
\section{9. SUMMARY AND TAKEWAYS}\label{summary-and-takeways}}

In this tutorial, we learned a few basic steps of using R as a data analysis language. Completing this tutorial will prepare you more advanced tutorials in the future. Learning R is like learning another language, so the biggest tip is to practice practice practice!

After this tutorial, you should be familiar with setting up for an R session using basic working directory functions. Additionally, you should also be comfortable with using arithmetic and logical operators and a few common data types of R. You are also introduced with a few basic functions for exploring a dataset as well as several common methods on how to seek help within and outside of R.

\hypertarget{importing-data-into-r-with-readr}{%
\chapter{Importing Data into R with readr}\label{importing-data-into-r-with-readr}}

\hypertarget{instructions-2}{%
\section{INSTRUCTIONS}\label{instructions-2}}

This tutorial will teach you the basics of importing data from your hard drive into R. We will cover how to import a Comma-Separated Values (csv) file into R using the \texttt{read\_csv()} function in the readr package. We will also be covering the different data types that R can recognize from a csv file, how to manipulate how data show up on R, as well as how to export the manipulated file back into a csv file.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/N9yDv5tkQMiGiUB29}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives-2}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives-2}}

\begin{itemize}
\tightlist
\item
  Know how to import a Comma-Separated Values (csv) file from a hard drive into R.
\item
  Understand the basics of \texttt{read\_csv()} including how to use it to import data and how to manipulate the presentation of the data on R.
\item
  Be familiar with the different data types that R can recognize.
\item
  Know how to import other data files such as txt, xlsx, xpt, and sas into R.
\item
  Know how to export a csv file from R into a hard drive.
\end{itemize}

\hypertarget{set-up}{%
\section{1. SET UP}\label{set-up}}

In this tutorial, we will be using the readr package, so we will need to install and attach this package onto our R and R session. The readr package is part of a larger \textbf{tidyverse core}. This tidyverse core contains many R packages that give us access to functions that mainly work to organize data. In this tutorial series, we will be covering three packages from tidyverse: readr (tutorial 2), dplyr (tutorial 4), and ggplot (tutorial 5).

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("readr")}
\FunctionTok{library}\NormalTok{(readr)}
\end{Highlighting}
\end{Shaded}

For this tutorial, we will be using the \texttt{demo\_csv.csv} file. This data is a subset of the National Health and Nutrition Examination Survey (NHANES) conducted by the National Center for Health Statistics (NCHS). Our \texttt{demo\_csv.csv}, in particular, contains a portion of the information about the demographic of the survey's participants in the years 2013-2014. We will cover NHANES in more detail in tutorial 3. For now, you can explore NHANES in general by visiting this \href{https://wwwn.cdc.gov/nchs/nhanes/Default.aspx}{website}.

After attaching the readr package, one other thing that we need to complete this tutorial is a csv file. Note that the csv file should be in your working directory - this just makes out lives much easier when we want to import data from a hard drive onto R. Recall that we can use the function \texttt{dir()} to check if all of the files we need are in our working directory.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dir}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "_book"                                 
##  [2] "_bookdown.yml"                         
##  [3] "_bookdown_files"                       
##  [4] "_build.sh"                             
##  [5] "_deploy.sh"                            
##  [6] "_output.yml"                           
##  [7] "0-r-and-rstudio-set-up.Rmd"            
##  [8] "1-introduction-to-r.Rmd"               
##  [9] "2-importing-data-into-r-with-readr.Rmd"
## [10] "3-introduction-to-nhanes.Rmd"          
## [11] "4-data-analysis-with-dplyr.Rmd"        
## [12] "5-data-visualization-with-ggplot.Rmd"  
## [13] "6-date-time-data-with-lubridate.Rmd"   
## [14] "7-data-summary-with-tableone.Rmd"      
## [15] "8-Exercise-Solutions.Rmd"              
## [16] "9-references.Rmd"                      
## [17] "book.bib"                              
## [18] "data"                                  
## [19] "DESCRIPTION"                           
## [20] "Dockerfile"                            
## [21] "docs"                                  
## [22] "header.html"                           
## [23] "images"                                
## [24] "index.Rmd"                             
## [25] "intro2R.Rmd"                           
## [26] "intro2R_cache"                         
## [27] "intro2R_files"                         
## [28] "LICENSE"                               
## [29] "now.json"                              
## [30] "packages.bib"                          
## [31] "preamble.tex"                          
## [32] "R.Rproj"                               
## [33] "README.md"                             
## [34] "style.css"                             
## [35] "toc.css"
\end{verbatim}

You may be a bit confused about the output of the previous code. This is because we are working on Kaggle and the csv file that we will be using is not located in our working directory. More specifically, the csv file is in the \emph{input} folder, whereas our working directory is the \emph{output} folder.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getwd}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "C:/Users/ehsan/Documents/GitHub/intro2R"
\end{verbatim}

There are two ways that we can approach this problem. We will go over how to do both in the next section of this tutorial.

\hypertarget{do-question-1-of-the-quiz-now}{%
\subsubsection{DO QUESTION 1 OF THE QUIZ NOW}\label{do-question-1-of-the-quiz-now}}

\begin{quote}
\textbf{REVIEW:} Which of the following functions lets us set a new working directory?
\end{quote}

\hypertarget{basics-of-importing-a-csv-file-into-r}{%
\section{2. BASICS OF IMPORTING A CSV FILE INTO R}\label{basics-of-importing-a-csv-file-into-r}}

\hypertarget{method-1-setting-a-different-working-directory}{%
\subsection{Method 1: Setting a Different Working Directory}\label{method-1-setting-a-different-working-directory}}

As we have sort of alluded to in tutorial 1, we can set our working directory as the location of the csv file to import it into R. After successfully importing the file, we can then set the working directory back to our original folder.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# setwd("../")}
\end{Highlighting}
\end{Shaded}

Now that we have set our working directory as the \emph{input} folder, we can check if the \textbf{demo\_csv.csv} file is actually there by using \texttt{dir()} again.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dir}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "_book"                                 
##  [2] "_bookdown.yml"                         
##  [3] "_bookdown_files"                       
##  [4] "_build.sh"                             
##  [5] "_deploy.sh"                            
##  [6] "_output.yml"                           
##  [7] "0-r-and-rstudio-set-up.Rmd"            
##  [8] "1-introduction-to-r.Rmd"               
##  [9] "2-importing-data-into-r-with-readr.Rmd"
## [10] "3-introduction-to-nhanes.Rmd"          
## [11] "4-data-analysis-with-dplyr.Rmd"        
## [12] "5-data-visualization-with-ggplot.Rmd"  
## [13] "6-date-time-data-with-lubridate.Rmd"   
## [14] "7-data-summary-with-tableone.Rmd"      
## [15] "8-Exercise-Solutions.Rmd"              
## [16] "9-references.Rmd"                      
## [17] "book.bib"                              
## [18] "data"                                  
## [19] "DESCRIPTION"                           
## [20] "Dockerfile"                            
## [21] "docs"                                  
## [22] "header.html"                           
## [23] "images"                                
## [24] "index.Rmd"                             
## [25] "intro2R.Rmd"                           
## [26] "intro2R_cache"                         
## [27] "intro2R_files"                         
## [28] "LICENSE"                               
## [29] "now.json"                              
## [30] "packages.bib"                          
## [31] "preamble.tex"                          
## [32] "R.Rproj"                               
## [33] "README.md"                             
## [34] "style.css"                             
## [35] "toc.css"
\end{verbatim}

Perfect! Now that we have confirmed the csv file is in our working directory, we can now import it using \texttt{read\_csv()}. This function is relatively easy to use. All we need to do is add the name of our csv file along with the \texttt{.csv} extension in \texttt{""} within the brackets, and we are good to go!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 15 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (3): gender, race, edu
## dbl (2): id, age
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{verbatim}
## # A tibble: 15 x 5
##       id gender   age race                          edu                         
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              <NA>                        
##  4 83720 Male      36 Non-Hispanic Black            Some college or AA degree   
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ <NA>                        
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              <NA>                        
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              <NA>                        
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                <NA>                        
## 15 83731 Male      11 Non-Hispanic Asian            <NA>
\end{verbatim}

You should see a list of ``Column specification'' and the \texttt{demo\_csv.csv} file imported into a data frame in R after running the codes above. We will go over what ``Column specification'' means later in this tutorial.

Now that we have successfully imported our csv file into R, it is time for us to set our working directory back to our original directory.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#setwd("..")}
\CommentTok{\#setwd("..") }
\CommentTok{\#setwd("..")}


\CommentTok{\#setwd("./data/")}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getwd}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "C:/Users/ehsan/Documents/GitHub/intro2R"
\end{verbatim}

\hypertarget{method-2-copying-the-exact-pathway-of-the-file}{%
\subsection{Method 2: Copying the Exact Pathway of the File}\label{method-2-copying-the-exact-pathway-of-the-file}}

Another way for us to import the csv file into R is to copy and paste the exact pathway of the file into \texttt{read\_csv()}. You should see the exact same ``Column specification'' and data frame as before!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 15 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (3): gender, race, edu
## dbl (2): id, age
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{verbatim}
## # A tibble: 15 x 5
##       id gender   age race                          edu                         
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              <NA>                        
##  4 83720 Male      36 Non-Hispanic Black            Some college or AA degree   
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ <NA>                        
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              <NA>                        
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              <NA>                        
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                <NA>                        
## 15 83731 Male      11 Non-Hispanic Asian            <NA>
\end{verbatim}

Note that you can also store this imported data into an object using \texttt{\textless{}-}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DEMO }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{, }\AttributeTok{show\_col\_types =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Now, we can just type DEMO to see the data frame.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DEMO}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 15 x 5
##       id gender   age race                          edu                         
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              <NA>                        
##  4 83720 Male      36 Non-Hispanic Black            Some college or AA degree   
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ <NA>                        
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              <NA>                        
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              <NA>                        
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                <NA>                        
## 15 83731 Male      11 Non-Hispanic Asian            <NA>
\end{verbatim}

\hypertarget{do-questions-2-4-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 2-4 OF THE QUIZ NOW}\label{do-questions-2-4-of-the-quiz-now}}

\begin{quote}
\textbf{REVIEW:} Which of the following codes will print the entire DEMO data frame?
\end{quote}

\begin{quote}
read\_csv can also be used to import Excel and txt files. (True or False)
\end{quote}

\begin{quote}
Which R package does the function \texttt{read\_csv()} belong to?
\end{quote}

\hypertarget{try-it-yourself-9}{%
\subsection{2.1 Try it yourself}\label{try-it-yourself-9}}

Can you try importing the \texttt{bpx.csv} file into R using the function \texttt{read\_csv()}?

\hypertarget{key-notes-about-importing-data-into-r}{%
\subsection{Key Notes About Importing Data into R}\label{key-notes-about-importing-data-into-r}}

There are a few key things that we should note when using \texttt{read\_csv()}:
1. The file name or pathway to the file needs to be in \texttt{""},
2. The file extension, \texttt{.csv}, needs to be present, and
3. The name of the file needs to be \textbf{exact}.

The third point is related to one of the most common mistakes. When importing any data from your hard drive onto R, you need to make sure that the file name that you write in R is \textbf{exactly} what it displays on your hard drive. For instance, take note of spaces, capital letters, spelling of words, as well as the correct extensions. In other words, \texttt{demo\_csv-1.csv} or \texttt{Demo\_csv.csv} is much different than \texttt{demo\_csv.csv}.

Another point to note is that \texttt{read\_csv()} automatically assumes that the first row of your csv file is the header. We will learn how to tell R this assumption is not correct in section 3 of this tutorial.

\hypertarget{do-question-5-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 5 OF THE QUIZ NOW}\label{do-question-5-of-the-quiz-now-1}}

\begin{quote}
\textbf{REVIEW:} R is case sensitive. (True or False)
\end{quote}

\hypertarget{try-it-yourself-10}{%
\subsection{2.2 Try it yourself}\label{try-it-yourself-10}}

Can you identify the mistakes of the following codes?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# a. }
\CommentTok{\# read\_csv(../input/import/demo\_csv.csv)}

\CommentTok{\# b.}
\CommentTok{\# read\_csv("data/DEMO\_csv.csv")}

\CommentTok{\# c.}
\CommentTok{\# Read\_csv("data/demo\_csv.csv")}

\CommentTok{\# d. }
\CommentTok{\# read\_csv(data/"demo\_csv.csv")}
\end{Highlighting}
\end{Shaded}

\hypertarget{do-question-6-of-the-quiz-now}{%
\subsubsection{DO QUESTION 6 OF THE QUIZ NOW}\label{do-question-6-of-the-quiz-now}}

\begin{quote}
Which of the following statements about \texttt{read\_csv()} are correct? (select all that apply)
\end{quote}

\hypertarget{column-specification}{%
\subsection{Column Specification}\label{column-specification}}

You may notice that when you import a data into R by running \texttt{read\_csv()}, a ``Column specification'' list appears. This list tells us two things:
1. The \textbf{names} of our columns and
2. The \textbf{type of data} that each column contains.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 15 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (3): gender, race, edu
## dbl (2): id, age
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{verbatim}
## # A tibble: 15 x 5
##       id gender   age race                          edu                         
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              <NA>                        
##  4 83720 Male      36 Non-Hispanic Black            Some college or AA degree   
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ <NA>                        
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              <NA>                        
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              <NA>                        
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                <NA>                        
## 15 83731 Male      11 Non-Hispanic Asian            <NA>
\end{verbatim}

As we can see after running the code above, there are five columns in our data frame: id (the participant's unique ID number), gender, age, race, and edu (highest level of education).

We can also see that there are two types of data in this data frame \texttt{col\_double()} and \texttt{col\_character()}.

\hypertarget{do-question-7-of-the-quiz-now}{%
\subsubsection{DO QUESTION 7 OF THE QUIZ NOW}\label{do-question-7-of-the-quiz-now}}

\begin{quote}
Which of the following is the best an example of a data that would be classified as \texttt{col\_double()}?
\end{quote}

\hypertarget{try-it-yourself-11}{%
\subsection{2.3 Try it yourself}\label{try-it-yourself-11}}

Just by looking at the actual data frame, can you guess what type of data \texttt{col\_double()} and \texttt{col\_character()} are?

(\textbf{HINT}: doubles? integers? logical? character?)

\hypertarget{more-arguments-of-read_csv}{%
\section{3. MORE ARGUMENTS OF READ\_CSV}\label{more-arguments-of-read_csv}}

\hypertarget{skip}{%
\subsection{Skip}\label{skip}}

There are a range of other arguments that we can use with \texttt{read\_csv()}. Firstly, we can nest \texttt{skip} inside the \texttt{()} of \texttt{read\_csv()} to tell R to skip (AKA not import) a certain number of rows when importing our data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Skip\_2 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{, }\AttributeTok{skip =} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 13 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (3): Female, Non-Hispanic Black, High school graduate/GED or equi
## dbl (2): 83718, 60
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Skip\_2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 13 x 5
##    `83718` Female  `60` `Non-Hispanic Black`        `High school graduate/GED o~
##      <dbl> <chr>  <dbl> <chr>                       <chr>                       
##  1   83719 Male       3 Mexican American            <NA>                        
##  2   83720 Male      36 Non-Hispanic Black          Some college or AA degree   
##  3   83721 Male      52 Non-Hispanic White          College graduate or above   
##  4   83722 Male       0 Other Race - Including Mul~ <NA>                        
##  5   83723 Male      61 Mexican American            9-11th grade (Includes 12th~
##  6   83724 Male      80 Non-Hispanic White          High school graduate/GED or~
##  7   83725 Male       7 Mexican American            <NA>                        
##  8   83726 Male      40 Mexican American            Less than 9th grade         
##  9   83727 Male      26 Other Hispanic              College graduate or above   
## 10   83728 Female     2 Mexican American            <NA>                        
## 11   83729 Female    42 Non-Hispanic Black          College graduate or above   
## 12   83730 Male       7 Other Hispanic              <NA>                        
## 13   83731 Male      11 Non-Hispanic Asian          <NA>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DEMO}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 15 x 5
##       id gender   age race                          edu                         
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              <NA>                        
##  4 83720 Male      36 Non-Hispanic Black            Some college or AA degree   
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ <NA>                        
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              <NA>                        
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              <NA>                        
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                <NA>                        
## 15 83731 Male      11 Non-Hispanic Asian            <NA>
\end{verbatim}

When comparing the \emph{Skip\_2} table with our original \emph{DEMO} table, we can see that \emph{Skip\_2} has two less rows. This is because the argument \texttt{skip\ =\ 2} has told R to not import the first two rows of our \texttt{demo.csv}.

\hypertarget{do-question-8-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 8 OF THE QUIZ NOW}\label{do-question-8-of-the-quiz-now-1}}

\begin{quote}
Which of the following statements is true about the argument \texttt{skip}?
\end{quote}

\hypertarget{try-it-yourself-12}{%
\subsection{2.4 Try it yourself}\label{try-it-yourself-12}}

You may also notice that the header of \emph{Skip\_2} is incorrect. This is because R recognizes the header of our data as the first row, thus omiting it when importing \texttt{demo.csv} into R.

Let's say this is not what we really want. What we actually want to do is to remove the first two rows of actual data while keeping the header. What do you think we have to do to achieve this?

(\textbf{HINT}: Recall what we learn about extracting rows in tutorial 1)

\hypertarget{remove-header-header-names}{%
\subsection{Remove Header \& Header Names}\label{remove-header-header-names}}

Recall how \texttt{read\_csv()} assumes that the first row of our data is the header. If this is not true, we can use \texttt{col\_names\ =\ FALSE} to tell R that the first row of our data do not contain headers and that R should add headers for our data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{No\_header }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{, }
                      \AttributeTok{col\_names =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 16 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (5): X1, X2, X3, X4, X5
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{No\_header}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 16 x 5
##    X1    X2     X3    X4                            X5                          
##    <chr> <chr>  <chr> <chr>                         <chr>                       
##  1 id    gender age   race                          edu                         
##  2 83717 Female 80    Mexican American              Less than 9th grade         
##  3 83718 Female 60    Non-Hispanic Black            High school graduate/GED or~
##  4 83719 Male   3     Mexican American              <NA>                        
##  5 83720 Male   36    Non-Hispanic Black            Some college or AA degree   
##  6 83721 Male   52    Non-Hispanic White            College graduate or above   
##  7 83722 Male   0     Other Race - Including Multi~ <NA>                        
##  8 83723 Male   61    Mexican American              9-11th grade (Includes 12th~
##  9 83724 Male   80    Non-Hispanic White            High school graduate/GED or~
## 10 83725 Male   7     Mexican American              <NA>                        
## 11 83726 Male   40    Mexican American              Less than 9th grade         
## 12 83727 Male   26    Other Hispanic                College graduate or above   
## 13 83728 Female 2     Mexican American              <NA>                        
## 14 83729 Female 42    Non-Hispanic Black            College graduate or above   
## 15 83730 Male   7     Other Hispanic                <NA>                        
## 16 83731 Male   11    Non-Hispanic Asian            <NA>
\end{verbatim}

We can also change the names of our headers by using \texttt{col\_names\ =} following by a vector of names. For example:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Header\_names }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{,}
                      \AttributeTok{col\_names =} \FunctionTok{c}\NormalTok{(}\StringTok{"ID"}\NormalTok{, }\StringTok{"Gender"}\NormalTok{, }\StringTok{"Age"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 16 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (5): ID, Gender, Age, Race, Education
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Header\_names}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 16 x 5
##    ID    Gender Age   Race                          Education                   
##    <chr> <chr>  <chr> <chr>                         <chr>                       
##  1 id    gender age   race                          edu                         
##  2 83717 Female 80    Mexican American              Less than 9th grade         
##  3 83718 Female 60    Non-Hispanic Black            High school graduate/GED or~
##  4 83719 Male   3     Mexican American              <NA>                        
##  5 83720 Male   36    Non-Hispanic Black            Some college or AA degree   
##  6 83721 Male   52    Non-Hispanic White            College graduate or above   
##  7 83722 Male   0     Other Race - Including Multi~ <NA>                        
##  8 83723 Male   61    Mexican American              9-11th grade (Includes 12th~
##  9 83724 Male   80    Non-Hispanic White            High school graduate/GED or~
## 10 83725 Male   7     Mexican American              <NA>                        
## 11 83726 Male   40    Mexican American              Less than 9th grade         
## 12 83727 Male   26    Other Hispanic                College graduate or above   
## 13 83728 Female 2     Mexican American              <NA>                        
## 14 83729 Female 42    Non-Hispanic Black            College graduate or above   
## 15 83730 Male   7     Other Hispanic                <NA>                        
## 16 83731 Male   11    Non-Hispanic Asian            <NA>
\end{verbatim}

\hypertarget{do-question-9-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 9 OF THE QUIZ NOW}\label{do-question-9-of-the-quiz-now-1}}

\begin{quote}
In which of the following scenarios do you think we would \textbf{NEED} to use \texttt{col\_names\ =\ FALSE}? (select all that apply)
\end{quote}

With the added\texttt{col\_names}, you may notice that the column specification for our data is not incorrect (everything is recognized as \texttt{col\_character()}!

This is because R now reads ``id'', ``gender'', ``age'', ``race'', and ``edu'' as a content row, and since all of these are texts, R recognizes the entire column as \texttt{col\_character()}. This is something worthy to note when you are importing data into R.

We can solve this problem with this solution:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(Skip\_and\_Header\_Names }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{, }
                                  \AttributeTok{skip =} \DecValTok{1}\NormalTok{,}
                                  \AttributeTok{col\_names =} \FunctionTok{c}\NormalTok{(}\StringTok{"ID"}\NormalTok{, }\StringTok{"Gender"}\NormalTok{, }\StringTok{"Age"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 15 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (3): Gender, Race, Education
## dbl (2): ID, Age
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{verbatim}
## # A tibble: 15 x 5
##       ID Gender   Age Race                          Education                   
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              <NA>                        
##  4 83720 Male      36 Non-Hispanic Black            Some college or AA degree   
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ <NA>                        
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              <NA>                        
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              <NA>                        
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                <NA>                        
## 15 83731 Male      11 Non-Hispanic Asian            <NA>
\end{verbatim}

\hypertarget{missing-values}{%
\subsection{Missing Values}\label{missing-values}}

We can also define missing values by using \texttt{na\ =}. For example, if we want to assign ``Some college or AA degree'' under the edu column as NA, we can use the following code:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Missing\_values }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_csv.csv"}\NormalTok{,}
                           \AttributeTok{na =} \StringTok{"Some college or AA degree"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 15 Columns: 5
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (3): gender, race, edu
## dbl (2): id, age
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Missing\_values}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 15 x 5
##       id gender   age race                          edu                         
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              NA                          
##  4 83720 Male      36 Non-Hispanic Black            <NA>                        
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ NA                          
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              NA                          
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              NA                          
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                NA                          
## 15 83731 Male      11 Non-Hispanic Asian            NA
\end{verbatim}

\hypertarget{do-question-10-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 10 OF THE QUIZ NOW}\label{do-question-10-of-the-quiz-now-1}}

\begin{quote}
Only characters can be assigned a value of NA, there is a different missing-value designation for numeric values. (True or False)
\end{quote}

\hypertarget{importing-other-file-types-into-r}{%
\section{4. IMPORTING OTHER FILE TYPES INTO R}\label{importing-other-file-types-into-r}}

While csv is the most common file type to import into R, we can also import other types of data file into R using different functions. In this section, you will be introduced to the very basics of how to import txt, xlsx, xpt, and sas files into R.

\hypertarget{text-file-txt}{%
\subsection{Text file (txt)}\label{text-file-txt}}

The simplest function that we can use to import a txt file is \texttt{read.table()}. This function belongs to the default Base R package, so we do not need to install or attach any packages before using it!

The first argument of this function is the file path. What do you think \texttt{header\ =\ TRUE} mean?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{read.table}\NormalTok{(}\StringTok{"data/demo\_txt.txt"}\NormalTok{, }\AttributeTok{header =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       id gender age
## 1  83717 Female  80
## 2  83718 Female  60
## 3  83719   Male   3
## 4  83720   Male  36
## 5  83721   Male  52
## 6  83722   Male   0
## 7  83723   Male  61
## 8  83724   Male  80
## 9  83725   Male   7
## 10 83726   Male  40
## 11 83727   Male  26
## 12 83728 Female   2
## 13 83729 Female  42
## 14 83730   Male   7
## 15 83731   Male  11
\end{verbatim}

\hypertarget{excel-file-xlsx}{%
\subsection{Excel file (xlsx)}\label{excel-file-xlsx}}

To import an xlsx file into R, we use \texttt{read\_excel()}. But before we can use this function, we need to install and attach the readxl package. Similarly to \texttt{read.table()}, this function requires a file path.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("readxl")}
\FunctionTok{library}\NormalTok{(readxl)}

\FunctionTok{read\_excel}\NormalTok{(}\StringTok{"data/demo\_xlsx.xlsx"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 15 x 5
##       id gender   age race                          edu                         
##    <dbl> <chr>  <dbl> <chr>                         <chr>                       
##  1 83717 Female    80 Mexican American              Less than 9th grade         
##  2 83718 Female    60 Non-Hispanic Black            High school graduate/GED or~
##  3 83719 Male       3 Mexican American              NA                          
##  4 83720 Male      36 Non-Hispanic Black            Some college or AA degree   
##  5 83721 Male      52 Non-Hispanic White            College graduate or above   
##  6 83722 Male       0 Other Race - Including Multi~ NA                          
##  7 83723 Male      61 Mexican American              9-11th grade (Includes 12th~
##  8 83724 Male      80 Non-Hispanic White            High school graduate/GED or~
##  9 83725 Male       7 Mexican American              NA                          
## 10 83726 Male      40 Mexican American              Less than 9th grade         
## 11 83727 Male      26 Other Hispanic                College graduate or above   
## 12 83728 Female     2 Mexican American              NA                          
## 13 83729 Female    42 Non-Hispanic Black            College graduate or above   
## 14 83730 Male       7 Other Hispanic                NA                          
## 15 83731 Male      11 Non-Hispanic Asian            NA
\end{verbatim}

\hypertarget{try-it-yourself-13}{%
\subsection{2.5 Try it yourself}\label{try-it-yourself-13}}

Import the \texttt{bpx.xlsx} into R using the \texttt{read\_excel()} function.

\hypertarget{xpt-file-extension}{%
\subsection{XPT File Extension}\label{xpt-file-extension}}

Another file type that you may need to import into R is xpt. To do this, we need the function \texttt{read.xport()} that belongs to the SASxport package.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("SASxport")}
\FunctionTok{library}\NormalTok{(SASxport)}

\FunctionTok{read.xport}\NormalTok{(}\StringTok{"data/demo\_xpt.xpt"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       ID GENDER                             RACE
## 1  83717 Female                 Mexican American
## 2  83718 Female               Non-Hispanic Black
## 3  83719   Male                 Mexican American
## 4  83720   Male               Non-Hispanic Black
## 5  83721   Male               Non-Hispanic White
## 6  83722   Male Other Race - Including Multi-Rac
## 7  83723   Male                 Mexican American
## 8  83724   Male               Non-Hispanic White
## 9  83725   Male                 Mexican American
## 10 83726   Male                 Mexican American
## 11 83727   Male                   Other Hispanic
## 12 83728 Female                 Mexican American
## 13 83729 Female               Non-Hispanic Black
## 14 83730   Male                   Other Hispanic
## 15 83731   Male Other Race - Including Multi-Rac
\end{verbatim}

\hypertarget{statistical-analysis-software-sas}{%
\subsection{Statistical Analysis Software (SAS)}\label{statistical-analysis-software-sas}}

We can use the function \texttt{read\_sas()} to import sas files into R. But before we do this, we need to install and attach the haven package.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("haven")}
\FunctionTok{library}\NormalTok{(}\StringTok{"haven"}\NormalTok{)}

\FunctionTok{read\_sas}\NormalTok{(}\StringTok{"data/demo\_sas.sas"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 15 x 3
##       id gender  race
##    <dbl>  <dbl> <dbl>
##  1 83717      2     1
##  2 83718      2     4
##  3 83719      1     1
##  4 83720      1     4
##  5 83721      1     3
##  6 83722      1     5
##  7 83723      1     1
##  8 83724      1     3
##  9 83725      1     1
## 10 83726      1     1
## 11 83727      1     2
## 12 83728      2     1
## 13 83729      2     4
## 14 83730      1     2
## 15 83731      1     5
\end{verbatim}

\hypertarget{exporting-the-data-frame-from-r}{%
\section{5. EXPORTING THE DATA FRAME FROM R}\label{exporting-the-data-frame-from-r}}

After changing and manipulating our data in R, we can also export it back into a csv file to share it. To do this, we can use the function \texttt{write\_csv()}. For example, let's say we want to export our ``Missing\_values'' data frame.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_csv}\NormalTok{(Missing\_values, }\StringTok{"data/Missing Values.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

We can also export it to an Excel file by using \texttt{write\_excel\_csv()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_excel\_csv}\NormalTok{(Missing\_values, }\StringTok{"data/Missing Values.xlsx"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Now if we check our working directory, there should be 2 new files, ``Missing Values.csv'' and ``Missing Values.xlsx''!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dir}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "_book"                                 
##  [2] "_bookdown.yml"                         
##  [3] "_bookdown_files"                       
##  [4] "_build.sh"                             
##  [5] "_deploy.sh"                            
##  [6] "_output.yml"                           
##  [7] "0-r-and-rstudio-set-up.Rmd"            
##  [8] "1-introduction-to-r.Rmd"               
##  [9] "2-importing-data-into-r-with-readr.Rmd"
## [10] "3-introduction-to-nhanes.Rmd"          
## [11] "4-data-analysis-with-dplyr.Rmd"        
## [12] "5-data-visualization-with-ggplot.Rmd"  
## [13] "6-date-time-data-with-lubridate.Rmd"   
## [14] "7-data-summary-with-tableone.Rmd"      
## [15] "8-Exercise-Solutions.Rmd"              
## [16] "9-references.Rmd"                      
## [17] "book.bib"                              
## [18] "data"                                  
## [19] "DESCRIPTION"                           
## [20] "Dockerfile"                            
## [21] "docs"                                  
## [22] "header.html"                           
## [23] "images"                                
## [24] "index.Rmd"                             
## [25] "intro2R.Rmd"                           
## [26] "intro2R_cache"                         
## [27] "intro2R_files"                         
## [28] "LICENSE"                               
## [29] "now.json"                              
## [30] "packages.bib"                          
## [31] "preamble.tex"                          
## [32] "R.Rproj"                               
## [33] "README.md"                             
## [34] "style.css"                             
## [35] "toc.css"
\end{verbatim}

Congratulations! We have now succeeded in exporting a dataset from R to an external file! This will make our work much easier to share and access!

\hypertarget{summary-and-takeways-1}{%
\section{6. SUMMARY AND TAKEWAYS}\label{summary-and-takeways-1}}

In this tutorial, we have learned how to import csv files from our hard drive into R using \texttt{read\_csv()}. This is an important first step in data analysis or manipulation since we need to be able to have the data in R in order to process it!

\hypertarget{introduction-to-nhanes}{%
\chapter{Introduction to NHANES}\label{introduction-to-nhanes}}

\hypertarget{instructions-3}{%
\section{INSTRUCTIONS}\label{instructions-3}}

This tutorial is aiming to provide an introduction to NHANES dataset and a guide on how to access the NHANES. It will guide you to retrieve the dataset in two days: CDC website and nhanesA package. At the end of this tutorial, it will cover some basic functions in the nhanesA package.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/zhMbsduL8xYjnmXg6}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives-3}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives-3}}

\begin{itemize}
\item
  Be familiar with the survey data in NHANES dataset
\item
  Be able to import NHANES dataset from CDC website
\item
  Be able to set up the nhanesA package and import NHANES dataset from the nhanesA package
\item
  Be familiar with the basic functions in the nhanesA package
\item
  Be able to understand the difference between NHANES dataset and nhanesA package
\end{itemize}

\hypertarget{introduction-to-nhanes-1}{%
\section{1. Introduction to NHANES}\label{introduction-to-nhanes-1}}

The National Health and Nutrition Examination Survey (NHANES) is a program with a series of studies aimed at determining the health and nutritional status of Americans, including adults and children. The NHANES program started in the early 1960s and was transformed into a countinuous program in 1999.

Started in the early 1960s, the NHANES programme has consisted of a seriess of surveys concentrating on various population groups or health themes. The survey was transformed into a continuous programme in 1999, with a shifting focus on a variety of health and nutrition measurements. For continuous NHANES,the survey is conducted in two-year cycles, i.e, 1999-2000,2001-2002,etc.

There are 5 types of continues NHANES survey data available to the public:

\begin{itemize}
\item
  Demographics Data
\item
  Dietary Data
\item
  Examination Data
\item
  Laboratory Data
\item
  Questionnaire Data
\end{itemize}

We will focus on the continuou NHANES dataset in this series of tutorials. On this \href{https://wwwn.cdc.gov/nchs/nhanes/}{CDC website}, you will see all the continous NHANES ordered by year.

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/8uGOUmc.png}
\caption{image}
\end{figure}

We will use NHANES 2013-2014 just for demostration in this tutorial. If you click on NHANES 2013-2014, you will be directed to the \href{https://wwwn.cdc.gov/nchs/nhanes/continuousnhanes/default.aspx?BeginYear=2013}{page} where you can access the data collected between 2013 and 2014:

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/I94dBUa.png}
\caption{image}
\end{figure}

We will introduce how to access the data in the following section.

\textbf{DO QUESTION 1 OF THE QUIZ NOW}
\textgreater{} How many categories (available to public) are there in NHANES dataset?

\hypertarget{importing-nhanes-dataset-from-website}{%
\section{2. Importing NHANES dataset from website}\label{importing-nhanes-dataset-from-website}}

Now we will learn how to download the NHANES dataset from CDC website and import it to R. In the last section, we're on this \href{https://wwwn.cdc.gov/nchs/nhanes/continuousnhanes/default.aspx?BeginYear=2013}{page} and we'll continue from there.

For example, we want to use the Demographics Data for further analysis. The first step is to download the dataset - click on ``Demographics Data'':

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/wUReKXp.png}
\caption{image}
\end{figure}

Then, you will see the following page:

\begin{figure}
\centering
\includegraphics{https://i.imgur.com/MhlrkEn.png}
\caption{image}
\end{figure}

To download the dataset, click on \emph{DEMO\_H Data {[}XPT - 3.7 MB{]}} under the \emph{Data File}.

To find the meanings of the variables, click on \emph{NHANES 2013-2014 Demographics Variable List}.

Last tutorial, we learned how to import \texttt{.csv} file into R. However, the file we downloaded from CDC website is not a \texttt{.csv} file - it is a \texttt{.xpt} file. Instead of using \texttt{read\_csv()}, we need to use \texttt{read.xport()} function housed in \texttt{SASxport} package.

First, we install (if needed) and load the\texttt{SASxport} package:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("SASxport")}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(SASxport)}
\end{Highlighting}
\end{Shaded}

Then, we are ready to load the datatset into R:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo }\OtherTok{\textless{}{-}} \FunctionTok{read.xport}\NormalTok{(}\StringTok{"data/DEMO\_H.XPT"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

We can use the \texttt{head()} function to quickly browse the dataset:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo,}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3 RIDEXMON
## 1 73557        8        2        1       69       NA        4        4        1
## 2 73558        8        2        1       54       NA        3        3        1
## 3 73559        8        2        1       72       NA        3        3        2
## 4 73560        8        2        1        9       NA        3        3        1
## 5 73561        8        2        2       73       NA        3        3        1
##   RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3 DMDEDUC2
## 1       NA        1       1        1        1       NA       NA        3
## 2       NA        2      NA        1        1       NA       NA        3
## 3       NA        1       1        1        1       NA       NA        4
## 4      119       NA      NA        1        1       NA        3       NA
## 5       NA        2      NA        1        1       NA       NA        5
##   DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG
## 1        4       NA       1        2        2       1        2        2       1
## 2        1       NA       1        2        2       1        2        2       1
## 3        1       NA       1        2        2       1        2        2       1
## 4       NA       NA       1        1        2       1        2        2       1
## 5        1       NA       1        2        2       1        2        2       1
##   MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE
## 1        2        2        1        3        3        0        0        2
## 2        2        2        1        4        4        0        2        0
## 3        2        2       NA        2        2        0        0        2
## 4        2        2        1        4        4        0        2        0
## 5        2        2       NA        2        2        0        0        2
##   DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR
## 1        1       69        1        3        4       NA 13281.24 13481.04
## 2        1       54        1        3        1        1 23682.06 24471.77
## 3        1       72        1        4        1        3 57214.80 57193.29
## 4        1       33        1        3        1        4 55201.18 55766.51
## 5        1       78        1        5        1        5 63709.67 65541.87
##   SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 1       1      112        4        4     0.84
## 2       1      108        7        7     1.78
## 3       1      109       10       10     4.51
## 4       2      109        9        9     2.52
## 5       2      116       15       15     5.00
\end{verbatim}

Now that we've successfully imported the dataset!

\hypertarget{functions-debunked-6}{%
\subsubsection{Functions debunked}\label{functions-debunked-6}}

\href{https://www.rdocumentation.org/packages/SASxport/versions/1.7.0/topics/read.xport}{\textbf{read.xport()}} is the function we use to read and load SAS XPORT file in R - it is housed in the SASxport package. The arguments are as follows:
read.xport(
\textgreater{} FILE PATH

)

\textbf{For example:} \texttt{read.xport("../input/demo-h/DEMO\_H.XPT")}

\textbf{DO QUESTION 2 OF THE QUIZ NOW}
\textgreater{} Which package is read.xport() in?

\hypertarget{importing-nhanes-dataset-from-r-package-nhanesa}{%
\section{3. Importing NHANES dataset from R package: nhanesA}\label{importing-nhanes-dataset-from-r-package-nhanesa}}

Another way to access the NHANES dataset is to import it from R packages. One popular R package developed for retrieving NHANES dataset is the \href{https://www.rdocumentation.org/packages/nhanesA/versions/0.6.5.3}{\textbf{nhanesA}} package.

As introduced before, we need to first install the \texttt{nhanesA} package from CRAN:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("nhanesA")}
\end{Highlighting}
\end{Shaded}

Second, we need to load the \texttt{nhanesA} package:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(nhanesA)}
\end{Highlighting}
\end{Shaded}

Recall that we have 5 data categories available to the public in the NHANES dataset. How do we access the data from nhanesA package?

There is a useful function called - \texttt{nhanesTables()} - list all the data files in each data category in each survey cycle as a table. For example, if we want to see all the Demographics Data in survey cycle 2013-2014:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nhanesTables}\NormalTok{(}\StringTok{\textquotesingle{}DEMO\textquotesingle{}}\NormalTok{, }\DecValTok{2013}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: `xml_nodes()` was deprecated in rvest 1.0.0.
## Please use `html_elements()` instead.
\end{verbatim}

\begin{verbatim}
##   Data.File.Name                    Data.File.Description
## 1         DEMO_H Demographic Variables and Sample Weights
\end{verbatim}

To see all the Examination Data in survey cycle 2015-2016:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nhanesTables}\NormalTok{(}\StringTok{\textquotesingle{}EXAM\textquotesingle{}}\NormalTok{, }\DecValTok{2015}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    Data.File.Name                         Data.File.Description
## 1           BPX_I                                Blood Pressure
## 2           BMX_I                                 Body Measures
## 3        OHXDEN_I                       Oral Health - Dentition
## 4        OHXREF_I          Oral Health - Recommendation of Care
## 5        FLXCLN_I                          Fluorosis - Clinical
## 6           AUX_I                                    Audiometry
## 7           DXX_I Dual-Energy X-ray Absorptiometry - Whole Body
## 8         AUXAR_I                  Audiometry - Acoustic Reflex
## 9        AUXTYM_I                     Audiometry - Tympanometry
## 10       AUXWBR_I             Audiometry – Wideband Reflectance
\end{verbatim}

To see all the Dietary Data in survey cycle 2014-2015:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nhanesTables}\NormalTok{(}\StringTok{\textquotesingle{}DIETARY\textquotesingle{}}\NormalTok{, }\DecValTok{2014}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    Data.File.Name
## 1        DR1TOT_H
## 2        DR2TOT_H
## 3        DR1IFF_H
## 4        DR2IFF_H
## 5        DRXFCD_H
## 6        DS1IDS_H
## 7        DSQIDS_H
## 8        DS2IDS_H
## 9        DS1TOT_H
## 10       DS2TOT_H
## 11       DSQTOT_H
##                                                          Data.File.Description
## 1                        Dietary Interview - Total Nutrient Intakes, First Day
## 2                       Dietary Interview - Total Nutrient Intakes, Second Day
## 3                              Dietary Interview - Individual Foods, First Day
## 4                             Dietary Interview - Individual Foods, Second Day
## 5                        Dietary Interview Technical Support File - Food Codes
## 6   Dietary Supplement Use 24-Hour - Individual Dietary Supplements, First Day
## 7               Dietary Supplement Use 30-Day - Individual Dietary Supplements
## 8  Dietary Supplement Use 24-Hour - Individual Dietary Supplements, Second Day
## 9        Dietary Supplement Use 24-Hour - Total Dietary Supplements, First Day
## 10      Dietary Supplement Use 24-Hour - Total Dietary Supplements, Second Day
## 11                   Dietary Supplement Use 30-Day - Total Dietary Supplements
\end{verbatim}

\hypertarget{functions-debunked-7}{%
\subsubsection{Functions debunked}\label{functions-debunked-7}}

\href{https://www.rdocumentation.org/packages/nhanesA/versions/0.6.5.3/topics/nhanesTables}{\textbf{nhanesTables()}} is the function we use to display the data in a table format - it is housed in the nhanesA package. The arguments are as follows:

nhanesTables(
\textgreater{} `DATA CATEGORY',

\begin{quote}
YEAR
\end{quote}

)

\textbf{Note}:Abbreviation for the data category in the first argument is listed below:

\begin{quote}
Demographics Data = DEMO
\end{quote}

\begin{quote}
Dietary Data = DIETARY
\end{quote}

\begin{quote}
Examination Data = EXAM
\end{quote}

\begin{quote}
Labortary Data = LAB
\end{quote}

\begin{quote}
Questionnaire Data = Q
\end{quote}

\textbf{For example:} \texttt{nhanesTables(\textquotesingle{}DEMO\textquotesingle{},\ 2013)}

For demostration purpose, we will focus on Demographics Data in survey cycle 2013-2014 in the rest of the tutorial.

Now that we need to access and import the dataset from \texttt{nhanesA} package. The \texttt{nhanes()} function (exactly the same as the package name) is used for importing NHANES datasets:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo }\OtherTok{\textless{}{-}} \FunctionTok{nhanes}\NormalTok{(}\StringTok{\textquotesingle{}DEMO\_H\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing SAS dataset DEMO_H     ..
\end{verbatim}

Browse the top 5 rows in the demo dataframe:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo,}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3 RIDEXMON
## 1 73557        8        2        1       69       NA        4        4        1
## 2 73558        8        2        1       54       NA        3        3        1
## 3 73559        8        2        1       72       NA        3        3        2
## 4 73560        8        2        1        9       NA        3        3        1
## 5 73561        8        2        2       73       NA        3        3        1
##   RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3 DMDEDUC2
## 1       NA        1       1        1        1       NA       NA        3
## 2       NA        2      NA        1        1       NA       NA        3
## 3       NA        1       1        1        1       NA       NA        4
## 4      119       NA      NA        1        1       NA        3       NA
## 5       NA        2      NA        1        1       NA       NA        5
##   DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG
## 1        4       NA       1        2        2       1        2        2       1
## 2        1       NA       1        2        2       1        2        2       1
## 3        1       NA       1        2        2       1        2        2       1
## 4       NA       NA       1        1        2       1        2        2       1
## 5        1       NA       1        2        2       1        2        2       1
##   MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE
## 1        2        2        1        3        3        0        0        2
## 2        2        2        1        4        4        0        2        0
## 3        2        2       NA        2        2        0        0        2
## 4        2        2        1        4        4        0        2        0
## 5        2        2       NA        2        2        0        0        2
##   DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR
## 1        1       69        1        3        4       NA 13281.24 13481.04
## 2        1       54        1        3        1        1 23682.06 24471.77
## 3        1       72        1        4        1        3 57214.80 57193.29
## 4        1       33        1        3        1        4 55201.18 55766.51
## 5        1       78        1        5        1        5 63709.67 65541.87
##   SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 1       1      112        4        4     0.84
## 2       1      108        7        7     1.78
## 3       1      109       10       10     4.51
## 4       2      109        9        9     2.52
## 5       2      116       15       15     5.00
\end{verbatim}

You may get confused why we put \texttt{DEMO\_H} instead of \texttt{DEMO} in the argument - recall that \emph{DEMO} is the abbreviation for \emph{Demographcis data}. But we also want to tell the function which survey cycle we are particularly interested in.

Go back to the output from \emph{nhanesTables(`DEMO', 2013)} above, now we have the data file name - \texttt{DEMO\_H} and \texttt{H} specifies the survey cycle 2013-2014.

As you are getting familiar with the dataset, you may notice that different letter represents different survey cycle year. For example, \texttt{H} represents survey cycle 2013-2014 and \texttt{I} represents survey cycle 2015-2016.

\hypertarget{functions-debunked-8}{%
\subsubsection{Functions debunked}\label{functions-debunked-8}}

\href{https://www.rdocumentation.org/packages/nhanesA/versions/0.6.5.3/topics/nhanes}{\textbf{nhanes()}} is the function we use to retrieve the dataset and return a dataframe - it is housed in the nhanesA package. The arguments are as follows:

nhanesTranslate(
\textgreater{} NAME OF TABLE

)

\textbf{For example:} \texttt{nhanes(\textquotesingle{}DEMO\_H\textquotesingle{})}

If you run demo alone, you will see that \emph{RIAGENDR} (gender) is coded as 1 and 2. For ease of future use, we want to translate this 1 and 2 into male and female.

To translate the categorical variables in NHANES, use nhanesTranslate():

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo\_translate }\OtherTok{\textless{}{-}} \FunctionTok{nhanesTranslate}\NormalTok{(}\StringTok{\textquotesingle{}DEMO\_H\textquotesingle{}}\NormalTok{,}
                                  \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}SEQN\textquotesingle{}}\NormalTok{, }\CommentTok{\# Respondent sequence number}
                                    \StringTok{\textquotesingle{}RIAGENDR\textquotesingle{}}\NormalTok{), }
                                 \AttributeTok{data =}\NormalTok{ demo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in FUN(X[[i]], ...): No translation table is available for SEQN
\end{verbatim}

\begin{verbatim}
## Translated columns: RIAGENDR
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo\_translate,}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3 RIDEXMON
## 1 73557        8        2     Male       69       NA        4        4        1
## 2 73558        8        2     Male       54       NA        3        3        1
## 3 73559        8        2     Male       72       NA        3        3        2
## 4 73560        8        2     Male        9       NA        3        3        1
## 5 73561        8        2   Female       73       NA        3        3        1
##   RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3 DMDEDUC2
## 1       NA        1       1        1        1       NA       NA        3
## 2       NA        2      NA        1        1       NA       NA        3
## 3       NA        1       1        1        1       NA       NA        4
## 4      119       NA      NA        1        1       NA        3       NA
## 5       NA        2      NA        1        1       NA       NA        5
##   DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG
## 1        4       NA       1        2        2       1        2        2       1
## 2        1       NA       1        2        2       1        2        2       1
## 3        1       NA       1        2        2       1        2        2       1
## 4       NA       NA       1        1        2       1        2        2       1
## 5        1       NA       1        2        2       1        2        2       1
##   MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE
## 1        2        2        1        3        3        0        0        2
## 2        2        2        1        4        4        0        2        0
## 3        2        2       NA        2        2        0        0        2
## 4        2        2        1        4        4        0        2        0
## 5        2        2       NA        2        2        0        0        2
##   DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR
## 1        1       69        1        3        4       NA 13281.24 13481.04
## 2        1       54        1        3        1        1 23682.06 24471.77
## 3        1       72        1        4        1        3 57214.80 57193.29
## 4        1       33        1        3        1        4 55201.18 55766.51
## 5        1       78        1        5        1        5 63709.67 65541.87
##   SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 1       1      112        4        4     0.84
## 2       1      108        7        7     1.78
## 3       1      109       10       10     4.51
## 4       2      109        9        9     2.52
## 5       2      116       15       15     5.00
\end{verbatim}

\hypertarget{functions-debunked-9}{%
\subsubsection{Functions debunked}\label{functions-debunked-9}}

\href{https://www.rdocumentation.org/packages/nhanesA/versions/0.6.5.3/topics/nhanesTranslate}{\textbf{nhanesTranslate()}} is the function we use to translate variables in a dataset - it is housed in the nhanesA package. The arguments are as follows:

nhanesTranslate(
\textgreater{} `NAME OF DATASET',

\begin{quote}
COLUMNS YOU WANT TO BE TRANSLATED, (can be written as a vector)
\end{quote}

\begin{quote}
data = SOURCE DATAFRAME
\end{quote}

)

\textbf{For example:} \texttt{nhanesTranslate(\textquotesingle{}DEMO\_H\textquotesingle{},\ RIAGENDR,\ data\ =\ demo)}

\hypertarget{try-it-yourself-3.1}{%
\subsubsection{Try it yourself 3.1}\label{try-it-yourself-3.1}}

Find all the Examination Data in survey cycle 2013-2014

\hypertarget{try-it-yourself-3.2}{%
\subsubsection{Try it yourself 3.2}\label{try-it-yourself-3.2}}

Import the blood pressure dataset in the Examination Data in survey cycle 2013-2014

\hypertarget{try-it-yourself-3.3}{%
\subsubsection{Try it yourself 3.3}\label{try-it-yourself-3.3}}

Translate the following variables in the BPX dataset

BPXPULS - Pulse regular or irregular?

BPAARM - Arm selected

\textbf{DO QUESTION 3 OF THE QUIZ NOW}

\begin{quote}
Fill in the blank to answer `Try it yourself 3.1':
\end{quote}

\begin{quote}
nhanesTables(\texttt{\_\_\_},\texttt{\_\_\_})
\end{quote}

\textbf{DO QUESTION 4 OF THE QUIZ NOW}
\textgreater{} Fill in the blank to answer `Try it yourself 3.2':

\begin{quote}
bpx \textless- nhanes(\texttt{\_\_\_})
\end{quote}

\textbf{DO QUESTION 5 OF THE QUIZ NOW}

\begin{quote}
Fill in the blank to answer `Try it yourself 3.3':
\end{quote}

\begin{quote}
bpx\_translate \textless- nhanesTranslate(\texttt{\_\_\_},
\end{quote}

\begin{quote}
\begin{verbatim}
               c('BPXPULS', # Pulse regular or irregular?
\end{verbatim}
\end{quote}

\begin{quote}
\begin{verbatim}
               'BPAARM'), # Arm selected
\end{verbatim}
\end{quote}

\begin{quote}
\begin{verbatim}
               data = `___`)
\end{verbatim}
\end{quote}

\hypertarget{other-packages-in-r}{%
\subsection{Other packages in R}\label{other-packages-in-r}}

There are other packages that are developed as a tool to retrieve and analyze the NHANES dataset, such as \texttt{RNHANES} package. You are encouraged to explore packages beside \texttt{nhanesA} and play with the data. However, we will be using \texttt{nhanesA} for this series of tutorials, so it is important that you're familiar with it before we move on.

\hypertarget{alternative-ways-to-download-nhanes}{%
\subsection{Alternative ways to download NHANES}\label{alternative-ways-to-download-nhanes}}

If you are wondering how the \texttt{nhanes()} function works, here is a glimpse at what it looks like backstage. First of all, we can create our own function that does the same action as \texttt{nhanes()}. The function we are creating together is not exactly how the \texttt{nhanes()} function works, but the principles are similar. \textbf{The general gist is that we need a function that can download the .XPT file on the NHANES website and then import it into R as a data frame.}

The first step that we need to create a new function is to have a function name and the function\ldots{} \texttt{function()}! Let's name our new function \texttt{downloadnhanes()}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{downloadnhanes }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{()\{}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Now, our function needs arguments. Let's give it 2 arguments: the years of the dataset (ex{]} 2013-2014 or 2014-2015) and the dataset name (ex{]} DEMO\_H or BPX\_H).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{downloadnhanes }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(years, prefix\_suffix)\{}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

For the purpose of creating this function step-by-step, let's say that our years is 2013-2014 and our prefix\_suffix is DEMO\_H.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{years }\OtherTok{\textless{}{-}} \StringTok{\textquotesingle{}2013{-}2014\textquotesingle{}}
\NormalTok{prefix\_suffix }\OtherTok{\textless{}{-}} \StringTok{\textquotesingle{}DEMO\_H\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

Next, our function needs to be able to download the .XPT file straight from the NHANES website. What this means is we need our function to
1. Know where on the web our .XPT file is and
2. Download that file

To do this, we need to create a variable that contains the .XPT's URL. If we look at the URL of an NHANES dataset's .XPT file, it should look something along this line: \textbf{\url{https://wwwn.cdc.gov/nchs/nhanes/2013-2014/DEMO_H.XPT}}. To lead R to this specific website first before we download the file, we need to use the \texttt{paste()} function like so. Note that ``years'' and ``prefix\_suffix'' are written as variables because they are two arguments that we would need to define when we use this new function.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{url }\OtherTok{\textless{}{-}} \FunctionTok{paste}\NormalTok{(}\StringTok{\textquotesingle{}https://wwwn.cdc.gov/nchs/nhanes/\textquotesingle{}}\NormalTok{, years,}\StringTok{\textquotesingle{}/\textquotesingle{}}\NormalTok{, prefix\_suffix, }\StringTok{\textquotesingle{}.XPT\textquotesingle{}}\NormalTok{, }\AttributeTok{sep =} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{function-debunked}{%
\subsection{Function debunked}\label{function-debunked}}

\textbf{\href{https://www.journaldev.com/40396/paste-in-r}{paste()}} is a function we use to combine multiple elements from multiple vectors into one single element. In this case, we are combining hard-wired characters and open variables together into one single url. Some of the main arguments are as follows:

paste(

\begin{quote}
\textbf{`TEXT STRING THAT WE WANT TO INCLUDE (note that quotation marks)'},
\end{quote}

\begin{quote}
\textbf{A DEFINED VARIABLE},
\end{quote}

\begin{quote}
sep = \textbf{'\,'} OR \textbf{`/'} OR **'\_`** OR \textbf{'\&'} etc (this argument tells R how you want each element to be separated, in our case, we don't want any separator, that's why there is nothing between the'' quotation marks)
\end{quote}

)

\textbf{For example:} \texttt{paste(\textquotesingle{}https://wwwn.cdc.gov/nchs/nhanes/\textquotesingle{},\ years,\textquotesingle{}/\textquotesingle{},\ prefix\_suffix,\ \textquotesingle{}.XPT\textquotesingle{},\ sep\ =\ \textquotesingle{}\textquotesingle{})}

After we have our URL, we are ready to download the file! To do this, we use \texttt{download.file()} like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{download.file}\NormalTok{(url, tf }\OtherTok{\textless{}{-}} \FunctionTok{tempfile}\NormalTok{(), }\AttributeTok{mode =} \StringTok{"wb"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

There are a number of things that you can do with \texttt{download.file()}. We will not go over this function in detail, but \href{https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/download.file}{here} is a helpful website that explains the function really well.

In the function above, we first need the URL of the file that we are downloading - in our case it is just \texttt{url} because we already defined it in the previous \texttt{paste()} function. Next, we want a place to store our downloaded file. In this case, we want it to be \texttt{tf\ \textless{}-\ tempfile()} because we want to generate a temporary storage space for our downloaded file (you can find more about \texttt{tempfile()} \href{https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/tempfile}{here}). After that, we need to use \texttt{mode\ =\ "wb"} because our .XPT file is binary. \texttt{wb} is also the most common mode type to use when we use \texttt{download.file()}.

Next, we want to import the temporary file \texttt{tf} that we create into R. To do this, we need to use \texttt{read.xport()}. We have already been introduced to the SASxport package, but an alternative to SASxport is foreign. This is another package that deals with importing different data types into R, not just .XPT.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{outdf }\OtherTok{\textless{}{-}}\NormalTok{ foreign}\SpecialCharTok{::}\FunctionTok{read.xport}\NormalTok{(tf)}
\end{Highlighting}
\end{Shaded}

Finally, we want to make sure that the file we are importing is a data frame, so we need to use \texttt{data.frame()} for this.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{outdf }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(outdf)}
\end{Highlighting}
\end{Shaded}

Now if we combine everything that we have talked about earlier, our function should look like this:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{downloadnhanes }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(prefix\_suffix, years)\{}
\NormalTok{    url }\OtherTok{\textless{}{-}} \FunctionTok{paste}\NormalTok{(}\StringTok{\textquotesingle{}https://wwwn.cdc.gov/nchs/nhanes/\textquotesingle{}}\NormalTok{, years,}\StringTok{\textquotesingle{}/\textquotesingle{}}\NormalTok{, prefix\_suffix, }\StringTok{\textquotesingle{}.XPT\textquotesingle{}}\NormalTok{, }\AttributeTok{sep =} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{)}
    \FunctionTok{download.file}\NormalTok{(url, tf }\OtherTok{\textless{}{-}} \FunctionTok{tempfile}\NormalTok{(), }\AttributeTok{mode =} \StringTok{"wb"}\NormalTok{)}
\NormalTok{    outdf }\OtherTok{\textless{}{-}}\NormalTok{ foreign}\SpecialCharTok{::}\FunctionTok{read.xport}\NormalTok{(tf)}
\NormalTok{    outdf }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(outdf)}
  \FunctionTok{return}\NormalTok{(outdf)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Let's see if it works!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
    \FunctionTok{downloadnhanes}\NormalTok{(}\StringTok{\textquotesingle{}DEMO\_H\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}2013{-}2014\textquotesingle{}}\NormalTok{)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3 RIDEXMON
## 1 73557        8        2        1       69       NA        4        4        1
## 2 73558        8        2        1       54       NA        3        3        1
## 3 73559        8        2        1       72       NA        3        3        2
## 4 73560        8        2        1        9       NA        3        3        1
## 5 73561        8        2        2       73       NA        3        3        1
## 6 73562        8        2        1       56       NA        1        1        1
##   RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3 DMDEDUC2
## 1       NA        1       1        1        1       NA       NA        3
## 2       NA        2      NA        1        1       NA       NA        3
## 3       NA        1       1        1        1       NA       NA        4
## 4      119       NA      NA        1        1       NA        3       NA
## 5       NA        2      NA        1        1       NA       NA        5
## 6       NA        1       2        1        1       NA       NA        4
##   DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG
## 1        4       NA       1        2        2       1        2        2       1
## 2        1       NA       1        2        2       1        2        2       1
## 3        1       NA       1        2        2       1        2        2       1
## 4       NA       NA       1        1        2       1        2        2       1
## 5        1       NA       1        2        2       1        2        2       1
## 6        3       NA       1        2        2       1        2        2       1
##   MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE
## 1        2        2        1        3        3        0        0        2
## 2        2        2        1        4        4        0        2        0
## 3        2        2       NA        2        2        0        0        2
## 4        2        2        1        4        4        0        2        0
## 5        2        2       NA        2        2        0        0        2
## 6        2        2        1        1        1        0        0        0
##   DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR
## 1        1       69        1        3        4       NA 13281.24 13481.04
## 2        1       54        1        3        1        1 23682.06 24471.77
## 3        1       72        1        4        1        3 57214.80 57193.29
## 4        1       33        1        3        1        4 55201.18 55766.51
## 5        1       78        1        5        1        5 63709.67 65541.87
## 6        1       56        1        4        3       NA 24978.14 25344.99
##   SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 1       1      112        4        4     0.84
## 2       1      108        7        7     1.78
## 3       1      109       10       10     4.51
## 4       2      109        9        9     2.52
## 5       2      116       15       15     5.00
## 6       1      111        9        9     4.79
\end{verbatim}

It works! But does it match with the output of our usual \texttt{nhanes()} function? Let's test it out.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
    \FunctionTok{nhanes}\NormalTok{(}\StringTok{\textquotesingle{}DEMO\_H\textquotesingle{}}\NormalTok{)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing SAS dataset DEMO_H     ..
\end{verbatim}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3 RIDEXMON
## 1 73557        8        2        1       69       NA        4        4        1
## 2 73558        8        2        1       54       NA        3        3        1
## 3 73559        8        2        1       72       NA        3        3        2
## 4 73560        8        2        1        9       NA        3        3        1
## 5 73561        8        2        2       73       NA        3        3        1
## 6 73562        8        2        1       56       NA        1        1        1
##   RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3 DMDEDUC2
## 1       NA        1       1        1        1       NA       NA        3
## 2       NA        2      NA        1        1       NA       NA        3
## 3       NA        1       1        1        1       NA       NA        4
## 4      119       NA      NA        1        1       NA        3       NA
## 5       NA        2      NA        1        1       NA       NA        5
## 6       NA        1       2        1        1       NA       NA        4
##   DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG
## 1        4       NA       1        2        2       1        2        2       1
## 2        1       NA       1        2        2       1        2        2       1
## 3        1       NA       1        2        2       1        2        2       1
## 4       NA       NA       1        1        2       1        2        2       1
## 5        1       NA       1        2        2       1        2        2       1
## 6        3       NA       1        2        2       1        2        2       1
##   MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE
## 1        2        2        1        3        3        0        0        2
## 2        2        2        1        4        4        0        2        0
## 3        2        2       NA        2        2        0        0        2
## 4        2        2        1        4        4        0        2        0
## 5        2        2       NA        2        2        0        0        2
## 6        2        2        1        1        1        0        0        0
##   DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR
## 1        1       69        1        3        4       NA 13281.24 13481.04
## 2        1       54        1        3        1        1 23682.06 24471.77
## 3        1       72        1        4        1        3 57214.80 57193.29
## 4        1       33        1        3        1        4 55201.18 55766.51
## 5        1       78        1        5        1        5 63709.67 65541.87
## 6        1       56        1        4        3       NA 24978.14 25344.99
##   SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 1       1      112        4        4     0.84
## 2       1      108        7        7     1.78
## 3       1      109       10       10     4.51
## 4       2      109        9        9     2.52
## 5       2      116       15       15     5.00
## 6       1      111        9        9     4.79
\end{verbatim}

The two imported datasets are identical! Fantastic, our new function works! And that's just a sneak peak of what goes behind our \texttt{nhanes()} function.

The function that we went over in this tutorial is originally written by **\_\_\_\textbf{. For simplification and educational purposes, the function has been simplified. You can find the original function here (}need to insert link to document**).

\hypertarget{takeaways-1}{%
\section{TAKEAWAYS}\label{takeaways-1}}

By the end of this tutorial, you should be able to know what is NHANES and how to retrieve the NHANES dataset. You should also be familiar with the functions housed in nhanesA mentioned in this tutorial.

For the next two tutorials, we will introduce two new packages - dplyr for data analysis and ggplot for data visulization. We will continusely use NHANES dataset for illustration and you'll likely be using NHANES dataset for your own research in the future. Make sure you're familiar with NHANES dataset before we move on.

\hypertarget{data-analysis-with-dplyr}{%
\chapter{Data Analysis with dplyr}\label{data-analysis-with-dplyr}}

\hypertarget{instructions-4}{%
\section{INSTRUCTIONS}\label{instructions-4}}

This tutorial is aiming to introduce you to how to manipulate data and transfer the raw data into ready-to-analysis form in R. It will guide you to learn and practice the basic and useful functions in the dplyr package. In this tutorial, follow the step-by-step instruction as well as the examples which demonstrating how the functions work.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/17WnX6paHx5U14jx6}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives-4}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives-4}}

\begin{itemize}
\tightlist
\item
  Be able to import nhanesA and dplyr package. Be able to understand dataframe.
\item
  Be able to use rename() and select() to rename and select variables (columns) in a dataframe.
\item
  Be able to use filter() to subset a dataframe based on conditions.
\item
  Be able to use arrange() to re-order the rows in a dataframe.
\item
  Be able to use mutate() and transmute() to add new variables that are computed from existing variables in a dataframe.
\item
  Be able to use summarize() to get summary statistics from a dataframe; Be able to perform grouping with summarize(), filter(), and mutate().
\item
  Be able to use pipe to re-write mutilpe operations in a more readable way.
\item
  Be able to check missing values existence and deal with missing values while using the above functions
\end{itemize}

\hypertarget{set-up-1}{%
\section{1. Set up}\label{set-up-1}}

\hypertarget{install-and-load-packages}{%
\subsection{Install and load packages}\label{install-and-load-packages}}

First, we need to install and load the dplyr package as well as bring in our National Health and Nutrition Examination Survey (NHANES) dataset. This particular tutorial uses data from 2013-2014.

For more information about NHANES, you can visit this website. It is recommended that you explore this website to familiar yourself with the data that we will be using throughout this tutorial.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("dplyr")}
\FunctionTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'dplyr'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:stats':
## 
##     filter, lag
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("nhanesA")}
\FunctionTok{library}\NormalTok{(nhanesA)}
\end{Highlighting}
\end{Shaded}

\hypertarget{set-working-directory}{%
\subsection{Set working directory}\label{set-working-directory}}

We want to set the working directory

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# setwd(\textquotesingle{}/kaggle/working\textquotesingle{})}
\end{Highlighting}
\end{Shaded}

\hypertarget{import-dataset}{%
\subsection{Import dataset}\label{import-dataset}}

This particular tutorial uses the Demographics dataset and Blood pressure dataset from NHANES dataset (2013-2014).

The Demographics dataset contains a huge records of demographics information such as gender, race, annual income for each participant. The Blood pressure dataset is in the Examination data and contains a hugh records of measurements that related to blood pressure measurement.

More information on the imported dataset can be found here:

\begin{itemize}
\tightlist
\item
  \href{https://wwwn.cdc.gov/nchs/nhanes/search/datapage.aspx?Component=Demographics\&CycleBeginYear=2013}{Demographics data}
\item
  \href{https://wwwn.cdc.gov/nchs/nhanes/search/datapage.aspx?Component=Examination\&CycleBeginYear=2013}{Examination data}
\item
  \href{https://wwwn.cdc.gov/Nchs/Nhanes/Search/variablelist.aspx?Component=Demographics\&CycleBeginYear=2013}{Complete variable dictionary}
\item
  \href{https://wwwn.cdc.gov/Nchs/Nhanes/2013-2014/DEMO_H.htm\#Codebook}{DEMO\_H Code book} (Demographic Variables)
\item
  \href{https://wwwn.cdc.gov/Nchs/Nhanes/2013-2014/BPX_H.htm\#Codebook}{BPX\_H Code book} (Blood Pressure)
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo }\OtherTok{\textless{}{-}} \FunctionTok{nhanes}\NormalTok{(}\StringTok{\textquotesingle{}DEMO\_H\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing SAS dataset DEMO_H     ..
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{bpx }\OtherTok{\textless{}{-}} \FunctionTok{nhanes}\NormalTok{(}\StringTok{\textquotesingle{}BPX\_H\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing SAS dataset BPX_H      ..
\end{verbatim}

\hypertarget{functions-debunked-10}{%
\subsubsection{Functions debunked}\label{functions-debunked-10}}

\texttt{nhanes()} is the function we use to import our NHANES data and save it in a dataframe. What is a dataframe? We'll introduce it below. The arguments are as follows:

nhanes(
\textgreater{} `NAME OF DATASET'

)

\textbf{For example:} \texttt{nhanes(\textquotesingle{}DEMO\_H\textquotesingle{})}

\hypertarget{explore-our-dataset}{%
\subsection{Explore our dataset}\label{explore-our-dataset}}

Recall the basic functions that we learned in tutorial 1, it is good practice for us to explore our datasets before doing any analysis.

We can check the dimension of the datasets:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(demo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 10175    47
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(bpx)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 9813   23
\end{verbatim}

We can also check their first few rows:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3 RIDEXMON
## 1 73557        8        2        1       69       NA        4        4        1
## 2 73558        8        2        1       54       NA        3        3        1
## 3 73559        8        2        1       72       NA        3        3        2
##   RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3 DMDEDUC2
## 1       NA        1       1        1        1       NA       NA        3
## 2       NA        2      NA        1        1       NA       NA        3
## 3       NA        1       1        1        1       NA       NA        4
##   DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG
## 1        4       NA       1        2        2       1        2        2       1
## 2        1       NA       1        2        2       1        2        2       1
## 3        1       NA       1        2        2       1        2        2       1
##   MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE
## 1        2        2        1        3        3        0        0        2
## 2        2        2        1        4        4        0        2        0
## 3        2        2       NA        2        2        0        0        2
##   DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR
## 1        1       69        1        3        4       NA 13281.24 13481.04
## 2        1       54        1        3        1        1 23682.06 24471.77
## 3        1       72        1        4        1        3 57214.80 57193.29
##   SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 1       1      112        4        4     0.84
## 2       1      108        7        7     1.78
## 3       1      109       10       10     4.51
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(bpx, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN PEASCST1 PEASCTM1 PEASCCT1 BPXCHR BPAARM BPACSZ BPXPLS BPXPULS BPXPTY
## 1 73557        1      620       NA     NA      1      4     86       1      1
## 2 73558        1      766       NA     NA      1      4     74       1      1
## 3 73559        1      665       NA     NA      1      4     68       1      1
##   BPXML1 BPXSY1 BPXDI1 BPAEN1 BPXSY2 BPXDI2 BPAEN2 BPXSY3 BPXDI3 BPAEN3 BPXSY4
## 1    140    122     72      2    114     76      2    102     74      2     NA
## 2    170    156     62      2    160     80      2    156     42      2     NA
## 3    160    140     90      2    140     76      2    146     80      2     NA
##   BPXDI4 BPAEN4
## 1     NA     NA
## 2     NA     NA
## 3     NA     NA
\end{verbatim}

It does not hurt to also check the last few rows of the datasets:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tail}\NormalTok{(demo, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3
## 10173 83729        8        2        2       42       NA        4        4
## 10174 83730        8        2        1        7       NA        2        2
## 10175 83731        8        2        1       11       NA        5        6
##       RIDEXMON RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3
## 10173        2       NA        2      NA        2        1        6       NA
## 10174        1       84       NA      NA        1        1       NA        0
## 10175        1      140       NA      NA        1        1       NA        5
##       DMDEDUC2 DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY
## 10173        5        3        2       1        2        2       1        2
## 10174       NA       NA       NA       1        1        2       1        2
## 10175       NA       NA       NA       1        1        2       1        2
##       FIAINTRP MIALANG MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA
## 10173        2      NA       NA       NA       NA        1        1        0
## 10174        2      NA       NA       NA       NA        4        4        1
## 10175        2       1        2        2       NA        4        4        0
##       DMDHHSZB DMDHHSZE DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU
## 10173        0        0        2       42        2        5        3       NA
## 10174        1        0        2       30        2        4        1        3
## 10175        2        0        1       43        2        5        1        5
##       WTINT2YR  WTMEC2YR SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 10173 24122.25 26902.344       1      104        7        7     3.66
## 10174 25521.88 26686.026       2      109        6        6     1.05
## 10175  8930.18  9700.873       2      106       15       15     5.00
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tail}\NormalTok{(bpx, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       SEQN PEASCST1 PEASCTM1 PEASCCT1 BPXCHR BPAARM BPACSZ BPXPLS BPXPULS
## 9811 83729        1      679       NA     NA      1      4     80       1
## 9812 83730        1      381       NA     72     NA     NA     NA       1
## 9813 83731        1      498       NA     NA      1      3     90       1
##      BPXPTY BPXML1 BPXSY1 BPXDI1 BPAEN1 BPXSY2 BPXDI2 BPAEN2 BPXSY3 BPXDI3
## 9811      1    150    136     82      2    130     82      2    138     80
## 9812     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 9813      1    120     94     68      2     94     56      2     90     62
##      BPAEN3 BPXSY4 BPXDI4 BPAEN4
## 9811      2     NA     NA     NA
## 9812     NA     NA     NA     NA
## 9813      2     NA     NA     NA
\end{verbatim}

\hypertarget{is.na}{%
\subsubsection{is.na()}\label{is.na}}

In real world, missing values are unavoidable. There are many reasons for missing values - may be a result from nonresponse or incorrect data collection and it happens all the time. It is always a good idea to check if there is any missing value before proceeding.

In a dataframe, you will see NAs if there're missing values and \emph{NA} indicates missing values in R.

Note: Be careful when doing manipulation on real dataset!!!Missing values may be recorded in other ways, for example, \emph{infinity} or other numbers. To deal with missing values in this case, one way is to convert these values into NAs and then treat them as regular NAs. Details will not be discussed in this tutorial but will likely be included in later tutorials.

To check if there is any missing values (NAs) in a dataframe, use \texttt{is.na()}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(demo),}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3
## [1,] FALSE    FALSE    FALSE    FALSE    FALSE     TRUE    FALSE    FALSE
## [2,] FALSE    FALSE    FALSE    FALSE    FALSE     TRUE    FALSE    FALSE
## [3,] FALSE    FALSE    FALSE    FALSE    FALSE     TRUE    FALSE    FALSE
## [4,] FALSE    FALSE    FALSE    FALSE    FALSE     TRUE    FALSE    FALSE
## [5,] FALSE    FALSE    FALSE    FALSE    FALSE     TRUE    FALSE    FALSE
##      RIDEXMON RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3
## [1,]    FALSE     TRUE    FALSE   FALSE    FALSE    FALSE     TRUE     TRUE
## [2,]    FALSE     TRUE    FALSE    TRUE    FALSE    FALSE     TRUE     TRUE
## [3,]    FALSE     TRUE    FALSE   FALSE    FALSE    FALSE     TRUE     TRUE
## [4,]    FALSE    FALSE     TRUE    TRUE    FALSE    FALSE     TRUE    FALSE
## [5,]    FALSE     TRUE    FALSE    TRUE    FALSE    FALSE     TRUE     TRUE
##      DMDEDUC2 DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY
## [1,]    FALSE    FALSE     TRUE   FALSE    FALSE    FALSE   FALSE    FALSE
## [2,]    FALSE    FALSE     TRUE   FALSE    FALSE    FALSE   FALSE    FALSE
## [3,]    FALSE    FALSE     TRUE   FALSE    FALSE    FALSE   FALSE    FALSE
## [4,]     TRUE     TRUE     TRUE   FALSE    FALSE    FALSE   FALSE    FALSE
## [5,]    FALSE    FALSE     TRUE   FALSE    FALSE    FALSE   FALSE    FALSE
##      FIAINTRP MIALANG MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA
## [1,]    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE
## [2,]    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE
## [3,]    FALSE   FALSE    FALSE    FALSE     TRUE    FALSE    FALSE    FALSE
## [4,]    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE
## [5,]    FALSE   FALSE    FALSE    FALSE     TRUE    FALSE    FALSE    FALSE
##      DMDHHSZB DMDHHSZE DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU
## [1,]    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE     TRUE
## [2,]    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE
## [3,]    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE
## [4,]    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE
## [5,]    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE    FALSE
##      WTINT2YR WTMEC2YR SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## [1,]    FALSE    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE
## [2,]    FALSE    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE
## [3,]    FALSE    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE
## [4,]    FALSE    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE
## [5,]    FALSE    FALSE   FALSE    FALSE    FALSE    FALSE    FALSE
\end{verbatim}

To find the total number of missing values in a dataframe:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sum}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(demo))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 82092
\end{verbatim}

To check if there is any missing values (NAs) in a column,for example, gender:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(demo[}\StringTok{\textquotesingle{}RIAGENDR\textquotesingle{}}\NormalTok{]),}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      RIAGENDR
## [1,]    FALSE
## [2,]    FALSE
## [3,]    FALSE
## [4,]    FALSE
## [5,]    FALSE
\end{verbatim}

To find the total number of missing values in a column:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sum}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(demo[}\StringTok{\textquotesingle{}RIAGENDR\textquotesingle{}}\NormalTok{]))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0
\end{verbatim}

To find the number of missing values for each column, use the summary() function:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(demo)}
\end{Highlighting}
\end{Shaded}

If there is a missing value in one cell, is.na() will return \textbf{TRUE}; if there is no missing value in one cell, it will return \textbf{FALSE}

For example, (1,1) (1st row 1st column) is FALSE - it means that (1,1) is not a missing value; (1,6) (1st row 6th column) is TRUE - it means that (1,6) is NA.

\href{https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/NA}{\textbf{is.na()}} is the function we use to inspect any missing values in a dataframe - it is housed in the base package.

The arguments are as follows:

is.na(
\textgreater{} NAME OF DATAFRAME

)

\textbf{For example:} \texttt{is.na(demo)}

\textbf{DO QUESTION 1 OF THE QUIZ NOW}
\textgreater{} What package does the function \texttt{nhanes()} belong to?

\textbf{DO QUESTION 2 OF THE QUIZ NOW}

\begin{quote}
Which code below is the correct one to print the last 10 rows of a dataframe called temp?
\end{quote}

\textbf{DO QUESTION 3 OF THE QUIZ NOW}
\textgreater{} Suppose a cell contains NA. What is the output after perform is.na() on it?

\hypertarget{dataset-preparation}{%
\section{2.Dataset preparation}\label{dataset-preparation}}

Now that we've successfully imported the two datasets and we're ready to do further data manipulations. But before we proceed, there are three issues in the datasets:

\begin{itemize}
\item
  The two datasets are \textbf{Huge}. Recall the dimensions of the two datasets in section 1, there are 10175 rows and 47 columns in the demo dataset and 9813 rows and 23 columns in the bpx dataset.

  \begin{itemize}
  \item
    For demostration purpose, this tutorial will only focus on parts of the two datasets.

    \begin{itemize}
    \item
      For the demo dataset, we want to keep the following variables as our primary interests only:

      \begin{itemize}
      \tightlist
      \item
        \emph{SEQN} (Respondent sequence number)
      \item
        \emph{RIAGENDR} (Gender)
      \item
        \emph{RIDAGEYR} (Age in years at screening)
      \item
        \emph{RIDRETH3} (Race)
      \item
        \emph{DMDEDUC2} (Education level - Adults 20+)
      \end{itemize}
    \item
      For the bpx dataset, we want to keep the following variables as our primary interests only:

      \begin{itemize}
      \tightlist
      \item
        \emph{SEQN} (Respondent sequence number)
      \item
        \emph{PEASCST1} (Blood Pressure Status)
      \item
        \emph{PEASCTM1} (Blood Pressure Time in Seconds)
      \item
        \emph{BPXSY1} (Systolic: Blood pres (1st rdg) mm Hg)
      \item
        \emph{BPXDI1} (Diastolic: Blood pres (1st rdg) mm Hg)
      \end{itemize}
    \item
      For both datasets, we want to keep the top 5 rows only.
    \end{itemize}
  \end{itemize}
\item
  There is something odd about the demo dataset. For example,if you run demo alone, you will see that \emph{RIAGENDR} (gender) is coded as 1 and 2. For ease of future use, we want to translate this 1 and 2 into male and female.
\item
  The variable names are long are ambiguous. For ease of further use, we want to rename the variables so that they can be easily understand.

  \begin{itemize}
  \item
    For the demo dataframe, we want to rename the variables in this way:

    \begin{itemize}
    \tightlist
    \item
      SEQN -\textgreater{} id
    \item
      RIAGENDR -\textgreater{} gender
    \item
      RIDAGEYR -\textgreater{} age
    \item
      RIDRETH3 -\textgreater{} race
    \item
      DMDEDUC2 -\textgreater{} race
    \end{itemize}
  \item
    For the bpx dataframe, we want to rename the variables in this way:

    \begin{itemize}
    \tightlist
    \item
      SEQN -\textgreater{} id
    \item
      PEASCST1 -\textgreater{} bp\_status
    \item
      PEASCTM1 -\textgreater{} bpt\_sec
    \item
      BPXSY1 -\textgreater{} systolic
    \item
      BPXDI1 -\textgreater{} diastolic
    \end{itemize}
  \item
    \textbf{Note}, there are many different ways of renaming as long as the new names are straight-forward. We will use the above rename strategy in this tutorial for the sake of consistency.
  \end{itemize}
\end{itemize}

With the three issues listed above, here's an example of how to resolve them in the demo dataset:

First, we need to translate the way of variable encoding using the \texttt{nhanesTranslate()} function:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo\_translate }\OtherTok{\textless{}{-}} \FunctionTok{nhanesTranslate}\NormalTok{(}\StringTok{\textquotesingle{}DEMO\_H\textquotesingle{}}\NormalTok{,}
                                  \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}SEQN\textquotesingle{}}\NormalTok{, }\CommentTok{\# Respondent sequence number}
                                    \StringTok{\textquotesingle{}RIAGENDR\textquotesingle{}}\NormalTok{, }\CommentTok{\# Gender}
                                    \StringTok{\textquotesingle{}RIDAGEYR\textquotesingle{}}\NormalTok{, }\CommentTok{\# Age in years at screening}
                                    \StringTok{\textquotesingle{}RIDRETH3\textquotesingle{}}\NormalTok{, }\CommentTok{\# Race}
                                    \StringTok{\textquotesingle{}DMDEDUC2\textquotesingle{}}\NormalTok{), }\CommentTok{\# Education level {-} Adults 20+}
                                 \AttributeTok{data =}\NormalTok{ demo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in FUN(X[[i]], ...): No translation table is available for SEQN
\end{verbatim}

\begin{verbatim}
## Translated columns: RIAGENDR RIDRETH3 DMDEDUC2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo\_translate,}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1
## 1 73557        8        2     Male       69       NA        4
## 2 73558        8        2     Male       54       NA        3
## 3 73559        8        2     Male       72       NA        3
## 4 73560        8        2     Male        9       NA        3
## 5 73561        8        2   Female       73       NA        3
##             RIDRETH3 RIDEXMON RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN
## 1 Non-Hispanic Black        1       NA        1       1        1        1
## 2 Non-Hispanic White        1       NA        2      NA        1        1
## 3 Non-Hispanic White        2       NA        1       1        1        1
## 4 Non-Hispanic White        1      119       NA      NA        1        1
## 5 Non-Hispanic White        1       NA        2      NA        1        1
##   DMDYRSUS DMDEDUC3                         DMDEDUC2 DMDMARTL RIDEXPRG SIALANG
## 1       NA       NA High school graduate/GED or equi        4       NA       1
## 2       NA       NA High school graduate/GED or equi        1       NA       1
## 3       NA       NA        Some college or AA degree        1       NA       1
## 4       NA        3                             <NA>       NA       NA       1
## 5       NA       NA        College graduate or above        1       NA       1
##   SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG MIAPROXY MIAINTRP
## 1        2        2       1        2        2       1        2        2
## 2        2        2       1        2        2       1        2        2
## 3        2        2       1        2        2       1        2        2
## 4        1        2       1        2        2       1        2        2
## 5        2        2       1        2        2       1        2        2
##   AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE DMDHRGND DMDHRAGE
## 1        1        3        3        0        0        2        1       69
## 2        1        4        4        0        2        0        1       54
## 3       NA        2        2        0        0        2        1       72
## 4        1        4        4        0        2        0        1       33
## 5       NA        2        2        0        0        2        1       78
##   DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR SDMVPSU SDMVSTRA
## 1        1        3        4       NA 13281.24 13481.04       1      112
## 2        1        3        1        1 23682.06 24471.77       1      108
## 3        1        4        1        3 57214.80 57193.29       1      109
## 4        1        3        1        4 55201.18 55766.51       2      109
## 5        1        5        1        5 63709.67 65541.87       2      116
##   INDHHIN2 INDFMIN2 INDFMPIR
## 1        4        4     0.84
## 2        7        7     1.78
## 3       10       10     4.51
## 4        9        9     2.52
## 5       15       15     5.00
\end{verbatim}

Second, we want to keep the variabls which we're interested in only:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{new\_demo }\OtherTok{\textless{}{-}} \FunctionTok{select}\NormalTok{(demo\_translate,}
                   \FunctionTok{c}\NormalTok{(SEQN,}
\NormalTok{                    RIAGENDR,}
\NormalTok{                    RIDAGEYR,}
\NormalTok{                    RIDRETH3,}
\NormalTok{                    DMDEDUC2))}
\FunctionTok{head}\NormalTok{(new\_demo,}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN RIAGENDR RIDAGEYR           RIDRETH3                         DMDEDUC2
## 1 73557     Male       69 Non-Hispanic Black High school graduate/GED or equi
## 2 73558     Male       54 Non-Hispanic White High school graduate/GED or equi
## 3 73559     Male       72 Non-Hispanic White        Some college or AA degree
## 4 73560     Male        9 Non-Hispanic White                             <NA>
## 5 73561   Female       73 Non-Hispanic White        College graduate or above
\end{verbatim}

Third, we want to rename the variables using the \texttt{rename()} function:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{new\_demo }\OtherTok{\textless{}{-}} \FunctionTok{rename}\NormalTok{(new\_demo,}
       \AttributeTok{id =}\NormalTok{ SEQN, }\CommentTok{\# Respondent sequence number}
       \AttributeTok{gender =}\NormalTok{ RIAGENDR, }\CommentTok{\# Gender}
       \AttributeTok{age =}\NormalTok{ RIDAGEYR, }\CommentTok{\# Age in years at screening}
       \AttributeTok{race =}\NormalTok{ RIDRETH3, }\CommentTok{\# Race/Hispanic origin}
       \AttributeTok{edu =}\NormalTok{ DMDEDUC2, }\CommentTok{\# Education level {-} Adults 20+}
\NormalTok{       )}
\FunctionTok{head}\NormalTok{(new\_demo,}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      id gender age               race                              edu
## 1 73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2 73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3 73559   Male  72 Non-Hispanic White        Some college or AA degree
## 4 73560   Male   9 Non-Hispanic White                             <NA>
## 5 73561 Female  73 Non-Hispanic White        College graduate or above
\end{verbatim}

Last, we want to keep the top 10 rows using the \texttt{head()} function and save the dataframe as \texttt{final\_demo}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{final\_demo }\OtherTok{\textless{}{-}} \FunctionTok{head}\NormalTok{(new\_demo,}\DecValTok{10}\NormalTok{)}
\NormalTok{final\_demo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       id gender age               race                              edu
## 1  73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2  73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3  73559   Male  72 Non-Hispanic White        Some college or AA degree
## 4  73560   Male   9 Non-Hispanic White                             <NA>
## 5  73561 Female  73 Non-Hispanic White        College graduate or above
## 6  73562   Male  56   Mexican American        Some college or AA degree
## 7  73563   Male   0 Non-Hispanic White                             <NA>
## 8  73564 Female  61 Non-Hispanic White        College graduate or above
## 9  73565   Male  42     Other Hispanic High school graduate/GED or equi
## 10 73566 Female  56 Non-Hispanic White High school graduate/GED or equi
\end{verbatim}

\hypertarget{functions-debunked-11}{%
\subsubsection{Functions debunked}\label{functions-debunked-11}}

\href{https://www.rdocumentation.org/packages/nhanesA/versions/0.6.5.3/topics/nhanesTranslate}{\textbf{nhanesTranslate}} is the function we use to translate variables in a dataset - it is housed in the nhanesA package. The arguments are as follows:

nhanesTranslate(
\textgreater{} `NAME OF DATASET',

\begin{quote}
COLUMNS YOU WANT TO BE TRANSLATED, (can be written as a vector)
\end{quote}

\begin{quote}
data = SOURCE DATAFRAME
\end{quote}

)

\textbf{For example:} \texttt{nhanesTranslate(\textquotesingle{}DEMO\_H\textquotesingle{},\ RIAGENDR,\ data\ =\ demo)}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/select}{\textbf{rename()}} is the function we use to rename the variables and return all variables - it is housed in the dplyr package. The arguments are as follows:

rename(
\textgreater{} NAME OF DATAFRAME,

\begin{quote}
NEW\_VARIABLE\_NAME = OLD\_VARIABLE\_NAME
\end{quote}

)

\textbf{For example:} \texttt{rename(demo,\ id\ =\ SEQN)}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/select}{\textbf{select()}} is the function we use to only return the varibles we want - it is housed in the dplyr package. The arguments are as follows:

select(
\textgreater{} NAME OF DATAFRAME,

\begin{quote}
VARIABLES, (can be written as a vector)
\end{quote}

)

\textbf{For example:} \texttt{select(demo,\ c(id,gender,age))}

\textbf{For example:} \texttt{select(demo,\ id:age))}

\hypertarget{try-it-yourself-14}{%
\subsection{4.1 Try it yourself}\label{try-it-yourself-14}}

In the bpx dataframe, keep the following variables and top 5 rows only:

\begin{itemize}
\tightlist
\item
  SEQN
\item
  PEASCST1
\item
  PEASCTM1
\item
  BPXSY1
\item
  BPXDI1
\end{itemize}

\hypertarget{try-it-yourself-15}{%
\subsection{4.2 Try it yourself}\label{try-it-yourself-15}}

rename the variables in the following way:

\begin{itemize}
\tightlist
\item
  SEQN -\textgreater{} id
\item
  PEASCST1 -\textgreater{} bp\_status
\item
  PEASCTM1 -\textgreater{} bpt\_sec
\item
  BPXSY1 -\textgreater{} systolic
\item
  BPXDI1 -\textgreater{} diastolic
\end{itemize}

\textbf{DO QUESTION 4 OF THE QUIZ NOW}
\textgreater{} Given the following code:
\textgreater{} select(dataset,A,B)
\textgreater{} What is the purpose of the code?

\textbf{DO QUESTION 5 OF THE QUIZ NOW}
\textgreater{} Which code below is the correct one to rename column A to B in a dataframe called dataset?

\hypertarget{filter}{%
\section{3. Filter}\label{filter}}

Sometimes, we want to focus on a subset of the dataset that satisifying some conditions for further analysis. In this case, we need to filter the dataset based on variables' values and conditions.

For example, we use the following code to filter the observations that patients are 40 years old at screening.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(final\_demo, age }\SpecialCharTok{==} \DecValTok{40}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] id     gender age    race   edu   
## <0 rows> (or 0-length row.names)
\end{verbatim}

We may also interested in the observations that patients are 40 \textbf{or} 41 years old at screening:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(final\_demo, age }\SpecialCharTok{==} \DecValTok{40} \SpecialCharTok{|}\NormalTok{ age }\SpecialCharTok{==} \DecValTok{41}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] id     gender age    race   edu   
## <0 rows> (or 0-length row.names)
\end{verbatim}

Another way of writing the code above is to use the \texttt{\%in\%} operator:

\texttt{x\ \%in\%\ y} is equivalent to the condition that \textbf{the value of x is in one of the values of y}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(final\_demo, age }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\DecValTok{40}\NormalTok{, }\DecValTok{41}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] id     gender age    race   edu   
## <0 rows> (or 0-length row.names)
\end{verbatim}

\hypertarget{functions-debunked-12}{%
\subsubsection{Functions debunked}\label{functions-debunked-12}}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/filter}{\textbf{filter()}} is the function we use to subset the dataset based on their values and conditions - it is housed in the dplyr package. The arguments are as follows:

filter(
\textgreater{} NAME OF DATASET,

\begin{quote}
CONDITION 1
\end{quote}

\begin{quote}
CONDITION 2
\end{quote}

\begin{quote}
\ldots{}
\end{quote}

\begin{quote}
CONDITION n
\end{quote}

)

\textbf{For example:} \texttt{filter(new\_demo,\ gender\ ==\ 1)}

\textbf{Note:}

1, pay attention to the difference between \texttt{=} and \texttt{==}
\textgreater{} \texttt{=} is assignment operator

\begin{quote}
\texttt{==} is comparison operator
\end{quote}

More comparison operators are \texttt{\textless{}}, \texttt{\textless{}=},\texttt{\textgreater{}}, \texttt{\textgreater{}=},\texttt{!=}.

2, logical operators

Mutiple conditions can be combined using logical operators. Common logical operators are:

\begin{quote}
\texttt{and} is \texttt{\&}
\end{quote}

\begin{quote}
\texttt{or} is \texttt{\textbar{}}
\end{quote}

\begin{quote}
\texttt{not} is \texttt{!}
\end{quote}

\textbf{For example:} \texttt{filter(new\_demo,\ age\ ==\ 40\ \textbar{}\ age\ ==\ 41)}

\hypertarget{missing-values-1}{%
\subsubsection{Missing values}\label{missing-values-1}}

Note, we don't have any missing values in the age column (can be checked using \texttt{is.na(new\_demo{[}\textquotesingle{}age\textquotesingle{}{]})}).

What if we have missing values and how does filter() treat missing values?

filter() only keeps the rows where the condition is \textbf{TRUE} and remove the rows where the condition is failed due to \textbf{FALSE OR NA}.

If you want to keep the NAs, you need to add the condition explicitly: \texttt{is.na(VARIABLE\_NAME)} and use \texttt{\textbar{}} to combine with other conditions.

\textbf{For example:} \texttt{filter(new\_demo,\ is.na(income)\ \textbar{}\ income\ \textless{}=\ 50)}

\hypertarget{try-it-yourself-16}{%
\subsection{4.3 Try it yourself}\label{try-it-yourself-16}}

In the demo dataframe, find all the records that:

4.3.1 the participant who is a male

4.3.2 the participant who is a male and is older tha 50 years old

4.3.3 the education level is missing

\textbf{DO QUESTION 6 OF THE QUIZ NOW}
\textgreater{} Fill in the blank to answer `4.3.1 Try it yourself':

\begin{quote}
filter(final\_demo, gender \texttt{\_\_\_})
\end{quote}

\textbf{DO QUESTION 7 OF THE QUIZ NOW}
\textgreater{} Fill in the blank to answer the second question in `4.3.2 Try it yourself':

\begin{quote}
filter(final\_demo, gender == `Male' \texttt{\_\_\_} age \textgreater{} 50)
\end{quote}

\textbf{DO QUESTION 8 OF THE QUIZ NOW}
\textgreater{} Fill in the blank to answer the third question in `4.3.3 Try it yourself':

\begin{quote}
filter(final\_demo, \texttt{\_\_\_})
\end{quote}

\hypertarget{re-order-the-rows}{%
\section{4.Re-order the rows}\label{re-order-the-rows}}

Suppose we want to re-order the observations by certain variables, we can use the arrange() function in R.

First, let's look at the top 5 rows in the demo dataframe:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{final\_demo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       id gender age               race                              edu
## 1  73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2  73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3  73559   Male  72 Non-Hispanic White        Some college or AA degree
## 4  73560   Male   9 Non-Hispanic White                             <NA>
## 5  73561 Female  73 Non-Hispanic White        College graduate or above
## 6  73562   Male  56   Mexican American        Some college or AA degree
## 7  73563   Male   0 Non-Hispanic White                             <NA>
## 8  73564 Female  61 Non-Hispanic White        College graduate or above
## 9  73565   Male  42     Other Hispanic High school graduate/GED or equi
## 10 73566 Female  56 Non-Hispanic White High school graduate/GED or equi
\end{verbatim}

We notice that the column ``age'' doesn't follow any order. We use the following code to re-order the dataframe by age:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{arrange}\NormalTok{(final\_demo, age)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       id gender age               race                              edu
## 1  73563   Male   0 Non-Hispanic White                             <NA>
## 2  73560   Male   9 Non-Hispanic White                             <NA>
## 3  73565   Male  42     Other Hispanic High school graduate/GED or equi
## 4  73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 5  73562   Male  56   Mexican American        Some college or AA degree
## 6  73566 Female  56 Non-Hispanic White High school graduate/GED or equi
## 7  73564 Female  61 Non-Hispanic White        College graduate or above
## 8  73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 9  73559   Male  72 Non-Hispanic White        Some college or AA degree
## 10 73561 Female  73 Non-Hispanic White        College graduate or above
\end{verbatim}

If we want to change it to descending order, use desc():

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{arrange}\NormalTok{(final\_demo, }\FunctionTok{desc}\NormalTok{(age))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       id gender age               race                              edu
## 1  73561 Female  73 Non-Hispanic White        College graduate or above
## 2  73559   Male  72 Non-Hispanic White        Some college or AA degree
## 3  73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 4  73564 Female  61 Non-Hispanic White        College graduate or above
## 5  73562   Male  56   Mexican American        Some college or AA degree
## 6  73566 Female  56 Non-Hispanic White High school graduate/GED or equi
## 7  73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 8  73565   Male  42     Other Hispanic High school graduate/GED or equi
## 9  73560   Male   9 Non-Hispanic White                             <NA>
## 10 73563   Male   0 Non-Hispanic White                             <NA>
\end{verbatim}

What if we want to change the order by multiple columns?

We can simply add multiple columns in the arguments! It's also useful when there are ties in the values of one column and the subsquent columns are used to break the ties.

For example, re-order the observations by age,id:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{arrange}\NormalTok{(final\_demo,age,id)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       id gender age               race                              edu
## 1  73563   Male   0 Non-Hispanic White                             <NA>
## 2  73560   Male   9 Non-Hispanic White                             <NA>
## 3  73565   Male  42     Other Hispanic High school graduate/GED or equi
## 4  73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 5  73562   Male  56   Mexican American        Some college or AA degree
## 6  73566 Female  56 Non-Hispanic White High school graduate/GED or equi
## 7  73564 Female  61 Non-Hispanic White        College graduate or above
## 8  73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 9  73559   Male  72 Non-Hispanic White        Some college or AA degree
## 10 73561 Female  73 Non-Hispanic White        College graduate or above
\end{verbatim}

\hypertarget{functions-debunked-13}{%
\subsubsection{Functions debunked}\label{functions-debunked-13}}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/arrange}{\textbf{arrange()}} is the function we use to change the order of the observations by columns - it is housed in the dplyr package. The arguments are as follows:

arrange(
\textgreater{} NAME OF DATAFRAME,

\begin{quote}
COLUMN 1
\end{quote}

\begin{quote}
COLUMN 2
\end{quote}

\begin{quote}
\ldots{}
\end{quote}

\begin{quote}
COLUMN n
\end{quote}

)

\textbf{For example:} \texttt{arrange(new\_demo,\ gender)}

Use \texttt{desc(COLUMN\_NAME)} to reorder the dataframe by \emph{COLUMN\_NAME} in descending order.

\hypertarget{missing-values-2}{%
\subsubsection{Missing values}\label{missing-values-2}}

In the last example, we notice that there are missing values in column `income' and `income\_ratio'.

How does arrange() deal with missing value? \textbf{All NAs will be retained at the end.} Check the output above!

\hypertarget{try-it-yourself-17}{%
\subsection{4.4 Try it yourself}\label{try-it-yourself-17}}

Re-order the rows in the bpx dataset by Blood Pressure Time in Seconds (bpt\_sec) in descending order:

\textbf{DO QUESTION 9 OF THE QUIZ NOW}
\textgreater{} Fill in the blank to answer the question in `4.4 Try it yourself':

\begin{quote}
\texttt{\_\_\_}(final\_bpx,\texttt{\_\_\_})
\end{quote}

\hypertarget{add-new-variables}{%
\section{5. Add new variables}\label{add-new-variables}}

Suppose we want to gain more information about our observations and we want to constrcut a new variable based on the variables we have. The mutate() and transmute() in R helps us to add new variables into a dataframe.

For example, we want to add a new variable called born\_year in the demo dataframe and born\_year is calculated in this way: born\_year = 2021- age:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mutate}\NormalTok{(final\_demo,}
       \AttributeTok{born\_year =} \DecValTok{2021} \SpecialCharTok{{-}}\NormalTok{ age }
\NormalTok{      )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       id gender age               race                              edu
## 1  73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2  73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3  73559   Male  72 Non-Hispanic White        Some college or AA degree
## 4  73560   Male   9 Non-Hispanic White                             <NA>
## 5  73561 Female  73 Non-Hispanic White        College graduate or above
## 6  73562   Male  56   Mexican American        Some college or AA degree
## 7  73563   Male   0 Non-Hispanic White                             <NA>
## 8  73564 Female  61 Non-Hispanic White        College graduate or above
## 9  73565   Male  42     Other Hispanic High school graduate/GED or equi
## 10 73566 Female  56 Non-Hispanic White High school graduate/GED or equi
##    born_year
## 1       1952
## 2       1967
## 3       1949
## 4       2012
## 5       1948
## 6       1965
## 7       2021
## 8       1960
## 9       1979
## 10      1965
\end{verbatim}

If we want to keep the added variables only, use transmute() instead:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{transmute}\NormalTok{(final\_demo,}
    \AttributeTok{born\_year =} \DecValTok{2021} \SpecialCharTok{{-}}\NormalTok{ age}
\NormalTok{     )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    born_year
## 1       1952
## 2       1967
## 3       1949
## 4       2012
## 5       1948
## 6       1965
## 7       2021
## 8       1960
## 9       1979
## 10      1965
\end{verbatim}

\hypertarget{functions-debunked-14}{%
\subsubsection{Functions debunked}\label{functions-debunked-14}}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/mutate}{\textbf{mutate()}} is the function we use to create new variables based on variables we have and add them to the original dataframe - it is housed in the dplyr package. The arguments are as follows:

mutate(
\textgreater{} NAME OF DATAFRAME,

\begin{quote}
NEW\_VARIABLE = FUNCTION OF EXISTING VARIBALES
\end{quote}

\begin{quote}
\ldots{}
)
\end{quote}

\textbf{For example:} \texttt{mutate(new\_demo,\ rescale\_income\ =\ income/2)}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/mutate}{\textbf{transmute()}} is the function we use to create new variables based on variables we have and only keep the added variables - it is housed in the dplyr package. The arguments are as follows:

transmute(
\textgreater{} NAME OF DATAFRAME,

\begin{quote}
NEW\_VARIABLE = FUNCTION OF EXISTING VARIBALES
\end{quote}

\begin{quote}
\ldots{}
\end{quote}

)

\textbf{For example:} \texttt{transmute(new\_demo,\ rescale\_income\ =\ income/2)}

You can find more details in how to use creation functions to create new variables in \href{https://learning.oreilly.com/library/view/r-for-data/9781491910382/ch03.html\#transform}{Chapter I. Explore Chapter 3}.

\hypertarget{try-it-yourself-18}{%
\subsection{4.5 Try it yourself}\label{try-it-yourself-18}}

4.5.1. Create a new variable called called \textbf{rescale\_bpt\_sec} that records the Blood Pressure Time in miuntes. Keep both original and new variables.

4.5.2. Create \textbf{rescale\_bpt\_sec} in the same way above and \textbf{only keep new variables}.

Note: Try to avoid using select().

\textbf{DO QUESTION 10 OF THE QUIZ NOW}
\textgreater{} What are the \texttt{?}s to answer `4.5.1 \& 4.5.2 Try it yourself'?

\begin{quote}
\texttt{\_?\_}(final\_bpx,
\end{quote}

\begin{quote}
rescale\_bpt\_sec = bpt\_sec/60
\end{quote}

\begin{quote}
)
\end{quote}

\hypertarget{summary-statistics-and-group_by}{%
\section{6.Summary statistics and group\_by}\label{summary-statistics-and-group_by}}

Information about the whole dataframe such as mean is very useful for data analysis. However, things could be very complex when aggregating multiple functions. We'll start with the simple one: find a summary statistic from the whole dataset.

For example, find the average age in the whole demo dataframe:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summarize}\NormalTok{(final\_demo,}\AttributeTok{average\_age =} \FunctionTok{mean}\NormalTok{(age,}\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   average_age
## 1        49.2
\end{verbatim}

It gets more complex when we change the unit of analysis into groups, i.e, find summary statistics grouping by variables. To do so, we first convert the dataframe into a grouped dataframe using group\_by() and then apply the summarize() to the grouped dataframe.

For example, find the average age in the demo dataframe per gender:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{by\_gender }\OtherTok{\textless{}{-}} \FunctionTok{group\_by}\NormalTok{(final\_demo,gender)}
\FunctionTok{summarize}\NormalTok{(by\_gender, }\AttributeTok{average\_age =} \FunctionTok{mean}\NormalTok{(age, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 2 x 2
##   gender average_age
##   <fct>        <dbl>
## 1 Male          43.1
## 2 Female        63.3
\end{verbatim}

\hypertarget{functions-debunked-15}{%
\subsubsection{Functions debunked}\label{functions-debunked-15}}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/summarise}{\textbf{summarize()}} is the function we use to compute the summary statistics for the whole dataframe - it is housed in the dplyr package. The arguments are as follows:

summarize(
\textgreater{} NAME OF DATAFRAME,

\begin{quote}
NAME OF SUMMARY STATISTIC = FUNCTION()
\end{quote}

)

\textbf{For example:} \texttt{summarize(new\_demo,\ mean(age,na.rm\ =\ TRUE))}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/group_by}{\textbf{group\_by()}} is the function we use to create a grouped dataframe grouping by one or more variables - it is housed in the dplyr package. The arguments are as follows:

group\_by(
\textgreater{} NAME OF DATAFRAME,

\begin{quote}
NAME OF VARIABLE
\end{quote}

)

\textbf{For example:} \texttt{group\_by(new\_demo,age)}
\textbf{Note:} if there is missing value in the variable, group\_by() treats it as a new group

\hypertarget{try-it-yourself-19}{%
\subsection{4.6 Try it yourself}\label{try-it-yourself-19}}

Find the average age in the demo dataframe per education level

\textbf{DO QUESTION 11 OF THE QUIZ NOW}
\textgreater{} Fill in the blanks to answer the question in `4.6 Try it yourself':

\begin{quote}
by\_edu \textless- group\_by(\texttt{\_\_\_})
\end{quote}

\begin{quote}
summarize(\texttt{\_\_\_}, average\_age = \texttt{\_\_\_}(age, na.rm = TRUE))
\end{quote}

\hypertarget{group_by-extension}{%
\subsection{Group\_by() extension}\label{group_by-extension}}

group\_by() is also useful when conjuncting with filter() and mutate().

For example, return the observations which has more than 2 records in each education group.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{by\_edu }\OtherTok{\textless{}{-}}\FunctionTok{group\_by}\NormalTok{(final\_demo,edu)}
\FunctionTok{filter}\NormalTok{(by\_edu,}\FunctionTok{n}\NormalTok{() }\SpecialCharTok{\textgreater{}} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 5
## # Groups:   edu [1]
##   id         gender age        race               edu                           
##   <labelled> <fct>  <labelled> <fct>              <fct>                         
## 1 73557      Male   69         Non-Hispanic Black High school graduate/GED or e~
## 2 73558      Male   54         Non-Hispanic White High school graduate/GED or e~
## 3 73565      Male   42         Other Hispanic     High school graduate/GED or e~
## 4 73566      Female 56         Non-Hispanic White High school graduate/GED or e~
\end{verbatim}

Here's another example: using group\_by() with mutate() to compute the difference in each age and the average mean in each gender group

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{by\_gender }\OtherTok{\textless{}{-}}\FunctionTok{group\_by}\NormalTok{(final\_demo,gender)}
\FunctionTok{mutate}\NormalTok{(by\_gender,}
      \AttributeTok{diff\_age =}\NormalTok{ age }\SpecialCharTok{{-}} \FunctionTok{mean}\NormalTok{(age, }\AttributeTok{na.rm =}\NormalTok{ T))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 10 x 6
## # Groups:   gender [2]
##    id        gender age       race           edu                      diff_age  
##    <labelle> <fct>  <labelle> <fct>          <fct>                    <labelled>
##  1 73557     Male   69        Non-Hispanic ~ High school graduate/GE~  25.857143
##  2 73558     Male   54        Non-Hispanic ~ High school graduate/GE~  10.857143
##  3 73559     Male   72        Non-Hispanic ~ Some college or AA degr~  28.857143
##  4 73560     Male    9        Non-Hispanic ~ <NA>                     -34.142857
##  5 73561     Female 73        Non-Hispanic ~ College graduate or abo~   9.666667
##  6 73562     Male   56        Mexican Ameri~ Some college or AA degr~  12.857143
##  7 73563     Male    0        Non-Hispanic ~ <NA>                     -43.142857
##  8 73564     Female 61        Non-Hispanic ~ College graduate or abo~  -2.333333
##  9 73565     Male   42        Other Hispanic High school graduate/GE~  -1.142857
## 10 73566     Female 56        Non-Hispanic ~ High school graduate/GE~  -7.333333
\end{verbatim}

\hypertarget{functions-debunked-16}{%
\subsubsection{Functions debunked}\label{functions-debunked-16}}

\href{https://www.rdocumentation.org/packages/dplyr/versions/0.7.8/topics/n}{\textbf{n()}} is the function we use to count the number of observations in each group - it is housed in the dplyr package. It can only be used with the existence of summarize(), filter(), and mutate() and there is \textbf{no} argument in it.

\hypertarget{try-it-yourself-20}{%
\subsection{4.7 Try it yourself}\label{try-it-yourself-20}}

Return the observations which has more than 3 records in each gender group.

\hypertarget{try-it-yourself-21}{%
\subsection{4.8 Try it yourself}\label{try-it-yourself-21}}

Compute the difference in each age and the average mean in each education level group

\textbf{DO QUESTION 12 OF THE QUIZ NOW}
\textgreater{} Fill in the blanks to answer `4.7 Try it yourself':

\begin{quote}
by\_gender \textless-group\_by(final\_demo,gender)
\end{quote}

\begin{quote}
filter(by\_edu,\texttt{\_\_\_})
\end{quote}

\textbf{DO QUESTION 13 OF THE QUIZ NOW}
\textgreater{} Fill in the blanks to answer `4.8 Try it yourself':

\begin{quote}
by\_edu \textless-group\_by(final\_demo,edu)
\end{quote}

\begin{quote}
mutate(by\_edu, \texttt{\_\_\_})
\end{quote}

\hypertarget{pipe}{%
\section{7. Pipe}\label{pipe}}

You may have noticed that when doing multiple-step operations, we need to assign the output to a new variable every time when a step is done. It becomes more annoying when there are more steps to do. The pipe operator \href{https://www.rdocumentation.org/packages/magrittr/versions/2.0.1/topics/magrittr-package}{\textbf{\%\textgreater\%}} - which is housed in the magrittr package - saves us from create many unnecessary variables: it takes the output from one function as an input to the following function.

Here's example without using pipe: we want to first keep the observations in the demo dataframe with an age greater than 40 and then create a new variable called born\_year calculated by 2021 - age.

We need to do this in two steps.The first step is to filter the dataframe and save the output as a new variable \emph{temp}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{temp }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(final\_demo, age }\SpecialCharTok{\textgreater{}} \DecValTok{40}\NormalTok{)}
\NormalTok{temp}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      id gender age               race                              edu
## 1 73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2 73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3 73559   Male  72 Non-Hispanic White        Some college or AA degree
## 4 73561 Female  73 Non-Hispanic White        College graduate or above
## 5 73562   Male  56   Mexican American        Some college or AA degree
## 6 73564 Female  61 Non-Hispanic White        College graduate or above
## 7 73565   Male  42     Other Hispanic High school graduate/GED or equi
## 8 73566 Female  56 Non-Hispanic White High school graduate/GED or equi
\end{verbatim}

The second step is to create the new variable:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{temp }\OtherTok{\textless{}{-}} \FunctionTok{mutate}\NormalTok{(temp, }\AttributeTok{born\_year =} \DecValTok{2021} \SpecialCharTok{{-}}\NormalTok{ age)}
\NormalTok{temp}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      id gender age               race                              edu
## 1 73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2 73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3 73559   Male  72 Non-Hispanic White        Some college or AA degree
## 4 73561 Female  73 Non-Hispanic White        College graduate or above
## 5 73562   Male  56   Mexican American        Some college or AA degree
## 6 73564 Female  61 Non-Hispanic White        College graduate or above
## 7 73565   Male  42     Other Hispanic High school graduate/GED or equi
## 8 73566 Female  56 Non-Hispanic White High school graduate/GED or equi
##   born_year
## 1      1952
## 2      1967
## 3      1949
## 4      1948
## 5      1965
## 6      1960
## 7      1979
## 8      1965
\end{verbatim}

The intermediate variable \emph{temp} can be avoided by using the pipe operatore:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{final\_demo }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(age }\SpecialCharTok{\textgreater{}} \DecValTok{40}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{born\_year =} \DecValTok{2021} \SpecialCharTok{{-}}\NormalTok{ age)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      id gender age               race                              edu
## 1 73557   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2 73558   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3 73559   Male  72 Non-Hispanic White        Some college or AA degree
## 4 73561 Female  73 Non-Hispanic White        College graduate or above
## 5 73562   Male  56   Mexican American        Some college or AA degree
## 6 73564 Female  61 Non-Hispanic White        College graduate or above
## 7 73565   Male  42     Other Hispanic High school graduate/GED or equi
## 8 73566 Female  56 Non-Hispanic White High school graduate/GED or equi
##   born_year
## 1      1952
## 2      1967
## 3      1949
## 4      1948
## 5      1965
## 6      1960
## 7      1979
## 8      1965
\end{verbatim}

\hypertarget{try-it-yourself-22}{%
\subsection{4.9 Try it yourself}\label{try-it-yourself-22}}

Re-write the following code using pipe operator

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# temp \textless{}{-} filter(final\_bpx, systolic \textgreater{} 120)}
\CommentTok{\# temp \textless{}{-} mutate(temp, bpt\_min = bpt\_sec/60)}
\CommentTok{\# temp}
\end{Highlighting}
\end{Shaded}

\textbf{DO QUESTION 14 OF THE QUIZ NOW}
\textgreater{} Fill in the blanks to answer the question in `4.9 Try it yourself':

\begin{quote}
\texttt{\_\_\_} \%\textgreater\%
filter(\texttt{\_\_\_},systolic \textgreater{} 120) \%\textgreater\%
mutate(\texttt{\_\_\_},bpt\_min = bpt\_sec/60)
\end{quote}

\hypertarget{summary-of-dealing-with-missing-values}{%
\section{8. Summary of dealing with missing values}\label{summary-of-dealing-with-missing-values}}

Dealing with missing values can be complex. You need to be careful when using functions since different functions have different ways in dealing with missing values.

filter(): excludes missing values. If you do want to retain missing values, use \textbf{is.na()} explicitly.

arrange(): retains missing values and sorts them at the end

select(): retains missing values

mutate(): retains missing values

summarize(): retains missing values. If you want to remove missing values, set \textbf{na.rm = TRUE} in aggregation functions.

group\_by(): treats missing values as a group

\hypertarget{alternatives-to-nhanestranslate}{%
\section{\texorpdfstring{ALTERNATIVES TO \texttt{NHANESTRANSLATE()}}{ALTERNATIVES TO NHANESTRANSLATE()}}\label{alternatives-to-nhanestranslate}}

\hypertarget{case_when}{%
\subsection{\texorpdfstring{\texttt{case\_when()}}{case\_when()}}\label{case_when}}

\texttt{case\_when()} is another useful function that we can use that will aid our data analysis. This function acts like \texttt{mutate()}, except it changes the actual values of the variable. Here is an example of how we can use \texttt{case\_when()} and \texttt{mutate()} together to change values within a variable:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{97}\NormalTok{, }\DecValTok{36}\NormalTok{, }\DecValTok{55}\NormalTok{, }\DecValTok{50}\NormalTok{, }\DecValTok{49}\NormalTok{, }\DecValTok{65}\NormalTok{, }\DecValTok{46}\NormalTok{, }\DecValTok{87}\NormalTok{, }\DecValTok{100}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{case\_when}\NormalTok{(x }\SpecialCharTok{\textless{}} \DecValTok{50} \SpecialCharTok{\textasciitilde{}} \StringTok{"Fail"}\NormalTok{, }
\NormalTok{          x }\SpecialCharTok{\textgreater{}} \DecValTok{65} \SpecialCharTok{\textasciitilde{}} \StringTok{"Pass"}\NormalTok{, }
          \ConstantTok{TRUE}  \SpecialCharTok{\textasciitilde{}} \StringTok{"Retake recommended"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Pass"               "Fail"               "Retake recommended"
## [4] "Retake recommended" "Fail"               "Retake recommended"
## [7] "Fail"               "Pass"               "Pass"
\end{verbatim}

In the example above, we have a vector of student grades. Using \texttt{case\_when()}, we have translated the grades to ``Fail'', ``Pass'', and ``Retake recommended'' depending on the student grades.
* \textbf{Fail} if students receive a grade of less than 50,
* \textbf{Pass} if students receive a grade of greater than 65,
* \textbf{Retake recommended} if students receive a grade between 50 and 65.

\hypertarget{translating-nhanes-using-case_when}{%
\section{\texorpdfstring{Translating NHANES using \texttt{case\_when()}}{Translating NHANES using case\_when()}}\label{translating-nhanes-using-case_when}}

Another general method for us to translate our NHANES data into conventional language is to use \texttt{mutate()} and \texttt{case\_when()}! However, this method requires us to know what each numerical value of each variable means. For example, if we want to translate the RIDRETH3 values, then we need to check the \href{https://wwwn.cdc.gov/Nchs/Nhanes/2013-2014/DEMO_H.htm}{Codebook and Frequencies} for the following translations:

\begin{itemize}
\tightlist
\item
  1: ``Mexican American''
\item
  2: ``Other Hispanic''
\item
  3: ``Non-Hispanic White''
\item
  4: ``Non-Hispanic Black''
\item
  6: ``Non-Hispanic Asian''
\item
  7: ``Other Race - Including Multi-Racial''
\item
  .: ``Missing''
\end{itemize}

Knowing this, we can use \texttt{mutate()} and \texttt{case\_when()} like so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{translated\_demo }\OtherTok{\textless{}{-}}\NormalTok{ demo }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Race =} \FunctionTok{case\_when}\NormalTok{(}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{1} \SpecialCharTok{\textasciitilde{}} \StringTok{"Mexican American"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{2} \SpecialCharTok{\textasciitilde{}} \StringTok{"Other Hispanic"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{3} \SpecialCharTok{\textasciitilde{}} \StringTok{"Non{-}Hispanic White"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{4} \SpecialCharTok{\textasciitilde{}} \StringTok{"Non{-}Hispanic Black"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{6} \SpecialCharTok{\textasciitilde{}} \StringTok{"Non{-}Hispanic Asian"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{7} \SpecialCharTok{\textasciitilde{}} \StringTok{"Other Race {-} Including Multi{-}Racial"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \StringTok{"."} \SpecialCharTok{\textasciitilde{}} \StringTok{"Missing"}
\NormalTok{      )) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{select}\NormalTok{(}\AttributeTok{ID =}\NormalTok{ SEQN, Race)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(translated\_demo, }\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       ID               Race
## 1  73557 Non-Hispanic Black
## 2  73558 Non-Hispanic White
## 3  73559 Non-Hispanic White
## 4  73560 Non-Hispanic White
## 5  73561 Non-Hispanic White
## 6  73562   Mexican American
## 7  73563 Non-Hispanic White
## 8  73564 Non-Hispanic White
## 9  73565     Other Hispanic
## 10 73566 Non-Hispanic White
\end{verbatim}

But what if we want to have less categories or want to combine some of the categories? What do we do then?

\texttt{case\_when()} is still the way to go! In this case, our codes should look like this:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{less\_categories }\OtherTok{\textless{}{-}}\NormalTok{ demo }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Race =} \FunctionTok{case\_when}\NormalTok{(}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{1} \SpecialCharTok{\textasciitilde{}} \StringTok{"Hispanic"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{2} \SpecialCharTok{\textasciitilde{}} \StringTok{"Hispanic"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{3} \SpecialCharTok{\textasciitilde{}} \StringTok{"White"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{4} \SpecialCharTok{\textasciitilde{}} \StringTok{"Black"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{6} \SpecialCharTok{\textasciitilde{}} \StringTok{"Asian"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \DecValTok{7} \SpecialCharTok{\textasciitilde{}} \StringTok{"Other"}\NormalTok{,}
\NormalTok{          RIDRETH3 }\SpecialCharTok{==} \StringTok{"."} \SpecialCharTok{\textasciitilde{}} \StringTok{"Missing"}
\NormalTok{      )) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{select}\NormalTok{(}\AttributeTok{ID =}\NormalTok{ SEQN, Race)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(less\_categories, }\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       ID     Race
## 1  73557    Black
## 2  73558    White
## 3  73559    White
## 4  73560    White
## 5  73561    White
## 6  73562 Hispanic
## 7  73563    White
## 8  73564    White
## 9  73565 Hispanic
## 10 73566    White
\end{verbatim}

\hypertarget{functions-debunked-17}{%
\subsection{Functions debunked}\label{functions-debunked-17}}

\textbf{\href{https://dplyr.tidyverse.org/reference/case_when.html}{case\_when()}} is a function that we use to change or translate the values of our variables into something else that is still meaningful. The arguments are as follows:

case\_when(
\textgreater{} \textbf{A VARIABLE} == \textbf{value as it is written in the original dataset} \textasciitilde{} \textbf{``NEW/TRANSLATED VALUE''}
)

Note that if none of the cases match, then R will automatically regard it as a missing (NA) value.

\textbf{For example:} \texttt{case\_when(x\ \textless{}\ 50\ \textasciitilde{}\ "Fail",\ x\ \textgreater{}\ 65\ \textasciitilde{}\ "Pass",\ TRUE\ \ \textasciitilde{}\ "Retake\ recommended")}

\hypertarget{recode-from-dplyr}{%
\section{\texorpdfstring{\texttt{recode()} from dplyr}{recode() from dplyr}}\label{recode-from-dplyr}}

Another alternative is \texttt{recode()}. This function works the same way as \texttt{case\_when()}, except you only need to identify the variable once like so:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# demo\_translate2 \textless{}{-} demo \%\textgreater{}\%}
\CommentTok{\#     mutate(Race = dplyr::recode(RIDRETH3,}
\CommentTok{\#            \textasciigrave{}1\textasciigrave{} = "Hispanic",}
\CommentTok{\#            \textasciigrave{}2\textasciigrave{} = "Hispanic",}
\CommentTok{\#            \textasciigrave{}3\textasciigrave{} = "White",}
\CommentTok{\#            \textasciigrave{}4\textasciigrave{} = "Black",}
\CommentTok{\#            \textasciigrave{}6\textasciigrave{} = "Asian",}
\CommentTok{\#            \textasciigrave{}7\textasciigrave{} = "Other",}
\CommentTok{\#           .default = "Missing"}
\CommentTok{\#     )) \%\textgreater{}\%}
\CommentTok{\#     select(ID = SEQN, Race)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# head(demo\_translate2, 10)}
\end{Highlighting}
\end{Shaded}

\hypertarget{recode-from-car}{%
\section{\texorpdfstring{\texttt{recode()} from car}{recode() from car}}\label{recode-from-car}}

Another option is to use \texttt{recode()} from the car package. This function is mostly used for translating numerical data into more meaningful character data or strings.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(car)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Loading required package: carData
\end{verbatim}

\begin{verbatim}
## 
## Attaching package: 'car'
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:dplyr':
## 
##     recode
\end{verbatim}

While looking at the codes below, take note of the different types of quotation marks: single ('\,') or double ("") and the semi-colon (;) as the argument separator. Note also how we can use \texttt{1:2} instead of separating them into 1 and 2 like what we did with earlier functions.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo\_translate3 }\OtherTok{\textless{}{-}}\NormalTok{ demo }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Race =}\NormalTok{ car}\SpecialCharTok{::}\FunctionTok{recode}\NormalTok{(RIDRETH3,}
        \StringTok{"1:2 = \textquotesingle{}Hispanic\textquotesingle{};}
\StringTok{         3 = \textquotesingle{}White\textquotesingle{};}
\StringTok{         4 = \textquotesingle{}Black\textquotesingle{};}
\StringTok{         6 = \textquotesingle{}Asian\textquotesingle{};}
\StringTok{         7 = \textquotesingle{}Other\textquotesingle{};}
\StringTok{         else = \textquotesingle{}Missing\textquotesingle{}"}
\NormalTok{    )) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{select}\NormalTok{(}\AttributeTok{ID =}\NormalTok{ SEQN, Race)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo\_translate3, }\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       ID     Race
## 1  73557    Black
## 2  73558    White
## 3  73559    White
## 4  73560    White
## 5  73561    White
## 6  73562 Hispanic
## 7  73563    White
## 8  73564    White
## 9  73565 Hispanic
## 10 73566    White
\end{verbatim}

\hypertarget{takeaways-2}{%
\section{TAKEAWAYS}\label{takeaways-2}}

By the end of this tutorial, you should be familiar with the dplyr package and be able to do basic data wrangling by yourself.

For more study materials on the dplyr package, check out this \href{https://learning.oreilly.com/library/view/r-for-data/9781491910382/ch03.html\#transform}{textbook}.

\hypertarget{data-visualization-with-ggplot2}{%
\chapter{Data Visualization with ggplot2}\label{data-visualization-with-ggplot2}}

\hypertarget{instructions-5}{%
\section{INSTRUCTIONS}\label{instructions-5}}

This tutorial will introduce us to data visualization on R, specially using the ggplot R package. For this purpose, we will focus on the basic and most commonly used functions of the ggplot package. We will be able to read through the step-by-step instructions on how to use each function as well as its different arguments.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/yUvW9Sg8mqEozyYu8}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives-5}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives-5}}

\begin{itemize}
\tightlist
\item
  Be familiar with the basics of ggplot including how to graph basic scatterplot (with smoothed conditional means), line graph, bar graph, and bar chart using geometric functions.
\item
  Get a brief understanding of coordinate functions with special emphasis on \texttt{coord\_flip()} and \texttt{coord\_polar()}.
\item
  Be able to create gridded subplots using facet functions.
\item
  Know how to customize a graph to our own liking - including changing the texts, font, size, and color.
\item
  Know how to export the final graph into a png file using \texttt{ggsave()}.
\end{itemize}

\hypertarget{set-up-2}{%
\section{1. SET UP}\label{set-up-2}}

\hypertarget{loading-required-packages}{%
\subsection{Loading required packages}\label{loading-required-packages}}

For this tutorial, we will only be focusing on the ggplot2 package. But we will also be using a few functions from the readr and dplyr packages from the previous tutorials.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("dplyr")}
\FunctionTok{library}\NormalTok{(dplyr)}

\CommentTok{\#install.packages("readr")}
\FunctionTok{library}\NormalTok{(readr)}

\CommentTok{\#install.packages("ggplot2")}
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\hypertarget{importing-data}{%
\subsection{Importing Data}\label{importing-data}}

Like we have learned in the previous tutorial, the first step after loading the required packages is to import the data that we will be working with! In this tutorial, we will be working with the same Demographics and Blood Pressure datasets from NHANES. However, to make things easier for us, a dataset consisting of both Demographics and Blood Pressure information have already been created, translated, and combined. As a challenge (this is completely optional), you can try to recreate this data frame on your own! Here is more information about the data frame we will be using for this tutorial:
* Its name is ``demo\_bpx.csv'' - it is a csv file
* It contains the Respondent Sequence Number of each participant, along with their reported Gender, Race, Systolic and Diastolic Blood Pressures, and Blood Pressure Time in seconds. The first three are from the DEMO\_H dataset, the rest are from the BPX\_H dataset.
* It only contains information of the first 200 participants.
* The first column (X1) is automatically added by R.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo\_bpx }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/demo\_bpx.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## New names:
## * `` -> ...1
\end{verbatim}

\begin{verbatim}
## Rows: 210 Columns: 7
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (2): Gender, Race
## dbl (5): ...1, ID, Systolic, Diastolic, BPT
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo\_bpx)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 7
##    ...1    ID Gender Race               Systolic Diastolic   BPT
##   <dbl> <dbl> <chr>  <chr>                 <dbl>     <dbl> <dbl>
## 1     1 73557 Male   Non-Hispanic Black      114        76   620
## 2     2 73558 Male   Non-Hispanic White      160        80   766
## 3     3 73559 Male   Non-Hispanic White      140        76   665
## 4     4 73560 Male   Non-Hispanic White      102        34   803
## 5     5 73561 Female Non-Hispanic White      134        88   949
## 6     6 73562 Male   Mexican American        158        82  1064
\end{verbatim}

\hypertarget{do-question-1-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 1 OF THE QUIZ NOW}\label{do-question-1-of-the-quiz-now-1}}

\begin{quote}
\textbf{REVIEW} What is the name of the core that the packages readr, dplyr, and ggplot2 belong to?
\end{quote}

\hypertarget{ggplot-and-point-geometrics}{%
\section{2. GGPLOT AND POINT GEOMETRICS}\label{ggplot-and-point-geometrics}}

Now that our dataset is all set up, it's time to plot our first graph! First, we need to start with an empty canvas and to do this, we need \texttt{ggplot()} as our base. Try running \texttt{ggplot()} alone. What do you see?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-183-1.pdf}

If you answered ``nothing'' then you are completely right! Again, \texttt{ggplot()} alone only acts as a blank canvas. Usually, we would only have the dataset that we want to plot in the \texttt{()} of \texttt{ggplot()}. For example:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-184-1.pdf}

As for the actual graph, in order to plot it, we need geometric functions.

\hypertarget{point-geometrics}{%
\subsection{Point Geometrics}\label{point-geometrics}}

Point geometrics, \texttt{geom\_point()}, lets you graph scatterplots. The most basic argument that you can nest in \texttt{geom\_point()} is \texttt{aes(x,\ y)} which basically tells \texttt{geom\_point()} the x and y variables that you want to graph! \texttt{aes} stands for ``aesthetics'', we will cover more of this later in this tutorial.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }
                   \AttributeTok{y =}\NormalTok{ Diastolic), }
               \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{,}
               \AttributeTok{show.legend =} \ConstantTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-185-1.pdf}

As you can see, point geometrics (and all other geometric functions) always have to go after our \texttt{ggplot()} function. In addition, note that \texttt{ggplot()} and \texttt{geom\_point()} are separated by a \texttt{+}.

\hypertarget{functions-debunked-18}{%
\subsubsection{Functions debunked}\label{functions-debunked-18}}

\href{https://ggplot2.tidyverse.org/reference/ggplot.html}{\textbf{ggplot}} is our blank canvas - this function is housed in the ggplot2 package! The arguments are as follows:

ggplot(
\textgreater{} \textbf{NAME OF DATAFRAME},

\begin{quote}
aes(x = \textbf{VARIABLE ON THE X AXIS}, y = \textbf{VARIABLE ON THE Y AXIS})
\end{quote}

)

\href{https://ggplot2.tidyverse.org/reference/geom_point.html}{\textbf{geom\_point}} is the function we use to draw scatterplots - it is also housed in the ggplot2 package. The arguments that will be covered in this tutorial are as follows - you are welcomed to explore this function in more detail on your own:

geom\_point(
\textgreater{} aes(\textbf{AESTHETICS} - to be covered later in the tutorial),

\begin{quote}
na.rm = \textbf{TRUE OR FALSE},
\end{quote}

\begin{quote}
show.legend = \textbf{TRUE OR FALSE}
\end{quote}

)

\textbf{For example:} \texttt{ggplot(demo\_bpx)\ +\ geom\_point(aes(x\ =\ Systolic,\ y\ =\ Diastolic,\ color\ =\ Gender),\ na.rm\ =\ TRUE)}

\hypertarget{do-questions-2-3-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 2 \& 3 OF THE QUIZ NOW}\label{do-questions-2-3-of-the-quiz-now}}

\textbf{HINT}: We've covered how to look for help within and outside of R in our very first tutorial: Basics of R and RStudio.

\begin{quote}
What do you think the argument \texttt{na.rm\ =\ TRUE} does?
\end{quote}

\begin{quote}
What do you think the argument \texttt{show.legend\ =\ TRUE} does?
\end{quote}

\hypertarget{try-it-yourself-23}{%
\subsection{1.1 Try it yourself}\label{try-it-yourself-23}}

Plot a scatterplot to show the relationship between Diastolic Blood Pressure (x-axis) and Blood Pressure Time in Seconds (y-axis).

\hypertarget{do-question-4-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 4 OF THE QUIZ NOW}\label{do-question-4-of-the-quiz-now-1}}

\begin{quote}
What does the ``Try it yourself'' graph above look like?
\end{quote}

\hypertarget{aesthetics}{%
\subsection{Aesthetics}\label{aesthetics}}

Besides the x and y axes, there are other aesthetics that you can use to customize your graph as well! For example, you can change the color, size, opacity, and shape of your data points based on a particular variable of the dataset!

\hypertarget{colors}{%
\subsubsection{Colors}\label{colors}}

We can tell ggplot to use different colors for different genders using the argument \texttt{color\ =} like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic,}
                 \AttributeTok{y =}\NormalTok{ Diastolic,}
                 \AttributeTok{color =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-186-1.pdf}

\hypertarget{missing-values-3}{%
\paragraph{Missing Values}\label{missing-values-3}}

Looking at the graph above, we can see that there are a few NA data points for the variable gender. Let's rename all of these NA values to ``Unstated'', instead, to more accurately represent our data. To do this, we need to use the \texttt{replace\_na()} function from the tidyr package like so:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("tidry")}
\FunctionTok{library}\NormalTok{(tidyr)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo\_bpx }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{replace\_na}\NormalTok{(}\FunctionTok{list}\NormalTok{(}\AttributeTok{Gender =} \StringTok{"Unstated"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{ggplot}\NormalTok{() }\SpecialCharTok{+} 
        \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }
                       \AttributeTok{y =}\NormalTok{ Diastolic, }
                       \AttributeTok{color =}\NormalTok{ Gender), }
                   \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-188-1.pdf}

\hypertarget{shapes}{%
\subsubsection{Shapes}\label{shapes}}

We can also use different shapes to represent the different genders in our dataset. To do this, we use the argument \texttt{shapes\ =}. This argument is more appropriate to use this argument when we are trying to distinguish between discrete variables since there are no in-between shapes to accurately reflect continuous variables!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic,}
                 \AttributeTok{y =}\NormalTok{ Diastolic,}
                 \AttributeTok{shape =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-189-1.pdf}

\hypertarget{size}{%
\subsubsection{Size}\label{size}}

You can also change the size of your data points using the argument \texttt{size\ =} and then any number. You can also use this argument to distinguish data points of different genders with different point sizes, but this is not recommended. If you want to plot points of different sizes, it is most appropriate if you use it to distinguish a particular continuous variable.

In the example below, not how the argument \texttt{size\ =\ 2} is outside of the aesthetics bracket. This tells R that we want ALL of our data points to be of the same size 2.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic),}
             \AttributeTok{size =} \DecValTok{2}\NormalTok{,}
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{,)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-190-1.pdf}

\hypertarget{opacity}{%
\subsubsection{Opacity}\label{opacity}}

Similar to size, if using opacity as an indication of different categories of a variable is most appropriate if the variable is continuous. So in the example below, the graph shows all data points with the same opacity because the argument \texttt{alpha\ =\ 11} is outside of the aesthetics brackets.

Also note that alpha values range from 0 to 1. The other neat thing about changing the data points opacity is that we can identify where data points overlap. For example, in the graph below, you can see some data points are darker than others. This means that those data points have multiple replicates!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic),}
             \AttributeTok{alpha =} \FloatTok{0.5}\NormalTok{,}
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-191-1.pdf}

Why do you think some point aesthetics better demonstrate discrete variables while others better demonstrate continuous variables?

\hypertarget{jitter-position}{%
\subsubsection{Jitter Position}\label{jitter-position}}

After the graph above, you, hopefully, should have noticed that there are a lot of overlapping points in our dataset. To address this issue of overplotting, we can add random noise to each point to spread points out because no two points are likely to have same random noise. We can do this by nesting the position/argument jitter to our scatterplot like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }
                 \AttributeTok{y =}\NormalTok{ Diastolic, }
                 \AttributeTok{color =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{,}
             \AttributeTok{position =} \StringTok{"jitter"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-192-1.pdf}

\hypertarget{try-it-yourself-24}{%
\subsection{1.2 Try it yourself}\label{try-it-yourself-24}}

Plot a scatterplot using the Diastolic (x-axis) and Systolic (y-axis) variables in the data frame demo\_bpx where all of the data points are blue.

\hypertarget{do-question-5-of-the-quiz-now-2}{%
\subsubsection{DO QUESTION 5 OF THE QUIZ NOW}\label{do-question-5-of-the-quiz-now-2}}

\begin{quote}
Which is the correct code for the question above?
\end{quote}

\hypertarget{multiple-geometric-functions-under-one-ggplot}{%
\section{3. MULTIPLE GEOMETRIC FUNCTIONS UNDER ONE GGPLOT}\label{multiple-geometric-functions-under-one-ggplot}}

Now that you're more familiar with \texttt{ggplot()} and \texttt{geom\_point()}, we can try layering multiple graph types in one single ggplot canvas! For example, we can layer a line graph on top of a scatterplot.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic, }\AttributeTok{color =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{geom\_smooth}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic), }
              \AttributeTok{method =} \StringTok{"loess"}\NormalTok{, }
              \AttributeTok{formula =}\NormalTok{ y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x, }
              \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-193-1.pdf}

To clean up our codes even more, we can nest the aesthetics into the \texttt{ggplot()} function instead of the geometric functions. But note that everything you nest in your \texttt{ggplot()} will be applied to all following geometrics.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic)) }\SpecialCharTok{+} 
    \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =}\NormalTok{ Gender), }
               \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+} 
    \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"loess"}\NormalTok{,}
                \AttributeTok{formula =}\NormalTok{ y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x,}
                \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-194-1.pdf}

\hypertarget{functions-debunked-19}{%
\subsubsection{Functions debunked}\label{functions-debunked-19}}

\href{https://ggplot2.tidyverse.org/reference/ggplot.html}{\textbf{geom\_smooth}} is how we show the smoothed conditional means line on our scatterplot. The arguments are as follows:

geom\_smooth(
\textgreater{} mapping = aes(\textbf{AESTHETICS}),

\begin{quote}
method = \textbf{``SMOOTHING METHOD (FUNCTION)''}, e.g.~loess, gam, lm, glm
\end{quote}

\begin{quote}
formula = \textbf{FORMULA TO USE IN SMOOTHING FUNCTION}, usually y \textasciitilde{} x when there are less than 1,000 observations
\end{quote}

\begin{quote}
na.rm = \textbf{TRUE OR FALSE},
\end{quote}

\begin{quote}
show.legend = \textbf{TRUE OR FALSE},
\end{quote}

\begin{quote}
se = \textbf{TRUE OR FALSE}
\end{quote}

)

\hypertarget{do-question-6-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 6 OF THE QUIZ NOW}\label{do-question-6-of-the-quiz-now-1}}

\begin{quote}
What do you think the argument \texttt{se\ =\ FALSE} does?
\end{quote}

\hypertarget{other-geometric-functions}{%
\section{5. OTHER GEOMETRIC FUNCTIONS}\label{other-geometric-functions}}

Aside from \texttt{geom\_point()}, there are other geometric functions that we can use to plot different types of graphs. Note that this list of geometrics functions is not extensive, and you are encouraged to explore more about them on R using the \texttt{?} or \texttt{??} command or on this \href{https://ggplot2.tidyverse.org/reference/}{website} about ggplot!

\hypertarget{bar-graph}{%
\subsection{Bar graph}\label{bar-graph}}

We use \texttt{geom\_bar()} to create bar graphs. Different than \texttt{geom\_point()}, \texttt{geom\_bar()} only needs us to define either the x or y aesthetic, not both. This is because one of the axes needs to be the count of whatever variable we chose! For example, if we want to count how many individuals there are of each reported gender:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
    \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Gender))}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-195-1.pdf}

We can also tell R to calculate the proportion of each gender instead of counting:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
    \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Gender, }\AttributeTok{y =}\NormalTok{ ..prop.., }\AttributeTok{group =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-196-1.pdf}

\hypertarget{fill-position}{%
\subsubsection{Fill Position}\label{fill-position}}

A neat argument/position that we can nest in \texttt{geom\_bar()} is fill. Fill lets us add another variable to our graph and further divides up our columns into separate categories. For example, if we want to know the different combination of genders and races in our dataset:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
    \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Gender, }\AttributeTok{fill =}\NormalTok{ Race))}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-197-1.pdf}

\hypertarget{dodge-position}{%
\subsubsection{Dodge Position}\label{dodge-position}}

Another option is the dogdge argument/position. This argument separates our columns into smaller, side-by-side columns so we can easily compare the different variables.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Gender, }\AttributeTok{fill =}\NormalTok{ Race), }
           \AttributeTok{position =} \StringTok{"dodge"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-198-1.pdf}

Another way that we can choose to present our bar graph is in the form of a circular graph. To do this, we can add another function \texttt{coord\_polar()} to our ggplot canvas.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Gender)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{coord\_polar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-199-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Race)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{coord\_polar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-200-1.pdf}

\hypertarget{line-graph}{%
\subsection{Line Graph}\label{line-graph}}

Another graph type that the ggplot R package offers is line graph. To plot a line graph, we use the function \texttt{geom\_line()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_line}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-201-1.pdf}

Line graphs may also be an interesting way for us to demonstrate ranges of a particular continuous variable of a categorical variable. For example, we can see the range of Systolic Blood Pressures of different races with the following graph:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_line}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Race), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-202-1.pdf}

\hypertarget{boxplot}{%
\subsection{Boxplot}\label{boxplot}}

If you are not a fan of the line graph above, boxplots is another option that we can explore together. To plot a boxplot, we use \texttt{geom\_boxplot()} like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Race)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{(}\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-203-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Gender, }\AttributeTok{y =}\NormalTok{ Diastolic)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{(}\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-204-1.pdf}

\hypertarget{frequency-polygon}{%
\subsection{Frequency Polygon}\label{frequency-polygon}}

Frequency polygon is another option that we can explore. They are similar to bar graphs, except frequency polygon visualize the counts with lines. We can plot frequency polygons using \texttt{geom\_freqpoly()} like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic), }\AttributeTok{binwidth =} \DecValTok{5}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-205-1.pdf}

Since \texttt{geom\_freqpoly()} divides the variable in the x axis into bins before counting the number of observations in each bin, we can further customize how we want our frequency polygon to look by changing the binwidth.

\hypertarget{try-it-yourself-25}{%
\subsection{1.3 Try it yourself}\label{try-it-yourself-25}}

Try increasing and decreasing the binwidth of a frequency polygon. What differences do you see? What does binwidth actually mean?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic), }\AttributeTok{binwidth =} \DecValTok{1}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-206-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic), }\AttributeTok{binwidth =} \DecValTok{20}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-207-1.pdf}

We can also layer multiple \texttt{geom\_freqpoly()} on each other and give them different colors:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{color =} \StringTok{"Systolic"}\NormalTok{), }\AttributeTok{binwidth =} \DecValTok{10}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Diastolic, }\AttributeTok{color =} \StringTok{"Diastolic"}\NormalTok{), }\AttributeTok{binwidth =} \DecValTok{10}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-208-1.pdf}

You may notice that the x axis label for the graph above is incorrect! And the legend title is also wrong. Don't worry! We will go over how to manually add and edit graph elements later in this tutorial.

\hypertarget{do-questions-7-8-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 7 \& 8 OF THE QUIZ NOW}\label{do-questions-7-8-of-the-quiz-now}}

\begin{quote}
Increasing the binwidth of a bar graph makes the graph more detailed. (True or False)
\end{quote}

\begin{quote}
Match the geometrics with the correct graph type.
\end{quote}

\hypertarget{facet-functions}{%
\section{6. FACET FUNCTIONS}\label{facet-functions}}

Aside from using aesthetics, \texttt{facet\_wrap()} is another good option to create subplots based on categorical variables. You can create divide the data up into subplots by 1 or 2 variables. Run the codes below to see what these two situations would look like.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Diastolic, }\AttributeTok{y =}\NormalTok{ Systolic), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{facet\_wrap}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{ Gender, }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-209-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Diastolic, }\AttributeTok{y =}\NormalTok{ Systolic), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{facet\_grid}\NormalTok{(Race }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Gender)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-210-1.pdf}

\hypertarget{do-question-9-on-canvas-now}{%
\subsubsection{DO QUESTION 9 ON CANVAS NOW}\label{do-question-9-on-canvas-now}}

\begin{quote}
It is most useful to use facet functions when plotting continuous variables.
\end{quote}

\hypertarget{try-it-yourself-26}{%
\subsection{1.4 Try it yourself}\label{try-it-yourself-26}}

Try recreating the graph above but without any missing (NA) values.

\textbf{HINT}: Filter out any information we do not need using logical operators!

\hypertarget{customizing-graph-elements}{%
\section{7. CUSTOMIZING GRAPH ELEMENTS}\label{customizing-graph-elements}}

We can customize how our graph looks like with different graph elements including graph title, axes labels, legendes, etc. In this section, we will cover as many graph elements as possible.

But for your own information and exploration, more information on editing graph elements can be found \href{http://environmentalcomputing.net/plotting-with-ggplot-adding-titles-and-axis-names/}{here}. Here is also a \href{http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf}{list of colors} that R recognizes that may come in handy.

Going back to the frequency polygon above where the x axis label is incorrect, this is what the code for the correct graph would look like:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+} 
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{color =} \StringTok{"Systolic"}\NormalTok{), }\AttributeTok{binwidth =} \DecValTok{10}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Diastolic, }\AttributeTok{color =} \StringTok{"Diastolic"}\NormalTok{), }\AttributeTok{binwidth =} \DecValTok{10}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{labs}\NormalTok{(}\AttributeTok{x =} \StringTok{"Blood Pressure (Hg mm)"}\NormalTok{, }\AttributeTok{color =} \StringTok{"Type of Blood Pressure"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-211-1.pdf}

The first three lines of codes are similar to what we have previously, and the last one is new. Let's go over the last line of codes together in the following functions debunked.

\hypertarget{functions-debunked-20}{%
\subsubsection{Functions Debunked}\label{functions-debunked-20}}

\texttt{labs} lets us change the axes labels, graph title, and legend title! The basic arguments are as follows:

\textbf{\href{https://ggplot2.tidyverse.org/reference/labs.html}{labs}}(

\begin{quote}
title = ``\textbf{TITLE OF GRAPH}'',
\end{quote}

\begin{quote}
x = ``\textbf{X AXIS LABEL}'',
\end{quote}

\begin{quote}
y = ``\textbf{Y AXIS LABEL}'',
\end{quote}

\begin{quote}
color = ``\textbf{LEGEND TITLE}''
\end{quote}

)

\textbf{For example:} \texttt{labs(x\ =\ "Blood\ Pressure\ (Hg\ mm)",\ color\ =\ "Legend")}

We can customize our graphs even more by changing the texts' fonts, emphasis, or even size! To do this, we can nest multiple arguments in a function called \texttt{theme()}. Going back to the main objective of our tutorial: create a graph that shows the relationship between Diastolic and Systolic Blood Pressure of the first 200 Males and Females in the 2013-2014 NHANES datasets, let us recall what that graph originally looks like:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
    \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic, }\AttributeTok{color =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{,}
             \AttributeTok{position =} \StringTok{"jitter"}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{geom\_smooth}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic),}
                \AttributeTok{method =} \StringTok{"loess"}\NormalTok{,}
                \AttributeTok{formula =}\NormalTok{ y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x,}
                \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-212-1.pdf}

Now, we can change the axes labels, legend title, and add a graph title using \texttt{labs()}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}
    \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic, }\AttributeTok{color =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{,}
             \AttributeTok{position =} \StringTok{"jitter"}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{geom\_smooth}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic), }
                \AttributeTok{method =} \StringTok{"loess"}\NormalTok{,}
                \AttributeTok{formula =}\NormalTok{ y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x,}
                \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+} 
    \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Systolic vs. Diastolic Blood Pressures of Different Genders"}\NormalTok{,}
         \AttributeTok{x =} \StringTok{"Systolic Blood Pressure (mm Hg)"}\NormalTok{, }
         \AttributeTok{y =} \StringTok{"Diastolic Blood Pressure (mm Hg)"}\NormalTok{,}
         \AttributeTok{color =} \StringTok{"Genders of Respondents"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-213-1.pdf}

After that, we can use \texttt{theme()} to change the font, emphasis, size, and color of our texts.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}

    \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic, }\AttributeTok{color =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{,}
             \AttributeTok{position =} \StringTok{"jitter"}\NormalTok{) }\SpecialCharTok{+}
    
    \FunctionTok{geom\_smooth}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic),}
                \AttributeTok{method =} \StringTok{"loess"}\NormalTok{,}
                \AttributeTok{formula =}\NormalTok{ y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x,}
                \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+} 
    
    \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Systolic vs. Diastolic Blood Pressures of Different Genders"}\NormalTok{,}
         \AttributeTok{x =} \StringTok{"Systolic Blood Pressure (mm Hg)"}\NormalTok{, }
         \AttributeTok{y =} \StringTok{"Diastolic Blood Pressure (mm Hg)"}\NormalTok{,}
         \AttributeTok{color =} \StringTok{"Genders of Respondents"}\NormalTok{) }\SpecialCharTok{+}

    \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{, }\AttributeTok{size =} \DecValTok{20}\NormalTok{, }\AttributeTok{color =} \StringTok{"cyan4"}\NormalTok{),}
          \AttributeTok{axis.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{size =} \DecValTok{15}\NormalTok{),}
          \AttributeTok{axis.text =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{size =} \DecValTok{12}\NormalTok{),}
          \AttributeTok{legend.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{face =} \StringTok{"italic"}\NormalTok{, }\AttributeTok{size =} \DecValTok{15}\NormalTok{), }
          \AttributeTok{legend.text =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{size =} \DecValTok{12}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-214-1.pdf}

\hypertarget{functions-debunked-21}{%
\subsubsection{Functions Debunked}\label{functions-debunked-21}}

Some basic arguments of \texttt{theme()} are as follows:

\textbf{\href{https://ggplot2.tidyverse.org/reference/theme.html}{theme}}(

\begin{quote}
plot.title = element\_text(family = ``\textbf{FONT NAME}'', face = ``\textbf{EMPHASIS TYPE}, size = \textbf{SIZE NUMBER}, color =''\textbf{A COLOR THAT R RECOGNIZES}"),
\end{quote}

\begin{quote}
axis.title = {[}\emph{same arguments as before}{]},
\end{quote}

\begin{quote}
axis.text = {[}\emph{same arguments as before}{]},
\end{quote}

\begin{quote}
legend.title = {[}\emph{same arguments as before}{]},
\end{quote}

\begin{quote}
legend.text = {[}\emph{same arguments as before}{]}
\end{quote}

)

\textbf{For example:} \texttt{theme(plot.title\ =\ element\_text(family\ =\ "Helvetica",\ face\ =\ "bold",\ size\ =\ 20,\ color\ =\ "cyan4"))}

\hypertarget{do-question-10-of-the-quiz-now-2}{%
\subsubsection{DO QUESTION 10 OF THE QUIZ NOW}\label{do-question-10-of-the-quiz-now-2}}

\begin{quote}
What is the difference between \texttt{legend.title} and \texttt{legend.text}?
\end{quote}

\hypertarget{try-it-yourself-27}{%
\subsection{1.5 Try it yourself}\label{try-it-yourself-27}}

Customize your own graph using the functions we just learned above!

\hypertarget{saving-our-graph}{%
\section{8. SAVING OUR GRAPH}\label{saving-our-graph}}

To explort our graph into a file like png, pdf, or jpeg, we can use the function \texttt{ggsave()} followed by the name that we want the file to have. To simplify this process, we can give our graph a name such as ``Final\_plot'' using \texttt{\textless{}-}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Final\_plot }\OtherTok{\textless{}{-}} 

    \FunctionTok{ggplot}\NormalTok{(demo\_bpx) }\SpecialCharTok{+}

    \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic, }\AttributeTok{color =}\NormalTok{ Gender), }
             \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{,}
             \AttributeTok{position =} \StringTok{"jitter"}\NormalTok{) }\SpecialCharTok{+}
    
    \FunctionTok{geom\_smooth}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Systolic, }\AttributeTok{y =}\NormalTok{ Diastolic), }
                \AttributeTok{method =} \StringTok{"loess"}\NormalTok{,}
                \AttributeTok{formula =}\NormalTok{ y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x,}
                \AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+} 
    
    \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Systolic vs. Diastolic Blood Pressures of Different Genders"}\NormalTok{,}
         \AttributeTok{x =} \StringTok{"Systolic Blood Pressure (mm Hg)"}\NormalTok{, }
         \AttributeTok{y =} \StringTok{"Diastolic Blood Pressure (mm Hg)"}\NormalTok{,}
         \AttributeTok{color =} \StringTok{"Genders of Respondents"}\NormalTok{) }\SpecialCharTok{+}

    \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{, }\AttributeTok{size =} \DecValTok{20}\NormalTok{, }\AttributeTok{color =} \StringTok{"cyan4"}\NormalTok{),}
          \AttributeTok{axis.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{size =} \DecValTok{15}\NormalTok{),}
          \AttributeTok{axis.text =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{size =} \DecValTok{12}\NormalTok{),}
          \AttributeTok{legend.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{face =} \StringTok{"italic"}\NormalTok{, }\AttributeTok{size =} \DecValTok{15}\NormalTok{), }
          \AttributeTok{legend.text =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{family =} \StringTok{"Helvetica"}\NormalTok{, }\AttributeTok{size =} \DecValTok{12}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggsave}\NormalTok{(}\StringTok{"images/Final plot.png"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Saving 6.5 x 4.5 in image
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family not
## found in Windows font database

## Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family not
## found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family not
## found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
## font family not found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database
\end{verbatim}

By default, \texttt{ggsave()} will save the last plot that we ran before it. But we can also tell it exactly which plot we are referring to using another argument after the file name.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggsave}\NormalTok{(}\StringTok{"images/Final plot{-}1.png"}\NormalTok{, Final\_plot)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Saving 6.5 x 4.5 in image
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
## font family not found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database
\end{verbatim}

We can also change the width and height of our saved file. Remember to specify the units as well!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggsave}\NormalTok{(}\StringTok{"images/Final plot{-}2.png"}\NormalTok{, Final\_plot, }\AttributeTok{width =} \DecValTok{40}\NormalTok{, }\AttributeTok{height =} \DecValTok{30}\NormalTok{, }\AttributeTok{units =} \StringTok{\textquotesingle{}cm\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
## font family not found in Windows font database
\end{verbatim}

\begin{verbatim}
## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database

## Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
## family not found in Windows font database
\end{verbatim}

More information on \texttt{ggsave()} can be found \href{https://www.rdocumentation.org/packages/ggplot2/versions/3.3.3/topics/ggsave}{here}.

Now we can check our working directory to see if all of our graphs are there.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dir}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "_book"                                 
##  [2] "_bookdown.yml"                         
##  [3] "_bookdown_files"                       
##  [4] "_build.sh"                             
##  [5] "_deploy.sh"                            
##  [6] "_output.yml"                           
##  [7] "0-r-and-rstudio-set-up.Rmd"            
##  [8] "1-introduction-to-r.Rmd"               
##  [9] "2-importing-data-into-r-with-readr.Rmd"
## [10] "3-introduction-to-nhanes.Rmd"          
## [11] "4-data-analysis-with-dplyr.Rmd"        
## [12] "5-data-visualization-with-ggplot.Rmd"  
## [13] "6-date-time-data-with-lubridate.Rmd"   
## [14] "7-data-summary-with-tableone.Rmd"      
## [15] "8-Exercise-Solutions.Rmd"              
## [16] "9-references.Rmd"                      
## [17] "book.bib"                              
## [18] "data"                                  
## [19] "DESCRIPTION"                           
## [20] "Dockerfile"                            
## [21] "docs"                                  
## [22] "header.html"                           
## [23] "images"                                
## [24] "index.Rmd"                             
## [25] "intro2R.Rmd"                           
## [26] "intro2R_cache"                         
## [27] "intro2R_files"                         
## [28] "LICENSE"                               
## [29] "now.json"                              
## [30] "packages.bib"                          
## [31] "preamble.tex"                          
## [32] "R.Rproj"                               
## [33] "README.md"                             
## [34] "style.css"                             
## [35] "toc.css"
\end{verbatim}

If there is a present file that you think should not be there, we can use the function \texttt{file.remove()} followed by the name of the file to remove it.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{file.remove}\NormalTok{(}\StringTok{"Rplot001.png"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in file.remove("Rplot001.png"): cannot remove file 'Rplot001.png',
## reason 'No such file or directory'
\end{verbatim}

\begin{verbatim}
## [1] FALSE
\end{verbatim}

Then, we can check our directory again and all of the relevant files should be there!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dir}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "_book"                                 
##  [2] "_bookdown.yml"                         
##  [3] "_bookdown_files"                       
##  [4] "_build.sh"                             
##  [5] "_deploy.sh"                            
##  [6] "_output.yml"                           
##  [7] "0-r-and-rstudio-set-up.Rmd"            
##  [8] "1-introduction-to-r.Rmd"               
##  [9] "2-importing-data-into-r-with-readr.Rmd"
## [10] "3-introduction-to-nhanes.Rmd"          
## [11] "4-data-analysis-with-dplyr.Rmd"        
## [12] "5-data-visualization-with-ggplot.Rmd"  
## [13] "6-date-time-data-with-lubridate.Rmd"   
## [14] "7-data-summary-with-tableone.Rmd"      
## [15] "8-Exercise-Solutions.Rmd"              
## [16] "9-references.Rmd"                      
## [17] "book.bib"                              
## [18] "data"                                  
## [19] "DESCRIPTION"                           
## [20] "Dockerfile"                            
## [21] "docs"                                  
## [22] "header.html"                           
## [23] "images"                                
## [24] "index.Rmd"                             
## [25] "intro2R.Rmd"                           
## [26] "intro2R_cache"                         
## [27] "intro2R_files"                         
## [28] "LICENSE"                               
## [29] "now.json"                              
## [30] "packages.bib"                          
## [31] "preamble.tex"                          
## [32] "R.Rproj"                               
## [33] "README.md"                             
## [34] "style.css"                             
## [35] "toc.css"
\end{verbatim}

We've reached the end of our tutorial! Note that this tutorial only covers the basics of ggplot. ggplot is a large package and you are encouraged to explore the many functions that it offers on your own. And remember that it takes practice to be fluent in this language!

\hypertarget{summary-and-takeaways}{%
\section{9. SUMMARY AND TAKEAWAYS}\label{summary-and-takeaways}}

By the end of this tutorial, you should be somewhat familiar with the ggplot package including how to create a basic graph on R as well as how to customize it to your liking.

If you are interested in learning more about ggplot, this \href{https://ggplot2.tidyverse.org/}{website} is also a good resource for you to tap into.

Here is also a \href{https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf}{cheat sheet} of more ggplot functions.

\hypertarget{date-time-data-with-lubridate}{%
\chapter{Date \& Time Data with lubridate}\label{date-time-data-with-lubridate}}

\hypertarget{instructions-6}{%
\section{INSTRUCTIONS}\label{instructions-6}}

In this tutorial, we will be exploring how to deal with date/time data in R using the lubridate package. This incudes creating new, retrieving information from existing, modifying, and conduct different arithmetic calculations on date/time data. We will also be plotting date/time data to visualize our dataset.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/zt9vGevq3zuqGBTG8}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives-6}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives-6}}

\begin{itemize}
\tightlist
\item
  Understand the basics of the lubridate package and its simple datetime functions.
\item
  Know how to create date, time, and datetime data on R.
\item
  Know how to retrieve information from date/time data
\item
  Know how to modify date/time data
\item
  Know how to add, subtract, multiply, divide date/time data
\item
  Be familiar with graphs with date/time data.
\end{itemize}

\hypertarget{set-up-3}{%
\section{1. SET UP}\label{set-up-3}}

For this tutorial, we will need the \textbf{lubridate} package with functions that will allow us to deal with date/time data. This package is also part of the tidyverse core that also houses readr, dplyr, and ggplot2.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages(lubridate)}
\FunctionTok{library}\NormalTok{(lubridate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'lubridate'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     date, intersect, setdiff, union
\end{verbatim}

We will also be using the \textbf{Friend visits.csv} dataset. This dataset was especially prepared for this tutorial, and it includes specific data that will help us understand lubridate more! In short, this made-up dataset contains information about the times that our host(s) had friends over and the times that they left.

Let's import this dataset into R now using \texttt{read\_csv()} from the package readr.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("readr")}
\FunctionTok{library}\NormalTok{(readr)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{visits }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data/Friends visits.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 365 Columns: 8
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## dbl (8): Friend, Year, Month, Day, Hour, Minute, Second, Left_time
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(visits)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 8
##   Friend  Year Month   Day  Hour Minute Second Left_time
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl>     <dbl>
## 1      1  2015     1     1    19      4     22       830
## 2      2  2015     1     2     9     20     19       850
## 3      3  2015     1     3    22     23      9       923
## 4      4  2015     1     4     9     22     51      1004
## 5      5  2015     1     5    18      1     16       812
## 6      6  2015     1     6     5     59      2       740
\end{verbatim}

We will also need the \textbf{dplyr} and \textbf{ggplot2} packages to plot a few graphs.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages(dplyr)}
\FunctionTok{library}\NormalTok{(dplyr)}

\CommentTok{\#install.packages(ggplot2)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\hypertarget{exploring-friends-visits-dataset}{%
\section{2. EXPLORING FRIENDS VISITS DATASET}\label{exploring-friends-visits-dataset}}

Before we jump into lubridate and date/time data, let's first explore the Friends visits dataset that we will be using today.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(visits, }\DecValTok{20}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 20 x 8
##    Friend  Year Month   Day  Hour Minute Second Left_time
##     <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl>     <dbl>
##  1      1  2015     1     1    19      4     22       830
##  2      2  2015     1     2     9     20     19       850
##  3      3  2015     1     3    22     23      9       923
##  4      4  2015     1     4     9     22     51      1004
##  5      5  2015     1     5    18      1     16       812
##  6      6  2015     1     6     5     59      2       740
##  7      7  2015     1     7     9     45     55       913
##  8      8  2015     1     8    12      3     33       709
##  9      9  2015     1     9    17      9     59       838
## 10     10  2015     1    10    16     44     43       753
## 11     11  2015     1    11     0     31     28       849
## 12     12  2015     1    12    19     40     54       853
## 13     13  2015     1    13     7     55      6       924
## 14     14  2015     1    14    13     23     15       923
## 15     15  2015     1    15    14     51     17       941
## 16     16  2015     1    16    21     11     24       702
## 17     17  2015     1    17     0     32      7       854
## 18     18  2015     1    18     9     31     32       851
## 19     19  2015     1    19     4     56     41       837
## 20     20  2015     1    20    20     24     22       844
\end{verbatim}

As we can see, the dataset Friends visits contains information about all of the visits from friends that the host(s) received in the year 2015. The information includes date and time of each friend's visit as well as the time that they left.

Right now, the none of the columns are recognized as date or time in R because all of the information are scattered across multiple columns. In addition, the column ``Left\_time'' also clumps together the hours and minutes into one incoherent number. For this specific column, we need to clearly identify the hour and minute so that R can recognize it as containing date/time.

But before we jump even further into this tutorial, let's actually filter out information from this dataset. Let's say we only want to retain visits that are before 9 PM.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{visits }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(visits, Hour }\SpecialCharTok{\textless{}} \DecValTok{21}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Now, let's check our dataset again.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(visits)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 8
##   Friend  Year Month   Day  Hour Minute Second Left_time
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl>     <dbl>
## 1      1  2015     1     1    19      4     22       830
## 2      2  2015     1     2     9     20     19       850
## 3      4  2015     1     4     9     22     51      1004
## 4      5  2015     1     5    18      1     16       812
## 5      6  2015     1     6     5     59      2       740
## 6      7  2015     1     7     9     45     55       913
\end{verbatim}

\hypertarget{creating-datetime-data}{%
\section{3. CREATING DATE/TIME DATA}\label{creating-datetime-data}}

Date/time data are data tht conveys information about, you guessed it, date and/or time! There are three relevant data types when we talk about date/time data:
1. \textbf{Date} - only has the date (e.g.~2020-05-15)
2. \textbf{Time} - only has the time (e.g.~20:45:00)
3. \textbf{Datetime} - has both the date and time (e.g.~2020-05-15 20:45:00)

Now that we know the different types of date/time data, know that there are also several ways for us to create date/time data: we can create them from raw \textbf{strings}, from an \textbf{existing date/time data}, or from a \textbf{dataset}.

\hypertarget{strings-1}{%
\subsection{Strings}\label{strings-1}}

Firstly, we can use \texttt{ymd()} with a quoted string to create a new date/time data.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ymd}\NormalTok{(}\StringTok{"2021{-}06{-}20"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-06-20"
\end{verbatim}

We can also change the order of the letters in \texttt{ymd()} to match which information came first (year, month, or day). For example, R reads \texttt{ymd()} as ``year, month, date'' and \texttt{dmy()} as ``day, month, year''.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dmy}\NormalTok{(}\StringTok{"15 Feb, 2010"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2010-02-15"
\end{verbatim}

Similarly, \texttt{mdy()} is also an option. In the example below, the string is just a series of numbers that R will reads as month, day, year.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mdy}\NormalTok{(}\StringTok{"07082016"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2016-07-08"
\end{verbatim}

If we do choose to only write a series of number, then our string can be unquoted as well. R will still be able to identify that this is a string and will read it accordingly!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mdy}\NormalTok{(}\DecValTok{07082016}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2016-07-08"
\end{verbatim}

In addition, we can also generate hour, minute, and second information by using \texttt{ymd\_hms()}. Different than the functions above, we cannot change the order of ``hms''.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2021{-}06{-}20{-}5{-}49{-}34"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-06-20 05:49:34 UTC"
\end{verbatim}

In R, the default time zone is Coordinated Universal Time, or UTC for short. But we can also change the time zone of our date/time data by using the \texttt{tz} argument like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2021{-}06{-}20{-}5{-}49{-}34"}\NormalTok{, }\AttributeTok{tz =} \StringTok{"America/Vancouver"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-06-20 05:49:34 PDT"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2021{-}06{-}20{-}5{-}49{-}34"}\NormalTok{, }\AttributeTok{tz =} \StringTok{"Etc/GMT+7"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-06-20 05:49:34 -07"
\end{verbatim}

To check the full list of time zones that R recognizes, we can use the function \texttt{OlsonNames()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}\FunctionTok{OlsonNames}\NormalTok{(), }\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Africa/Abidjan"     "Africa/Accra"       "Africa/Addis_Ababa"
##  [4] "Africa/Algiers"     "Africa/Asmara"      "Africa/Asmera"     
##  [7] "Africa/Bamako"      "Africa/Bangui"      "Africa/Banjul"     
## [10] "Africa/Bissau"
\end{verbatim}

We can also use the following code to check what our current time zone is.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{Sys.timezone}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "America/Los_Angeles"
\end{verbatim}

If after running the code above and R returns NA or UTC for you, it means the software cannot correctly identify where we are. For this, we can tell R directly what our time zone is. For example, if we are in Vancouver, BC, Canada right now, we would write the following code:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{Sys.setenv}\NormalTok{(}\AttributeTok{TZ =} \StringTok{"America/Vancouver"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

To confirm if the correct time zone has been set, we can use the functions \texttt{today()} or \texttt{now()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{today}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-07-25"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{now}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-07-25 23:51:31 PDT"
\end{verbatim}

\hypertarget{try-it-yourself-28}{%
\subsection{6.1 Try it yourself}\label{try-it-yourself-28}}

After running the \texttt{today()} and \texttt{now()} codes above, what do you see?

Try to also change the time zone to where you are or to something else. Now what do you see when you run \texttt{today()} and \texttt{now()}?

\hypertarget{do-questions-1-3-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 1-3 OF THE QUIZ NOW}\label{do-questions-1-3-of-the-quiz-now}}

\begin{quote}
Which of the following is a date data?
\end{quote}

\begin{quote}
What data type is this: 2017-09-19 19:00:00?
\end{quote}

\begin{quote}
What is different about the outputs' data types of \texttt{today()} and \texttt{now()}? (Select all that apply)
\end{quote}

\hypertarget{existing-datetime-data}{%
\subsection{Existing Date/Time Data}\label{existing-datetime-data}}

You may have recognized that while \texttt{today()} gives us only the current date, \texttt{now()} gives us both the date and time of our current location - in this case, America/Vancouver.

We can actually convert date data to datetime and vice versa using \texttt{as\_datetime()} and \texttt{as\_date()}.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# from date to datetime}

\FunctionTok{as\_datetime}\NormalTok{(}\FunctionTok{today}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-07-25 UTC"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# from datetime to date}

\FunctionTok{as\_date}\NormalTok{(}\FunctionTok{now}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-07-25"
\end{verbatim}

\hypertarget{dataset}{%
\subsection{Dataset}\label{dataset}}

Lastly, we can also create date/time data using a dataset. For this section, we will be using the flights dataset from the nycflights13 package that we have briefly explored previously.

Let's quickly look at our data again.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(visits)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 8
##   Friend  Year Month   Day  Hour Minute Second Left_time
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl>     <dbl>
## 1      1  2015     1     1    19      4     22       830
## 2      2  2015     1     2     9     20     19       850
## 3      4  2015     1     4     9     22     51      1004
## 4      5  2015     1     5    18      1     16       812
## 5      6  2015     1     6     5     59      2       740
## 6      7  2015     1     7     9     45     55       913
\end{verbatim}

As we can see, all of these columns contain data regarding date and time.

Unfortunately, because the information about datetime is divided up into different columns, R does not recognize it as date/time data. What we need to do is combine and convert all of these columns into datetime. To do this, we can use the function \texttt{make\_datetime()}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{visits\_datetime }\OtherTok{\textless{}{-}}\NormalTok{ visits }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Visit\_time =} \FunctionTok{make\_datetime}\NormalTok{(Year, Month, Day, Hour, Minute))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(visits\_datetime)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 9
##   Friend  Year Month   Day  Hour Minute Second Left_time Visit_time         
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl>     <dbl> <dttm>             
## 1      1  2015     1     1    19      4     22       830 2015-01-01 19:04:00
## 2      2  2015     1     2     9     20     19       850 2015-01-02 09:20:00
## 3      4  2015     1     4     9     22     51      1004 2015-01-04 09:22:00
## 4      5  2015     1     5    18      1     16       812 2015-01-05 18:01:00
## 5      6  2015     1     6     5     59      2       740 2015-01-06 05:59:00
## 6      7  2015     1     7     9     45     55       913 2015-01-07 09:45:00
\end{verbatim}

Now if we look at our new column \texttt{Visit\_time}, we should see that all of the information that we have mentioned in our code have been combined into one single value that takes the form of datetime!

So we know how to combine information of different columns to form one cohesive one, what about the Left\_time colum? How can we turn values like 1951 into 19:51:00? Once again, \texttt{make\_datetime()} is the answer!

But first, we need to quickly create a new function that will help us make this process easier. This new function will retain information about the year, month, and date as well as divide the time into hours and minutes.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{make\_datetime\_new }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(year, month, day, time) \{}
  \FunctionTok{make\_datetime}\NormalTok{(year, month, day, time }\SpecialCharTok{\%/\%} \DecValTok{100}\NormalTok{, time }\SpecialCharTok{\%\%} \DecValTok{100}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{do-question-4-of-the-quiz-now-2}{%
\subsubsection{DO QUESTION 4 OF THE QUIZ NOW}\label{do-question-4-of-the-quiz-now-2}}

\begin{quote}
\textbf{REVIEW:} What is the difference between \%/\% and \%\%?
\end{quote}

Here, we are telling R to write a new \texttt{make\_datetime()} function named \texttt{make\_datetime\_new()}. Our new function then has 5 arguments, the year, the month, the day, the time \%/\% 100, and the time \%\% 100. The last two arguments will give us the hour and minutes of the day. In other words, 830 \%/\% 100 = 8 and 830 \%\% 100 is 30, so combined, 830 becomes 8:30!

Now if we apply this new function to our flights\_datetime's arr\_time column, we should see the new ``arr\_time'' column with the arrival time of flights in date/time form.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Friends\_visits }\OtherTok{\textless{}{-}}\NormalTok{ visits\_datetime }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Left\_time =} \FunctionTok{make\_datetime\_new}\NormalTok{(Year, Month, Day, Left\_time))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(Friends\_visits)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 9
##   Friend  Year Month   Day  Hour Minute Second Left_time          
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> <dttm>             
## 1      1  2015     1     1    19      4     22 2015-01-01 08:30:00
## 2      2  2015     1     2     9     20     19 2015-01-02 08:50:00
## 3      4  2015     1     4     9     22     51 2015-01-04 10:04:00
## 4      5  2015     1     5    18      1     16 2015-01-05 08:12:00
## 5      6  2015     1     6     5     59      2 2015-01-06 07:40:00
## 6      7  2015     1     7     9     45     55 2015-01-07 09:13:00
## # ... with 1 more variable: Visit_time <dttm>
\end{verbatim}

Another simpler way to use \texttt{make\_datetime()} is to insert the numerical values of the year, month, day, and time directly.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{make\_datetime}\NormalTok{(}\DecValTok{2014}\NormalTok{, }\DecValTok{8}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{9}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2014-08-22 09:00:00 UTC"
\end{verbatim}

\hypertarget{do-question-5-of-the-quiz-now-3}{%
\subsubsection{DO QUESTION 5 OF THE QUIZ NOW}\label{do-question-5-of-the-quiz-now-3}}

\begin{quote}
Using the Friends\_visits data frame, which of the following code will give us a new column named ``Year\_Month'' that only has information of the year and month of each friend visit?
\end{quote}

\hypertarget{functions-debunked-22}{%
\subsection{Functions Debunked}\label{functions-debunked-22}}

\textbf{\href{https://lubridate.tidyverse.org/reference/make_datetime.html}{make\_datetime()}} can be used to create new datetime data. The arguments are as follows:

make\_datetime(

\begin{quote}
\textbf{VALUES OF YEAR,}
\end{quote}

\begin{quote}
\textbf{VALUES OF MONTH,}
\end{quote}

\begin{quote}
\textbf{VALUES OF DAY,}
\end{quote}

\begin{quote}
\textbf{VALUES OF HOUR,}
\end{quote}

\begin{quote}
\textbf{VALUES OF MINUTE,}
\end{quote}

\begin{quote}
\textbf{VALUES OF SECOND,}
\end{quote}

)

\textbf{For example:}
* Combine columns of a dataset: \texttt{flights\_datetime\ \%\textgreater{}\%\ make\_datetime(year,\ month,\ day,\ hour,\ minute)}
* Insert values directly: \texttt{make\_datetime(2014,\ 8,\ 22,\ 9)}

\hypertarget{try-it-yourself-29}{%
\subsection{6.2 Try it yourself}\label{try-it-yourself-29}}

Try creating a new column named ``Day\_visit'' that only contains information of the Year, Month, and Day columns using the Friends\_visits dataframe that we just created.

\hypertarget{retrieving-information-from-datetime-data}{%
\section{4. RETRIEVING INFORMATION FROM DATE/TIME DATA}\label{retrieving-information-from-datetime-data}}

We have learned how to create date/time data, but how do we retrieve information from the date/time data that we created? Hopefully, by the end of this section, we would be able to answer this question!

Let's first create a simple datetime value from a string using \texttt{ymd\_hms()}. And let's also use the column ``Visit\_time'' of our Friends\_visits data frame.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DT }\OtherTok{\textless{}{-}} \FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2020{-}04{-}19 09:45:00"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(Friends\_visits}\SpecialCharTok{$}\NormalTok{Visit\_time)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2015-01-01 19:04:00 UTC" "2015-01-02 09:20:00 UTC"
## [3] "2015-01-04 09:22:00 UTC" "2015-01-05 18:01:00 UTC"
## [5] "2015-01-06 05:59:00 UTC" "2015-01-07 09:45:00 UTC"
\end{verbatim}

\hypertarget{year}{%
\subsection{Year}\label{year}}

Now, if we want to know the year of our datetime value, we can use the function \texttt{year()} with the name of our datetime variable between the \texttt{()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{year}\NormalTok{(DT)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 2020
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
    \FunctionTok{year}\NormalTok{(Friends\_visits}\SpecialCharTok{$}\NormalTok{Visit\_time)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 2015 2015 2015 2015 2015 2015
\end{verbatim}

The reason why the outputs to \texttt{year(Friends\_visits\$Visit\_time)} are all 2015s is because if we look at the first 6 records of the columns ``Visit\_time'', all year values are 2015!

Similarly, we can also use the function \texttt{yday()} to find out what day of the year our datetime value falls into. For example, April 19 is the \textbf{110th} day of the year.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{yday}\NormalTok{(DT)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 110
\end{verbatim}

Using the same function on our Friends\_visits data frame, we can see that the first 6 records of the column ``Visit\_time'' contains the first, second, fourth, fifth, sixth, and seventh day of the year.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
    \FunctionTok{yday}\NormalTok{(Friends\_visits}\SpecialCharTok{$}\NormalTok{Visit\_time)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 2 4 5 6 7
\end{verbatim}

\hypertarget{month}{%
\subsection{Month}\label{month}}

\texttt{mday()} is similar to \texttt{yday()} except it gives us what day of the month our datetime value falls into. In this case, ``4-19'' is the \textbf{19th} day of April!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mday}\NormalTok{(DT)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 19
\end{verbatim}

What days of the month do the first 6 records of Visit\_time contain?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
    \FunctionTok{mday}\NormalTok{(Friends\_visits}\SpecialCharTok{$}\NormalTok{Visit\_time)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 2 4 5 6 7
\end{verbatim}

At this point, we should already have figured out the pattern, so \texttt{month()} will give us the month of our datetime value, normally, with a numerical output. If we want to convert month from a numerical ``4'' to ``Apr'', we would add the \texttt{label} argument like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{month}\NormalTok{(DT, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] Apr
## 12 Levels: Jan < Feb < Mar < Apr < May < Jun < Jul < Aug < Sep < ... < Dec
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
    \FunctionTok{month}\NormalTok{(Friends\_visits}\SpecialCharTok{$}\NormalTok{Visit\_time, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] Jan Jan Jan Jan Jan Jan
## 12 Levels: Jan < Feb < Mar < Apr < May < Jun < Jul < Aug < Sep < ... < Dec
\end{verbatim}

\hypertarget{week}{%
\subsection{Week}\label{week}}

\texttt{wday()} will give us what day of the week our datetime value falls into. Similarly, we can use \texttt{label} to change numerical values to ``Mon'', ``Tues'', ``Wed'', etc. If we want the full ``Monday'' instead of just ``Mon'', we would add the \texttt{abbr} argument like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{wday}\NormalTok{(DT, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{abbr =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] Sunday
## 7 Levels: Sunday < Monday < Tuesday < Wednesday < Thursday < ... < Saturday
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
    \FunctionTok{wday}\NormalTok{(Friends\_visits}\SpecialCharTok{$}\NormalTok{Visit\_time, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{abbr =} \ConstantTok{FALSE}\NormalTok{)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] Thursday  Friday    Sunday    Monday    Tuesday   Wednesday
## 7 Levels: Sunday < Monday < Tuesday < Wednesday < Thursday < ... < Saturday
\end{verbatim}

\hypertarget{try-it-yourself-30}{%
\subsection{6.3 Try it yourself}\label{try-it-yourself-30}}

Using the functions introduced above, solve the following questions:
1. What day of the week is April 2, 2014?
2. What day of the year is 2017-09-15?
3. What day of the month is 20190830?
4. Find the months of the last 11 records of the column Visit\_hour.

\hypertarget{plotting-retrieved-information}{%
\subsection{Plotting Retrieved Information}\label{plotting-retrieved-information}}

Let's try to aply the functions that we just learned above by retrieving information from the Friends\_visits dataset that we previously created.

Here is the dataset again:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(Friends\_visits)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 9
##   Friend  Year Month   Day  Hour Minute Second Left_time          
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> <dttm>             
## 1      1  2015     1     1    19      4     22 2015-01-01 08:30:00
## 2      2  2015     1     2     9     20     19 2015-01-02 08:50:00
## 3      4  2015     1     4     9     22     51 2015-01-04 10:04:00
## 4      5  2015     1     5    18      1     16 2015-01-05 08:12:00
## 5      6  2015     1     6     5     59      2 2015-01-06 07:40:00
## 6      7  2015     1     7     9     45     55 2015-01-07 09:13:00
## # ... with 1 more variable: Visit_time <dttm>
\end{verbatim}

Let's say we want to plot a bar graph to show how many visits each month in 2015 the hosts have using the Visit\_time column. First we want to extract the months from the Visit\_time values. After that, we want to place the extracted months in the ``month'' column.

To complete our goals, we need to use both \texttt{mutate()} and \texttt{month()} like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
\NormalTok{Friends\_visits }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Month =} \FunctionTok{month}\NormalTok{(Visit\_time, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{))}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 9
##   Friend  Year Month   Day  Hour Minute Second Left_time          
##    <dbl> <dbl> <ord> <dbl> <dbl>  <dbl>  <dbl> <dttm>             
## 1      1  2015 Jan       1    19      4     22 2015-01-01 08:30:00
## 2      2  2015 Jan       2     9     20     19 2015-01-02 08:50:00
## 3      4  2015 Jan       4     9     22     51 2015-01-04 10:04:00
## 4      5  2015 Jan       5    18      1     16 2015-01-05 08:12:00
## 5      6  2015 Jan       6     5     59      2 2015-01-06 07:40:00
## 6      7  2015 Jan       7     9     45     55 2015-01-07 09:13:00
## # ... with 1 more variable: Visit_time <dttm>
\end{verbatim}

We should be able to see that all of the ``1''s under the month (second) column, have successfully turned into ``Jan''.

Finally, all we need is a \texttt{ggplot()} canvas and a \texttt{geom\_bar()} function! \textbf{(Notice the transition from pipe \texttt{\%\textgreater{}\%} to \texttt{+}).}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Friends\_visits }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Month =} \FunctionTok{month}\NormalTok{(Visit\_time, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(Month)) }\SpecialCharTok{+}
    \FunctionTok{geom\_bar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-265-1.pdf}

\hypertarget{do-question-6-of-the-quiz-now-2}{%
\subsubsection{DO QUESTION 6 OF THE QUIZ NOW}\label{do-question-6-of-the-quiz-now-2}}

\begin{quote}
What is the difference between \texttt{\%\textgreater{}\%} and \texttt{+}? (Select all that apply)
\end{quote}

\hypertarget{try-it-yourself-31}{%
\subsection{6.4 Try it yourself}\label{try-it-yourself-31}}

Using the same Friends\_visit dataset, create a similar graph as above but the x-axis is days of the week. In other words, create a bar graph that shows how many visits there are in each day of the week.

\hypertarget{updating-plotting-datetime-data}{%
\section{5. UPDATING \& PLOTTING DATE/TIME DATA}\label{updating-plotting-datetime-data}}

\hypertarget{update}{%
\subsection{Update}\label{update}}

To modify or update a piece of date/time data, we would use \texttt{update()}. Updating a date/time data can mean changing it completely:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(DT }\OtherTok{\textless{}{-}} \FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2020{-}04{-}19 09:45:00"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2020-04-19 09:45:00 UTC"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{update}\NormalTok{(DT, }\AttributeTok{year =} \DecValTok{2021}\NormalTok{, }\AttributeTok{month =} \DecValTok{6}\NormalTok{, }\AttributeTok{day =} \DecValTok{21}\NormalTok{, }\AttributeTok{hour =} \DecValTok{9}\NormalTok{, }\AttributeTok{minute =} \DecValTok{13}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-06-21 09:13:00 UTC"
\end{verbatim}

The cool thing about the \texttt{update()} function is that it will automatically adjust the date and time if the value that we want to change our current date/time to is too large. For example, April only has 30 days. Now look what happens when we try to update our date to 2020-04-31.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DT }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{update}\NormalTok{(}\AttributeTok{day =} \DecValTok{31}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2020-05-01 09:45:00 UTC"
\end{verbatim}

\texttt{update()} automatically adjusts it to May 1st instead because April 31st does not exist!

\hypertarget{try-it-yourself-32}{%
\subsection{6.5 Try it yourself}\label{try-it-yourself-32}}

Try to update our month to 13. What happened to our date/time? What is the output?

\textbf{\href{https://lubridate.tidyverse.org/reference/DateTimeUpdate.html}{update()}} can be used to update existing datetime data. The arguments are as follows:

update(

\begin{quote}
year = \textbf{VALUES OF YEAR,}
\end{quote}

\begin{quote}
month = \textbf{VALUES OF MONTH,}
\end{quote}

\begin{quote}
day OR mday OR yday = \textbf{VALUES OF DAY,}
\end{quote}

\begin{quote}
hour = \textbf{VALUES OF HOUR,}
\end{quote}

\begin{quote}
minute = \textbf{VALUES OF MINUTE,}
\end{quote}

\begin{quote}
second = \textbf{VALUES OF SECOND}
\end{quote}

)

\textbf{For example:}
* \texttt{update(DT,\ year\ =\ 2021,\ month\ =\ 6,\ day\ =\ 21,\ hour\ =\ 9,\ minute\ =\ 13)}
* \texttt{update(ymd\_hms("2020-04-19\ 09:45:00"),\ year\ =\ 2021,\ month\ =\ 6,\ day\ =\ 21,\ hour\ =\ 9,\ minute\ =\ 13)}

\hypertarget{plotting-datetime}{%
\subsection{Plotting Date/Time}\label{plotting-datetime}}

So far, we have learned how to plot graphs with date data type, such as month and weekday, in the x-axis. But what if we want to plot our time data in the x-axis instead? Although it sounds simple, plotting time data may be a bit harder than it seems because there is no function in the lubridate package that allows us to only retain time data. In other words, there is no \texttt{hms()} function\ldots{} in lubridate.

To loophole around this issue, we can use \texttt{update()}! Basically, we want to update all dates in our data to the same date, let's say January 1 2015, so that when we plot the graph, the graph will be representative of friends visits in each hour. It will make more sense when we start plotting the graph.

Let's check the dataset again before we start plotting.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(Friends\_visits)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 9
##   Friend  Year Month   Day  Hour Minute Second Left_time          
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> <dttm>             
## 1      1  2015     1     1    19      4     22 2015-01-01 08:30:00
## 2      2  2015     1     2     9     20     19 2015-01-02 08:50:00
## 3      4  2015     1     4     9     22     51 2015-01-04 10:04:00
## 4      5  2015     1     5    18      1     16 2015-01-05 08:12:00
## 5      6  2015     1     6     5     59      2 2015-01-06 07:40:00
## 6      7  2015     1     7     9     45     55 2015-01-07 09:13:00
## # ... with 1 more variable: Visit_time <dttm>
\end{verbatim}

Recall that in this dataset, we have already converted the Visit\_time column to contain data in the date/time form. However, right now, R recognizes this column using date AND time, but we only want R to distinguish the different times for our graph. So, as we have discussed before, we want to trick R into thinking that all 365 records are of the same date, just different times. To do this, we use \texttt{update()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
\NormalTok{    Friends\_visits }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Visit\_hour =} \FunctionTok{update}\NormalTok{(Visit\_time, }\AttributeTok{yday =} \DecValTok{1}\NormalTok{))}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 10
##   Friend  Year Month   Day  Hour Minute Second Left_time          
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> <dttm>             
## 1      1  2015     1     1    19      4     22 2015-01-01 08:30:00
## 2      2  2015     1     2     9     20     19 2015-01-02 08:50:00
## 3      4  2015     1     4     9     22     51 2015-01-04 10:04:00
## 4      5  2015     1     5    18      1     16 2015-01-05 08:12:00
## 5      6  2015     1     6     5     59      2 2015-01-06 07:40:00
## 6      7  2015     1     7     9     45     55 2015-01-07 09:13:00
## # ... with 2 more variables: Visit_time <dttm>, Visit_hour <dttm>
\end{verbatim}

Now if we look at the new ``Visit\_hour'' column, all records should have the same date: 2015-01-01. Perfect!

The next step is to actually plot this on a frequency polygon like so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ Friends\_visits }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Visit\_hour =} \FunctionTok{update}\NormalTok{(Visit\_time, }\AttributeTok{yday =} \DecValTok{1}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(Visit\_hour)) }\SpecialCharTok{+}
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\AttributeTok{binwidth =} \DecValTok{3600}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-271-1.pdf}

This graph is a bit tricky to read because even though the x-axis says that all data points are within Jan 01, we know this is not true - the data displayed are from Jan 01 to Dec 31! Again, the reason why our x-axis is labelled as Jan 01 is because we have tricked R into thinking that all data points are of the same date so that our graph can plot the number of friend visits depending on times.

What information can you conclude from the graph above? Around what timeframe do our host(s) receive the most friends visits?

Note that each binwidth (i.e.~binwidth = 1) is equal to one second. So \texttt{binwidth\ =\ 3600} means we are clumping all flights within each 60 minutes (1 hour) together into one single data point in our frequency polygon.

\hypertarget{try-it-yourself-33}{%
\subsection{6.6 Try it yourself}\label{try-it-yourself-33}}

Recreate the frequency polygon above but change the binwidth so that all flights within each 30 minutes are clumped into one single data point. How do the graphs differ? Can you think of a few scenarios where one would be preferred?

\hypertarget{do-question-7-of-the-quiz-now-1}{%
\subsubsection{DO QUESTION 7 OF THE QUIZ NOW}\label{do-question-7-of-the-quiz-now-1}}

\begin{quote}
What should the binwidth be if we want to have each data point to represent a separate 2 hour interval?
\end{quote}

\hypertarget{hms-package}{%
\subsubsection{hms package}\label{hms-package}}

There is actually another package in R (and also part of the tidyverse core) that deals with time data specifically: hms. This function provides an alternative to the ggplot code we just wrote above.

We will not go over this package or function in detail in this tutorial. You can explore hms more via this \href{https://cran.r-project.org/web/packages/hms/hms.pdf}{link}.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("hms")}
\FunctionTok{library}\NormalTok{(hms)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'hms'
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:lubridate':
## 
##     hms
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(}
\NormalTok{    Friends\_visits }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Visit\_hour\_hms =} \FunctionTok{hms}\NormalTok{(Second, Minute, Hour))}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 10
##   Friend  Year Month   Day  Hour Minute Second Left_time          
##    <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> <dttm>             
## 1      1  2015     1     1    19      4     22 2015-01-01 08:30:00
## 2      2  2015     1     2     9     20     19 2015-01-02 08:50:00
## 3      4  2015     1     4     9     22     51 2015-01-04 10:04:00
## 4      5  2015     1     5    18      1     16 2015-01-05 08:12:00
## 5      6  2015     1     6     5     59      2 2015-01-06 07:40:00
## 6      7  2015     1     7     9     45     55 2015-01-07 09:13:00
## # ... with 2 more variables: Visit_time <dttm>, Visit_hour_hms <time>
\end{verbatim}

We can see that our ``Visit\_hour\_hms'' column actually only retain time (hour, minute, second) data directly. Using this column, we can plot our frequency polygon like so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ Friends\_visits }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Visit\_hour\_hms =} \FunctionTok{hms}\NormalTok{(Second, Minute, Hour)) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(Visit\_hour\_hms)) }\SpecialCharTok{+}
    \FunctionTok{geom\_freqpoly}\NormalTok{(}\AttributeTok{binwidth =} \DecValTok{900}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{intro2R_files/figure-latex/unnamed-chunk-274-1.pdf}

If we compare this graph with the one above, we should see that they are identical! Except the x-axis in this graph is much clearer and accurate because it only contains the time of day.

\hypertarget{arithmetic-operators-with-datetime}{%
\section{6. ARITHMETIC OPERATORS WITH DATE/TIME}\label{arithmetic-operators-with-datetime}}

\hypertarget{basic-arithmetic}{%
\subsection{Basic Arithmetic}\label{basic-arithmetic}}

Just like any other types of data on R, we can conduct basic arithmetic operations using date/time data.

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{5} \SpecialCharTok{*}\NormalTok{ (}\FunctionTok{years}\NormalTok{(}\DecValTok{2}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{months}\NormalTok{(}\DecValTok{11}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "10y 55m 0d 0H 0M 0S"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{days}\NormalTok{(}\DecValTok{50}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{hours}\NormalTok{(}\DecValTok{25}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{minutes}\NormalTok{(}\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "50d 25H 2M 0S"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2020{-}04{-}19 09:45:00"}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{days}\NormalTok{(}\DecValTok{50}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{hours}\NormalTok{(}\DecValTok{25}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{minutes}\NormalTok{(}\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2020-06-09 10:47:00 UTC"
\end{verbatim}

We can also combine arithmetic operators with \texttt{today()} or \texttt{now()} like the code below to find out someone's age!

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(age }\OtherTok{\textless{}{-}} \FunctionTok{today}\NormalTok{() }\SpecialCharTok{{-}} \FunctionTok{ymd}\NormalTok{(}\StringTok{"2000{-}02{-}15"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Time difference of 7831 days
\end{verbatim}

As you may have seen, telling someone you are 7,797 days old is quite a mouthful, and also pretty impractical. A way for us to make this number more comprehensible is by converting it to years using the function \texttt{as.duration()}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{as.duration}\NormalTok{(age)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "676598400s (~21.44 years)"
\end{verbatim}

\hypertarget{do-question-8-of-the-quiz-now-2}{%
\subsubsection{DO QUESTION 8 OF THE QUIZ NOW}\label{do-question-8-of-the-quiz-now-2}}

\begin{quote}
We can use \texttt{now()} to calculate our age as well. (True or False)
\end{quote}

\hypertarget{account-for-leap-years-and-daylight-savings}{%
\subsection{Account for Leap Years and Daylight Savings}\label{account-for-leap-years-and-daylight-savings}}

A potential problem with the functions that you are introduced to in the pr is that they do not account for time changes within the year. For example, a leap year can add an extra day to the year and daylight savings may add or subtract an hour from a day.

To solve this problem, we can use \texttt{dyears()} and \texttt{ddays()} instead of the normal \texttt{years()} and \texttt{days()}.

\hypertarget{leap-year}{%
\subsubsection{Leap Year}\label{leap-year}}

We know that 2020 was a leap year. Let is check the difference between adding one year to 2020-01-01 using \texttt{years()} and \texttt{dyears()}.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Normal}

\FunctionTok{ymd}\NormalTok{(}\StringTok{"2020{-}01{-}01"}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{years}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-01-01"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Considers Leap Year}

\FunctionTok{ymd}\NormalTok{(}\StringTok{"2020{-}01{-}01"}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{dyears}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2020-12-31 06:00:00 UTC"
\end{verbatim}

As we can see, \texttt{dyears()} accounts for an extra day in February, so it recognizes that 365 days (1 year) after 2020-01-01 is only 2020-12-31, not 2021-01-01.

\hypertarget{daylight-savings}{%
\subsubsection{Daylight Savings}\label{daylight-savings}}

Similarly, \texttt{ddays()} recognizes that daylight savings in Vancouver started in early morning 2021-03-14, and correctly calculates that 1 day (24 hours) after 2021-03-14 1AM is actually 2021-03-15 2AM!

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Normal}

\FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2021{-}03{-}14 1:00:00"}\NormalTok{, }
        \AttributeTok{tz =} \StringTok{"America/Vancouver"}\NormalTok{) }\SpecialCharTok{+} 
    \FunctionTok{days}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-03-15 01:00:00 PDT"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Considers Daylight Savings}

\FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2021{-}03{-}14 1:00:00"}\NormalTok{, }
        \AttributeTok{tz =} \StringTok{"America/Vancouver"}\NormalTok{) }\SpecialCharTok{+} 
    \FunctionTok{ddays}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2021-03-15 02:00:00 PDT"
\end{verbatim}

\hypertarget{do-questions-9-10-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 9-10 OF THE QUIZ NOW}\label{do-questions-9-10-of-the-quiz-now}}

\begin{quote}
Which of these functions account for date and time changes throughout the years?
\end{quote}

\begin{quote}
What happens when we use \texttt{ddays()} or \texttt{dyears()} in days or years that do not experience any special time/date changes?
\end{quote}

\hypertarget{summary-and-takeaways-1}{%
\section{7. SUMMARY AND TAKEAWAYS}\label{summary-and-takeaways-1}}

After completing this tutorial, you should be more familiar the lubridate package and know the basic ways to deal with date/time data in R. This tutorial covered how to create new date/time data, retrieve information from existing date/time data, modify and plot date/time data, as well as conduct simple arithmetic operators using date/time data.

Date/time is quite interesting once you get the hang of it. This data type can give us very valuable information about the dataset that we are working with. Again, it is okay to make mistakes and be confused when we first got started, but know that fluency also comes from practice!

\hypertarget{data-summary-with-tableone}{%
\chapter{Data Summary with tableone}\label{data-summary-with-tableone}}

\hypertarget{instructions-7}{%
\section{INSTRUCTIONS}\label{instructions-7}}

In this tutorial, we will be exploring how to summarize all variables of our datasets in one single table. We will familiarize ourselves with the R package tableone and its associated functions. This tutorial will show you how to be more efficient in analyzing data on R.

Accompanying this tutorial is \textbf{a short \href{https://forms.gle/vDvUJhHDAuKHVNt98}{Google quiz}} for your own self-assessment. The instructions of this tutorial will clearly indicate when you should answer which question.

\hypertarget{learning-objectives-7}{%
\section{LEARNING OBJECTIVES}\label{learning-objectives-7}}

\begin{itemize}
\tightlist
\item
  Understand the basics the tableone package and its applications.
\item
  Efficiently summarize whole datasets into one single table.
\item
  Be familiar with the function \texttt{CreateTableOne()} and a few of its basic arguments.
\item
  Know how to tell tableone which variables are continuous and which variables are categorical.
\item
  Be familiar with different \texttt{print()} arguments to customize a tableone.
\end{itemize}

\hypertarget{set-up-4}{%
\section{1. SET UP}\label{set-up-4}}

For this tutorial, the main package that we will be working with is the \textbf{tableone} package. We will also need the dplyr package for a few basic functions and data from the nhanesA package. Let's go ahead and load them in our session!

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("tableone")}
\FunctionTok{library}\NormalTok{(tableone)}

\CommentTok{\#install.packages("dplyr")}
\FunctionTok{library}\NormalTok{(dplyr)}

\CommentTok{\#install.packages("nhanesA")}
\FunctionTok{library}\NormalTok{(nhanesA)}
\end{Highlighting}
\end{Shaded}

Alright, so we are going back to the NHANES dataset for this tutorial. Let's, once again, download the ``DEMO\_H'' dataset and save it in an object called ``demo\_original''.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo\_original }\OtherTok{\textless{}{-}} \FunctionTok{nhanes}\NormalTok{(}\StringTok{"DEMO\_H"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing SAS dataset DEMO_H     ..
\end{verbatim}

Just a reminder to everyone that this is what our raw dataset look like.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo\_original)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3 RIDEXMON
## 1 73557        8        2        1       69       NA        4        4        1
## 2 73558        8        2        1       54       NA        3        3        1
## 3 73559        8        2        1       72       NA        3        3        2
## 4 73560        8        2        1        9       NA        3        3        1
## 5 73561        8        2        2       73       NA        3        3        1
## 6 73562        8        2        1       56       NA        1        1        1
##   RIDEXAGM DMQMILIZ DMQADFC DMDBORN4 DMDCITZN DMDYRSUS DMDEDUC3 DMDEDUC2
## 1       NA        1       1        1        1       NA       NA        3
## 2       NA        2      NA        1        1       NA       NA        3
## 3       NA        1       1        1        1       NA       NA        4
## 4      119       NA      NA        1        1       NA        3       NA
## 5       NA        2      NA        1        1       NA       NA        5
## 6       NA        1       2        1        1       NA       NA        4
##   DMDMARTL RIDEXPRG SIALANG SIAPROXY SIAINTRP FIALANG FIAPROXY FIAINTRP MIALANG
## 1        4       NA       1        2        2       1        2        2       1
## 2        1       NA       1        2        2       1        2        2       1
## 3        1       NA       1        2        2       1        2        2       1
## 4       NA       NA       1        1        2       1        2        2       1
## 5        1       NA       1        2        2       1        2        2       1
## 6        3       NA       1        2        2       1        2        2       1
##   MIAPROXY MIAINTRP AIALANGA DMDHHSIZ DMDFMSIZ DMDHHSZA DMDHHSZB DMDHHSZE
## 1        2        2        1        3        3        0        0        2
## 2        2        2        1        4        4        0        2        0
## 3        2        2       NA        2        2        0        0        2
## 4        2        2        1        4        4        0        2        0
## 5        2        2       NA        2        2        0        0        2
## 6        2        2        1        1        1        0        0        0
##   DMDHRGND DMDHRAGE DMDHRBR4 DMDHREDU DMDHRMAR DMDHSEDU WTINT2YR WTMEC2YR
## 1        1       69        1        3        4       NA 13281.24 13481.04
## 2        1       54        1        3        1        1 23682.06 24471.77
## 3        1       72        1        4        1        3 57214.80 57193.29
## 4        1       33        1        3        1        4 55201.18 55766.51
## 5        1       78        1        5        1        5 63709.67 65541.87
## 6        1       56        1        4        3       NA 24978.14 25344.99
##   SDMVPSU SDMVSTRA INDHHIN2 INDFMIN2 INDFMPIR
## 1       1      112        4        4     0.84
## 2       1      108        7        7     1.78
## 3       1      109       10       10     4.51
## 4       2      109        9        9     2.52
## 5       2      116       15       15     5.00
## 6       1      111        9        9     4.79
\end{verbatim}

As we can see, the data is quite overwhelming! Let's only select a few familiar variables to make the summary a bit more manageable and comprehensible.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo }\OtherTok{\textless{}{-}} \FunctionTok{select}\NormalTok{(demo\_original, }
               \FunctionTok{c}\NormalTok{(}\StringTok{"RIAGENDR"}\NormalTok{, }\CommentTok{\# Gender}
                 \StringTok{"RIDAGEYR"}\NormalTok{, }\CommentTok{\# Age}
                 \StringTok{"RIDRETH3"}\NormalTok{, }\CommentTok{\# Race}
                 \StringTok{"DMDEDUC2"}\NormalTok{) }\CommentTok{\# Education}
\NormalTok{               )}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   RIAGENDR RIDAGEYR RIDRETH3 DMDEDUC2
## 1        1       69        4        3
## 2        1       54        3        3
## 3        1       72        3        4
## 4        1        9        3       NA
## 5        2       73        3        5
## 6        1       56        1        4
\end{verbatim}

Awesome, our data is looking much better now!

We have learned how to analyze it with dplyr and visualize it with ggplot. But in this tutorial, we are going to learn how to summarize the data in this large dataset into one simple table.

\hypertarget{what-is-tableone}{%
\section{2. WHAT IS TABLEONE?}\label{what-is-tableone}}

\href{http://rstudio-pubs-static.s3.amazonaws.com/13321_da314633db924dc78986a850813a50d5.html}{tableone} is an R package that helps us construct ``Table 1'', or the baseline table that we see in biomedical research papers. This package gives us access to a lot of useful data summary function that we can use to summarize both categorical and continuous data. In addition, we can also identify normal and nonnormal variables so that R can analyze it more accurately.

tableone is unique in that it is very simple and easy to use. One single function can do tremendous data summary as we will see in the later sections in this tutorial.

\hypertarget{do-questions-1-2-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 1-2 OF THE QUIZ NOW}\label{do-questions-1-2-of-the-quiz-now}}

\begin{quote}
tableone is part of the tidyverse core. (True or False)
\end{quote}

\begin{quote}
What sort of data can tableone summarize? (Select all that apply)
\end{quote}

\hypertarget{creating-a-tableone}{%
\section{3. CREATING A TABLEONE}\label{creating-a-tableone}}

\hypertarget{createtableone}{%
\subsection{CreateTableOne}\label{createtableone}}

The simples way that we can use tableone is to use the function \texttt{CreateTableOne()} with the nested dataset between then \texttt{()} like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{CreateTableOne}\NormalTok{(}\AttributeTok{data =}\NormalTok{ demo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                       
##                        Overall      
##   n                    10175        
##   RIAGENDR (mean (SD))  1.51 (0.50) 
##   RIDAGEYR (mean (SD)) 31.48 (24.42)
##   RIDRETH3 (mean (SD))  3.29 (1.61) 
##   DMDEDUC2 (mean (SD))  3.52 (1.24)
\end{verbatim}

As we can see in the output above, this function has cleanly summarize all of our data into one table. It gives us how many records there are in the dataset (n), as well as the mean and standard deviation of all of our variables!

It looks pretty neat right now, but recall that the variables \textbf{RIAGENDR (Gender), RIDAGEYR (Age), and RIDRETH3 (Race)} are all categorical! So it does not make any sense to have a mean for these variables at all.

But do not worry at all! There are actually several ways that we can solve this problem:
1. First solution is, we can use nhanesTranslate and these variables will instantly be converted to categorical, and
2. Second solution is, we can use the \texttt{factorVars} argument in \texttt{CreateTableOne()} to identify categorical variables.

\hypertarget{solution-1-nhanestranslate-createtableone}{%
\subsection{Solution 1: nhanesTranslate \& CreateTableOne}\label{solution-1-nhanestranslate-createtableone}}

First, let's translate all of our variables using the \texttt{nhanesTranslate()} function that we have learned in previous tutorials like so.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{demo\_translate }\OtherTok{\textless{}{-}} \FunctionTok{nhanesTranslate}\NormalTok{(}\StringTok{"DEMO\_H"}\NormalTok{,}
                 \FunctionTok{c}\NormalTok{(}\StringTok{"RIAGENDR"}\NormalTok{,}
                   \StringTok{"RIDAGEYR"}\NormalTok{,}
                   \StringTok{"RIDRETH3"}\NormalTok{, }
                   \StringTok{"DMDEDUC2"}\NormalTok{),}
                   \AttributeTok{data =}\NormalTok{ demo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Translated columns: RIAGENDR RIDRETH3 DMDEDUC2
\end{verbatim}

After that, for ease of communication, let's also change the column names to something that we can all understand.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{names}\NormalTok{(demo\_translate) }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Gender"}\NormalTok{, }\StringTok{"Age"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{try-it-yourself-34}{%
\subsection{7.1 Try it yourself}\label{try-it-yourself-34}}

\textbf{Challenge}: Why do you think we need to change the names of our variables AFTER we translate them?

\textbf{Hint}: Think about the \texttt{data\ =\ demo} argument in \texttt{nhanesTranslate()}

Now, this is what our dataset should look like. Look familiar?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(demo\_translate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Gender Age               Race                        Education
## 1   Male  69 Non-Hispanic Black High school graduate/GED or equi
## 2   Male  54 Non-Hispanic White High school graduate/GED or equi
## 3   Male  72 Non-Hispanic White        Some college or AA degree
## 4   Male   9 Non-Hispanic White                             <NA>
## 5 Female  73 Non-Hispanic White        College graduate or above
## 6   Male  56   Mexican American        Some college or AA degree
\end{verbatim}

This table should look exactly like the one that you have seen in previous tutorials! The only difference here is that, \textbf{in this tutorial, we are using and summarizing the ENTIRE dataset!} We will not be scaling down to only analyzing or visualizing the first or last few rows!

Now if we use the \texttt{CreateTableOne()} function again but on our new \texttt{demo\_translate} object, we should be able to see a quite different table.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(tab\_nhanes }\OtherTok{\textless{}{-}} \FunctionTok{CreateTableOne}\NormalTok{(}\AttributeTok{data =}\NormalTok{ demo\_translate))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                      
##                                       Overall      
##   n                                   10175        
##   Gender = Female (%)                  5172 (50.8) 
##   Age (mean (SD))                     31.48 (24.42)
##   Race (%)                                         
##      Mexican American                  1730 (17.0) 
##      Other Hispanic                     960 ( 9.4) 
##      Non-Hispanic White                3674 (36.1) 
##      Non-Hispanic Black                2267 (22.3) 
##      Non-Hispanic Asian                1074 (10.6) 
##      Other Race - Including Multi-Rac   470 ( 4.6) 
##   Education (%)                                    
##      Less than 9th grade                455 ( 7.9) 
##      9-11th grade (Includes 12th grad   791 (13.7) 
##      High school graduate/GED or equi  1303 (22.6) 
##      Some college or AA degree         1770 (30.7) 
##      College graduate or above         1443 (25.0) 
##      Refused                              2 ( 0.0) 
##      Don't Know                           5 ( 0.1)
\end{verbatim}

The count of records (n) is still there and we are still provided with the mean and standard deviation of participants' age. However, instead of a single mean and standard deviation for gender, race, and education, we now have all of the categories of these variables fleshed out. In addition, we are also given the count and percentage of each category!

You may have also noticed that ``Female'' is the only gender that is shown in this table. This is because this variable only has two levels: Female and Male. For this reason, we can infer the count and percentage of the other category just based on the one that tableone gives us. There is a way that we can force tableone to show all categories of a variable. We will cover this in a later section of this tutorial.

\hypertarget{do-questions-3-4-of-the-quiz-now}{%
\subsubsection{DO QUESTIONS 3-4 OF THE QUIZ NOW}\label{do-questions-3-4-of-the-quiz-now}}

\begin{quote}
What kind of information is summarized when the data is continuous?
\end{quote}

\begin{quote}
What kind of information is summarized when the data is categorical?
\end{quote}

\hypertarget{solution-2-identify-numerical-categorical-data}{%
\subsection{Solution 2: Identify Numerical Categorical Data}\label{solution-2-identify-numerical-categorical-data}}

Before we hop to this second solution, again, let's rename all of our variables to something more comprehensible so that everything is easier to understand. In this subsection, however, we will be renaming our \texttt{demo} dataset, instead of the \texttt{demo\_translate} dataset that we renamed earlier.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{names}\NormalTok{(demo) }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Gender"}\NormalTok{, }\StringTok{"Age"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Okay, now we are ready to go! Note that this second solution is more transferrable and will work for datasets that do not come from NHANES.

The second way that we can help tableone know which variable is categorical is by telling it directly using the argument \texttt{factorVars}. \texttt{factorVars} is especially useful for identifying numerical categorical data like the ones that we have.

Coupled with \texttt{factorVars} is also \texttt{vars}. \texttt{vars} is used to select which variables we want to keep in our tableone. Combined what we have learned about \texttt{CreateTableOne()} so far with \texttt{factorVars} and \texttt{vars}, this is what our function with clearly identified numerical categorical data should look like:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{CreateTableOne}\NormalTok{(}\AttributeTok{data =}\NormalTok{ demo,}
               \AttributeTok{vars =} \FunctionTok{c}\NormalTok{(}\StringTok{"Gender"}\NormalTok{, }\StringTok{"Age"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{),}
               \AttributeTok{factorVars =} \FunctionTok{c}\NormalTok{(}\StringTok{"Gender"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{)}
\NormalTok{              )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                  
##                   Overall      
##   n               10175        
##   Gender = 2 (%)   5172 (50.8) 
##   Age (mean (SD)) 31.48 (24.42)
##   Race (%)                     
##      1             1730 (17.0) 
##      2              960 ( 9.4) 
##      3             3674 (36.1) 
##      4             2267 (22.3) 
##      6             1074 (10.6) 
##      7              470 ( 4.6) 
##   Education (%)                
##      1              455 ( 7.9) 
##      2              791 (13.7) 
##      3             1303 (22.6) 
##      4             1770 (30.7) 
##      5             1443 (25.0) 
##      7                2 ( 0.0) 
##      9                5 ( 0.1)
\end{verbatim}

As we can see, this tableone that we just created should look somewhat familiar to the table that we created above. The only difference is that because we did not use nhanesTranslate, all of the categories in our categorical variables are numerical. This will not be an issue if we know which number corresponds to which gender, race, or education level of the participants. Other than that, the counts and percentages of these categorical variables should be identical.

If the amount of vectors \texttt{c()} and strings in the code above is a bit confusing and hard on our eyes, we can also define \texttt{factorVars} and \texttt{vars} before inputting them into \texttt{CreateTableOne()} like so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{vars }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Gender"}\NormalTok{, }\StringTok{"Age"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{factorVars }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Gender"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{CreateTableOne}\NormalTok{(}\AttributeTok{data =}\NormalTok{ demo,}
               \AttributeTok{vars =}\NormalTok{ vars,}
               \AttributeTok{factorVars =}\NormalTok{ factorVars}
\NormalTok{              )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                  
##                   Overall      
##   n               10175        
##   Gender = 2 (%)   5172 (50.8) 
##   Age (mean (SD)) 31.48 (24.42)
##   Race (%)                     
##      1             1730 (17.0) 
##      2              960 ( 9.4) 
##      3             3674 (36.1) 
##      4             2267 (22.3) 
##      6             1074 (10.6) 
##      7              470 ( 4.6) 
##   Education (%)                
##      1              455 ( 7.9) 
##      2              791 (13.7) 
##      3             1303 (22.6) 
##      4             1770 (30.7) 
##      5             1443 (25.0) 
##      7                2 ( 0.0) 
##      9                5 ( 0.1)
\end{verbatim}

We should be able to see that both tables in this subsection are identical!

\hypertarget{try-it-yourself-35}{%
\subsection{7.2 Try it yourself}\label{try-it-yourself-35}}

Create a tableone without the \texttt{vars} argument. What do you see?
Do you think the \texttt{vars} argument is necessary in our case? If not, in what situation(s) do you think it would be necessary?

\hypertarget{other-arguments-to-customize-tableone}{%
\section{4. OTHER ARGUMENTS TO CUSTOMIZE TABLEONE}\label{other-arguments-to-customize-tableone}}

There are other arguments of \texttt{CreateTableOne()} that we can use to customize and adjust our tableone!

\hypertarget{show-all-levels}{%
\subsection{Show All Levels}\label{show-all-levels}}

Recall how our Gender variable only shows the ``Female'' category. If we want both categories ``Female'' and ``Male'' to be shown, we can add \texttt{showAllLevels\ =\ TRUE} to our \texttt{print()} function like so:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(tab\_nhanes, }
      \AttributeTok{showAllLevels =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                  
##                   level                            Overall      
##   n                                                10175        
##   Gender (%)      Male                              5003 (49.2) 
##                   Female                            5172 (50.8) 
##   Age (mean (SD))                                  31.48 (24.42)
##   Race (%)        Mexican American                  1730 (17.0) 
##                   Other Hispanic                     960 ( 9.4) 
##                   Non-Hispanic White                3674 (36.1) 
##                   Non-Hispanic Black                2267 (22.3) 
##                   Non-Hispanic Asian                1074 (10.6) 
##                   Other Race - Including Multi-Rac   470 ( 4.6) 
##   Education (%)   Less than 9th grade                455 ( 7.9) 
##                   9-11th grade (Includes 12th grad   791 (13.7) 
##                   High school graduate/GED or equi  1303 (22.6) 
##                   Some college or AA degree         1770 (30.7) 
##                   College graduate or above         1443 (25.0) 
##                   Refused                              2 ( 0.0) 
##                   Don't Know                           5 ( 0.1)
\end{verbatim}

Another way that we can show both Male and Femal is to use \texttt{cramVars}. But this argument only works on 2-level variables (i.e.~variables with only 2 categories) because all categories will be placed in the same row.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(tab\_nhanes, }
     \AttributeTok{cramVars =} \StringTok{"Gender"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                      
##                                       Overall               
##   n                                       10175             
##   Gender = Male/Female (%)            5003/5172 (49.2/50.8) 
##   Age (mean (SD))                         31.48 (24.42)     
##   Race (%)                                                  
##      Mexican American                      1730 (17.0)      
##      Other Hispanic                         960 ( 9.4)      
##      Non-Hispanic White                    3674 (36.1)      
##      Non-Hispanic Black                    2267 (22.3)      
##      Non-Hispanic Asian                    1074 (10.6)      
##      Other Race - Including Multi-Rac       470 ( 4.6)      
##   Education (%)                                             
##      Less than 9th grade                    455 ( 7.9)      
##      9-11th grade (Includes 12th grad       791 (13.7)      
##      High school graduate/GED or equi      1303 (22.6)      
##      Some college or AA degree             1770 (30.7)      
##      College graduate or above             1443 (25.0)      
##      Refused                                  2 ( 0.0)      
##      Don't Know                               5 ( 0.1)
\end{verbatim}

\hypertarget{do-question-5-of-the-quiz-now-4}{%
\subsubsection{DO QUESTION 5 OF THE QUIZ NOW}\label{do-question-5-of-the-quiz-now-4}}

\begin{quote}
What is the difference between \texttt{showAllLevels} and \texttt{cramVars}?
\end{quote}

\hypertarget{nonnormal}{%
\subsection{Nonnormal}\label{nonnormal}}

Right now, our tableones assume that the data of all of our continuous variables are normal, but what if our data is not normal?

If we know that some or all of our continous variables are not normal, we can tell R this by using the \texttt{nonnormal} argument of \texttt{print()}. For example, if our Age variable is nonnormal, then:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(tab\_nhanes, }
      \AttributeTok{showAllLevels =} \ConstantTok{TRUE}\NormalTok{,}
      \AttributeTok{nonnormal =} \StringTok{"Age"}
\NormalTok{     )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                     
##                      level                            Overall             
##   n                                                   10175               
##   Gender (%)         Male                              5003 (49.2)        
##                      Female                            5172 (50.8)        
##   Age (median [IQR])                                  26.00 [10.00, 52.00]
##   Race (%)           Mexican American                  1730 (17.0)        
##                      Other Hispanic                     960 ( 9.4)        
##                      Non-Hispanic White                3674 (36.1)        
##                      Non-Hispanic Black                2267 (22.3)        
##                      Non-Hispanic Asian                1074 (10.6)        
##                      Other Race - Including Multi-Rac   470 ( 4.6)        
##   Education (%)      Less than 9th grade                455 ( 7.9)        
##                      9-11th grade (Includes 12th grad   791 (13.7)        
##                      High school graduate/GED or equi  1303 (22.6)        
##                      Some college or AA degree         1770 (30.7)        
##                      College graduate or above         1443 (25.0)        
##                      Refused                              2 ( 0.0)        
##                      Don't Know                           5 ( 0.1)
\end{verbatim}

In the table above, we can see that instead of the usual mean and standard deviation, we are provided with the median and interquartile range (IQR) for our nonnormal Age variable!

\hypertarget{try-it-yourself-36}{%
\subsection{7.3 Try it yourself}\label{try-it-yourself-36}}

How do you know if a variable is nonnormal? Try using the function \texttt{summary()} and look at the number under skew. How do you decide if something is normal or nonnormal? Is the decision to make ``Age'' nonnormal accurate?

\hypertarget{do-question-6-of-the-quiz-now-3}{%
\subsubsection{DO QUESTION 6 OF THE QUIZ NOW}\label{do-question-6-of-the-quiz-now-3}}

\begin{quote}
The decision to make ``Age'' nonnormal is accurate. (True or False)
\end{quote}

\hypertarget{show-categorical-or-continuous-variables-only}{%
\subsection{Show Categorical or Continuous Variables Only}\label{show-categorical-or-continuous-variables-only}}

We also have the option to only create tableones with only categorical or continuous variables.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Categorical variables only}

\NormalTok{tab\_nhanes}\SpecialCharTok{$}\NormalTok{CatTable}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                      
##                                       Overall     
##   n                                   10175       
##   Gender = Female (%)                 5172 (50.8) 
##   Race (%)                                        
##      Mexican American                 1730 (17.0) 
##      Other Hispanic                    960 ( 9.4) 
##      Non-Hispanic White               3674 (36.1) 
##      Non-Hispanic Black               2267 (22.3) 
##      Non-Hispanic Asian               1074 (10.6) 
##      Other Race - Including Multi-Rac  470 ( 4.6) 
##   Education (%)                                   
##      Less than 9th grade               455 ( 7.9) 
##      9-11th grade (Includes 12th grad  791 (13.7) 
##      High school graduate/GED or equi 1303 (22.6) 
##      Some college or AA degree        1770 (30.7) 
##      College graduate or above        1443 (25.0) 
##      Refused                             2 ( 0.0) 
##      Don't Know                          5 ( 0.1)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Continuous variables only}

\FunctionTok{print}\NormalTok{(tab\_nhanes}\SpecialCharTok{$}\NormalTok{ContTable, }\AttributeTok{nonnormal =} \StringTok{"Age"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                     
##                      Overall             
##   n                  10175               
##   Age (median [IQR]) 26.00 [10.00, 52.00]
\end{verbatim}

\hypertarget{strata}{%
\subsection{Strata}\label{strata}}

In a way, strata is like the function \texttt{group\_by()} in dplyr or facets in ggplot. It groups data together into groups or ``strata'' and then summarizes each group individually.

Note that while \texttt{showAllLevels} and \texttt{nonnormal} are arguments of the function \texttt{print()}, \texttt{strata} is an argument of the function \texttt{CreateTableOne()}.

For example, if we want to separate our data summary by Gender, we would need to write a code like so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{strata }\OtherTok{\textless{}{-}} \FunctionTok{CreateTableOne}\NormalTok{(}\AttributeTok{data =}\NormalTok{ demo\_translate,}
                         \AttributeTok{vars =} \FunctionTok{c}\NormalTok{(}\StringTok{"Age"}\NormalTok{, }\StringTok{"Race"}\NormalTok{, }\StringTok{"Education"}\NormalTok{), }\DocumentationTok{\#\# Note that Gender is not included because we already have strata = Gender}
                         \AttributeTok{factorVars =} \FunctionTok{c}\NormalTok{(}\StringTok{"Race"}\NormalTok{,}\StringTok{"Education"}\NormalTok{), }\DocumentationTok{\#\# Again, Gender is not included because it is in the strata argument}
                         \AttributeTok{strata =} \StringTok{"Gender"}
\NormalTok{                         )}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(strata, }
      \AttributeTok{nonnormal =} \StringTok{"Age"}\NormalTok{, }
      \AttributeTok{cramVars =} \StringTok{"Gender"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                      Stratified by Gender
##                                       Male                Female              
##   n                                    5003                5172               
##   Age (median [IQR])                  25.00 [9.00, 51.00] 28.00 [10.00, 52.00]
##   Race (%)                                                                    
##      Mexican American                   833 (16.7)          897 (17.3)        
##      Other Hispanic                     449 ( 9.0)          511 ( 9.9)        
##      Non-Hispanic White                1811 (36.2)         1863 (36.0)        
##      Non-Hispanic Black                1152 (23.0)         1115 (21.6)        
##      Non-Hispanic Asian                 521 (10.4)          553 (10.7)        
##      Other Race - Including Multi-Rac   237 ( 4.7)          233 ( 4.5)        
##   Education (%)                                                               
##      Less than 9th grade                230 ( 8.3)          225 ( 7.5)        
##      9-11th grade (Includes 12th grad   393 (14.2)          398 (13.2)        
##      High school graduate/GED or equi   665 (24.1)          638 (21.2)        
##      Some college or AA degree          754 (27.3)         1016 (33.7)        
##      College graduate or above          713 (25.9)          730 (24.2)        
##      Refused                              0 ( 0.0)            2 ( 0.1)        
##      Don't Know                           3 ( 0.1)            2 ( 0.1)        
##                                      Stratified by Gender
##                                       p      test   
##   n                                                 
##   Age (median [IQR])                   0.001 nonnorm
##   Race (%)                             0.317        
##      Mexican American                               
##      Other Hispanic                                 
##      Non-Hispanic White                             
##      Non-Hispanic Black                             
##      Non-Hispanic Asian                             
##      Other Race - Including Multi-Rac               
##   Education (%)                       <0.001        
##      Less than 9th grade                            
##      9-11th grade (Includes 12th grad               
##      High school graduate/GED or equi               
##      Some college or AA degree                      
##      College graduate or above                      
##      Refused                                        
##      Don't Know
\end{verbatim}

Let's unpack this table together. Firstly, we have the usual mean and standard deviation OR median and IQR for each category of each variable. Except now, we can see that all of the variables and their categories are summarized by or stratified by Gender.

Second of all, we can also see a second table below our usual table with p-values and test. This only appears when we have stratified our data into two groups for comparison. The default test for categorical variables is \texttt{chisq.test()} and the default for continuous variables is \texttt{oneway.test()} (regular ANOVA). tableone also considers nonnorm as present by the word ``nonnorm'' under ``test'' in the table above. Otherwise, we also have the option to use \texttt{krushal.test()} for nonnormal continuous variables.

\hypertarget{try-it-yourself-37}{%
\subsection{7.4 Try it yourself}\label{try-it-yourself-37}}

Create a tableone using the demo\_translate dataset. Keep all variables and stratified the data using ``Age''. What do you see? Do you think this is a helpful tableone?

\hypertarget{do-question-7-of-the-quiz-now-2}{%
\subsubsection{DO QUESTION 7 OF THE QUIZ NOW}\label{do-question-7-of-the-quiz-now-2}}

\begin{quote}
Which of the following is the least appropriate to stratify our dataset by?
\end{quote}

\hypertarget{export-tableone}{%
\section{5. EXPORT TABLEONE}\label{export-tableone}}

Finally, let's export our tableone!

Recall that we can use the function \texttt{write.csv()} to export data from R to a csv file. But before we can use this function, we need to save the table into an object using \texttt{print()} like so first:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tab\_csv }\OtherTok{\textless{}{-}} \FunctionTok{print}\NormalTok{(strata,}
                 \AttributeTok{nonnormal =} \StringTok{"Age"}\NormalTok{,}
                 \AttributeTok{printToggle =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{do-question-8-of-the-quiz-now-3}{%
\subsubsection{DO QUESTION 8 OF THE QUIZ NOW}\label{do-question-8-of-the-quiz-now-3}}

\begin{quote}
What does the argument \texttt{printToggle\ =\ FALSE} do?
\end{quote}

Now we can use our \texttt{write.csv()} function like normal.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write.csv}\NormalTok{(tab\_csv, }\AttributeTok{file =} \StringTok{"data/NHANES\_Summary.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Tada! Now our table is saved as a csv file in our working directory!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dir}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "_book"                                 
##  [2] "_bookdown.yml"                         
##  [3] "_bookdown_files"                       
##  [4] "_build.sh"                             
##  [5] "_deploy.sh"                            
##  [6] "_output.yml"                           
##  [7] "0-r-and-rstudio-set-up.Rmd"            
##  [8] "1-introduction-to-r.Rmd"               
##  [9] "2-importing-data-into-r-with-readr.Rmd"
## [10] "3-introduction-to-nhanes.Rmd"          
## [11] "4-data-analysis-with-dplyr.Rmd"        
## [12] "5-data-visualization-with-ggplot.Rmd"  
## [13] "6-date-time-data-with-lubridate.Rmd"   
## [14] "7-data-summary-with-tableone.Rmd"      
## [15] "8-Exercise-Solutions.Rmd"              
## [16] "9-references.Rmd"                      
## [17] "book.bib"                              
## [18] "data"                                  
## [19] "DESCRIPTION"                           
## [20] "Dockerfile"                            
## [21] "docs"                                  
## [22] "header.html"                           
## [23] "images"                                
## [24] "index.Rmd"                             
## [25] "intro2R.Rmd"                           
## [26] "intro2R_cache"                         
## [27] "intro2R_files"                         
## [28] "LICENSE"                               
## [29] "now.json"                              
## [30] "packages.bib"                          
## [31] "preamble.tex"                          
## [32] "R.Rproj"                               
## [33] "README.md"                             
## [34] "style.css"                             
## [35] "toc.css"
\end{verbatim}

\hypertarget{do-questions-9-10-of-the-quiz-now-1}{%
\subsubsection{DO QUESTIONS 9-10 OF THE QUIZ NOW}\label{do-questions-9-10-of-the-quiz-now-1}}

\begin{quote}
Which of the following arguments can be nested in \texttt{CreateTableOne()}?
\end{quote}

\begin{quote}
Which of the following arguments can be nested in \texttt{print()}?
\end{quote}

\hypertarget{alternatives-to-tableone}{%
\section{6. ALTERNATIVES TO TABLEONE}\label{alternatives-to-tableone}}

Data summary is one of the many applications that R specializes at. With this said, there are multiple other R packages that also do data summary aside from tableone. We will not go over any of these packages, but know that each package has its own strengths and so are most optimally used in different situations.

Here are the other data summary packages and its main data summary function:

\hypertarget{base-r}{%
\subsection{base R}\label{base-r}}

In base R, we have \texttt{summary()} and \texttt{by()}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(demo\_translate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     Gender          Age                                      Race     
##  Male  :5003   Min.   : 0.00   Mexican American                :1730  
##  Female:5172   1st Qu.:10.00   Other Hispanic                  : 960  
##                Median :26.00   Non-Hispanic White              :3674  
##                Mean   :31.48   Non-Hispanic Black              :2267  
##                3rd Qu.:52.00   Non-Hispanic Asian              :1074  
##                Max.   :80.00   Other Race - Including Multi-Rac: 470  
##                                                                       
##                             Education   
##  Some college or AA degree       :1770  
##  College graduate or above       :1443  
##  High school graduate/GED or equi:1303  
##  9-11th grade (Includes 12th grad: 791  
##  Less than 9th grade             : 455  
##  (Other)                         :   7  
##  NA's                            :4406
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{by}\NormalTok{(demo\_translate, demo\_translate}\SpecialCharTok{$}\NormalTok{Gender, summary)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## demo_translate$Gender: Male
##     Gender          Age                                      Race     
##  Male  :5003   Min.   : 0.00   Mexican American                : 833  
##  Female:   0   1st Qu.: 9.00   Other Hispanic                  : 449  
##                Median :25.00   Non-Hispanic White              :1811  
##                Mean   :30.69   Non-Hispanic Black              :1152  
##                3rd Qu.:51.00   Non-Hispanic Asian              : 521  
##                Max.   :80.00   Other Race - Including Multi-Rac: 237  
##                                                                       
##                             Education   
##  Some college or AA degree       : 754  
##  College graduate or above       : 713  
##  High school graduate/GED or equi: 665  
##  9-11th grade (Includes 12th grad: 393  
##  Less than 9th grade             : 230  
##  (Other)                         :   3  
##  NA's                            :2245  
## ------------------------------------------------------------ 
## demo_translate$Gender: Female
##     Gender          Age                                      Race     
##  Male  :   0   Min.   : 0.00   Mexican American                : 897  
##  Female:5172   1st Qu.:10.00   Other Hispanic                  : 511  
##                Median :28.00   Non-Hispanic White              :1863  
##                Mean   :32.25   Non-Hispanic Black              :1115  
##                3rd Qu.:52.00   Non-Hispanic Asian              : 553  
##                Max.   :80.00   Other Race - Including Multi-Rac: 233  
##                                                                       
##                             Education   
##  Some college or AA degree       :1016  
##  College graduate or above       : 730  
##  High school graduate/GED or equi: 638  
##  9-11th grade (Includes 12th grad: 398  
##  Less than 9th grade             : 225  
##  (Other)                         :   4  
##  NA's                            :2161
\end{verbatim}

\hypertarget{hmisc}{%
\subsection{Hmisc}\label{hmisc}}

In Hmisc, we have \texttt{describe()}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("Hmisc")}
\FunctionTok{library}\NormalTok{(Hmisc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Loading required package: lattice
\end{verbatim}

\begin{verbatim}
## Loading required package: survival
\end{verbatim}

\begin{verbatim}
## Loading required package: Formula
\end{verbatim}

\begin{verbatim}
## 
## Attaching package: 'Hmisc'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:dplyr':
## 
##     src, summarize
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     format.pval, units
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{describe}\NormalTok{(demo\_translate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## demo_translate 
## 
##  4  Variables      10175  Observations
## --------------------------------------------------------------------------------
## Gender 
##        n  missing distinct 
##    10175        0        2 
##                         
## Value        Male Female
## Frequency    5003   5172
## Proportion  0.492  0.508
## --------------------------------------------------------------------------------
## Age : Age in years at screening 
##        n  missing distinct     Info     Mean      Gmd      .05      .10 
##    10175        0       81        1    31.48    27.75        1        3 
##      .25      .50      .75      .90      .95 
##       10       26       52       68       75 
## 
## lowest :  0  1  2  3  4, highest: 76 77 78 79 80
## --------------------------------------------------------------------------------
## Race 
##        n  missing distinct 
##    10175        0        6 
## 
## lowest : Mexican American                 Other Hispanic                   Non-Hispanic White               Non-Hispanic Black               Non-Hispanic Asian              
## highest: Other Hispanic                   Non-Hispanic White               Non-Hispanic Black               Non-Hispanic Asian               Other Race - Including Multi-Rac
## 
## Mexican American (1730, 0.170), Other Hispanic (960, 0.094), Non-Hispanic White
## (3674, 0.361), Non-Hispanic Black (2267, 0.223), Non-Hispanic Asian (1074,
## 0.106), Other Race - Including Multi-Rac (470, 0.046)
## --------------------------------------------------------------------------------
## Education 
##        n  missing distinct 
##     5769     4406        7 
## 
## lowest : Less than 9th grade              9-11th grade (Includes 12th grad High school graduate/GED or equi Some college or AA degree        College graduate or above       
## highest: High school graduate/GED or equi Some college or AA degree        College graduate or above        Refused                          Don't Know                      
## 
## Less than 9th grade (455, 0.079), 9-11th grade (Includes 12th grad (791,
## 0.137), High school graduate/GED or equi (1303, 0.226), Some college or AA
## degree (1770, 0.307), College graduate or above (1443, 0.250), Refused (2,
## 0.000), Don't Know (5, 0.001)
## --------------------------------------------------------------------------------
\end{verbatim}

\hypertarget{psych}{%
\subsection{psych}\label{psych}}

In psych, we have \texttt{describe()} and \texttt{describeBy()}. Note how the categorical variables are marked with an asterisk (*).

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("psych")}
\FunctionTok{library}\NormalTok{(psych)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'psych'
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:Hmisc':
## 
##     describe
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:car':
## 
##     logit
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:ggplot2':
## 
##     %+%, alpha
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{describe}\NormalTok{(demo\_translate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##            vars     n  mean    sd median trimmed   mad min max range  skew
## Gender*       1 10175  1.51  0.50      2    1.51  0.00   1   2     1 -0.03
## Age           2 10175 31.48 24.42     26   29.82 28.17   0  80    80  0.44
## Race*         3 10175  3.14  1.35      3    3.11  1.48   1   6     5  0.04
## Education*    4  5769  3.52  1.23      4    3.62  1.48   1   7     6 -0.47
##            kurtosis   se
## Gender*       -2.00 0.00
## Age           -1.09 0.24
## Race*         -0.51 0.01
## Education*    -0.69 0.02
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{describeBy}\NormalTok{(demo\_translate, demo\_translate}\SpecialCharTok{$}\NormalTok{Gender)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
##  Descriptive statistics by group 
## group: Male
##            vars    n  mean    sd median trimmed   mad min max range  skew
## Gender*       1 5003  1.00  0.00      1    1.00  0.00   1   1     0   NaN
## Age           2 5003 30.69 24.39     25   28.89 28.17   0  80    80  0.48
## Race*         3 5003  3.16  1.34      3    3.14  1.48   1   6     5  0.03
## Education*    4 2758  3.49  1.25      4    3.58  1.48   1   7     6 -0.40
##            kurtosis   se
## Gender*         NaN 0.00
## Age           -1.07 0.34
## Race*         -0.49 0.02
## Education*    -0.78 0.02
## ------------------------------------------------------------ 
## group: Female
##            vars    n  mean    sd median trimmed   mad min max range  skew
## Gender*       1 5172  2.00  0.00      2    2.00  0.00   2   2     0   NaN
## Age           2 5172 32.25 24.43     28   30.72 29.65   0  80    80  0.40
## Race*         3 5172  3.12  1.35      3    3.09  1.48   1   6     5  0.06
## Education*    4 3011  3.55  1.21      4    3.65  1.48   1   7     6 -0.53
##            kurtosis   se
## Gender*         NaN 0.00
## Age           -1.12 0.34
## Race*         -0.54 0.02
## Education*    -0.59 0.02
\end{verbatim}

\hypertarget{desctable}{%
\subsection{desctable}\label{desctable}}

In desctable, we have \texttt{desctable()}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# install.packages("desctable")}
\FunctionTok{library}\NormalTok{(desctable)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Loading required package: pander
\end{verbatim}

\begin{verbatim}
## 
## Attaching package: 'desctable'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:stats':
## 
##     chisq.test, fisher.test, IQR
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{desctable}\NormalTok{(demo\_translate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                                    N           % Median IQR
## 1                                       Gender 10175          NA     NA  NA
## 2                                 Gender: Male  5003 49.16953317     NA  NA
## 3                               Gender: Female  5172 50.83046683     NA  NA
## 4                                          Age 10175          NA     26  42
## 5                                         Race 10175          NA     NA  NA
## 6                       Race: Mexican American  1730 17.00245700     NA  NA
## 7                         Race: Other Hispanic   960  9.43488943     NA  NA
## 8                     Race: Non-Hispanic White  3674 36.10810811     NA  NA
## 9                     Race: Non-Hispanic Black  2267 22.28009828     NA  NA
## 10                    Race: Non-Hispanic Asian  1074 10.55528256     NA  NA
## 11      Race: Other Race - Including Multi-Rac   470  4.61916462     NA  NA
## 12                                   Education  5769          NA     NA  NA
## 13              Education: Less than 9th grade   455  7.88698215     NA  NA
## 14 Education: 9-11th grade (Includes 12th grad   791 13.71121512     NA  NA
## 15 Education: High school graduate/GED or equi  1303 22.58623678     NA  NA
## 16        Education: Some college or AA degree  1770 30.68122725     NA  NA
## 17        Education: College graduate or above  1443 25.01300052     NA  NA
## 18                          Education: Refused     2  0.03466805     NA  NA
## 19                       Education: Don't Know     5  0.08667013     NA  NA
\end{verbatim}

\hypertarget{skimr}{%
\subsection{skimr}\label{skimr}}

In skimr, we have \texttt{skim()}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("skimr")}
\FunctionTok{library}\NormalTok{(skimr)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#skim(demo\_translate)}
\end{Highlighting}
\end{Shaded}

\hypertarget{summary-and-takeaways-2}{%
\section{7. SUMMARY AND TAKEAWAYS}\label{summary-and-takeaways-2}}

Congratulations on finishing tutorial 7 on Data Summary with tableone! After this tutorial, you should be familiar with the R package tableone as well as the function \texttt{CreateTableOne()}. In addition, you should also be familiar with the different arguments of \texttt{print()} to customize your own tableone.

There are a lot more powerful functions in the tableone package. You are free to explore them on your own using \href{https://cran.r-project.org/web/packages/tableone/vignettes/introduction.htmlhttps://cran.r-project.org/web/packages/tableone/vignettes/introduction.html}{this document}.

\backmatter
\setcounter{chapter}{0}
\renewcommand{\thechapter}{\Alph{chapter}}

\hypertarget{appendix}{%
\chapter{APPENDIX}\label{appendix}}

\hypertarget{exercise-solutions}{%
\section{Exercise solutions}\label{exercise-solutions}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{require}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\hypertarget{introduction-to-r-1}{%
\section{Introduction to R}\label{introduction-to-r-1}}

This notebook contains the solutions for all of the \textbf{Try it yourself} sections of \textbf{tutorial 1: Introduction to R}. Make sure that you have at least tried to solve these sections first before viewing this notebook.

\hypertarget{section}{%
\subsection{1.1}\label{section}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Can you replicate and solve these problems in R?
\end{enumerate}

\begin{itemize}
\tightlist
\item
  2\^{}2
\item
  2 × 2
\item
  2 + 5 × (5 ÷ 4)\^{}6
\item
  what is the remainder of 52 ÷ 5
\item
  what is the whole number solution to 82 ÷ 8
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{2}\SpecialCharTok{\^{}}\DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{2} \SpecialCharTok{*} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{2} \SpecialCharTok{+} \DecValTok{5} \SpecialCharTok{*}\NormalTok{ (}\DecValTok{5} \SpecialCharTok{/} \DecValTok{4}\NormalTok{)}\SpecialCharTok{\^{}}\DecValTok{6}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 21.07349
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{52} \SpecialCharTok{\%/\%} \DecValTok{5}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{82} \SpecialCharTok{\%\%} \DecValTok{8}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 2
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Can you solve for x using R?
\end{enumerate}

a \textless- 9 + 3 * 6

x \textless- a ÷ 2

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\OtherTok{\textless{}{-}} \DecValTok{9} \SpecialCharTok{+} \DecValTok{3} \SpecialCharTok{*} \DecValTok{6}
\NormalTok{x }\OtherTok{\textless{}{-}}\NormalTok{ a }\SpecialCharTok{/} \DecValTok{2}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 13.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# x is equal to 13.5!}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-1}{%
\subsection{1.2}\label{section-1}}

Translate the following into R and find the output:
* 8 times 3 is greater than 8?
* eleven divided by seven is not equal to 2?
* 9 is less than or equal to 18?

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{8} \SpecialCharTok{*} \DecValTok{3} \SpecialCharTok{\textgreater{}} \DecValTok{8}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{11} \SpecialCharTok{/} \DecValTok{7} \SpecialCharTok{!=} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{9} \SpecialCharTok{\textless{}=} \DecValTok{18}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

\hypertarget{section-2}{%
\subsection{1.3}\label{section-2}}

Can you try storing a string? Assign the string ``hello world, I am here'' to the variable named start.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{start }\OtherTok{\textless{}{-}} \StringTok{"hello world, I am here"}
\NormalTok{start}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "hello world, I am here"
\end{verbatim}

\textbf{Note how the string is in "" but the variable name is not. Why do you think this is?}
Because \texttt{start} is now a known variable that stores a string. In other words, \texttt{start} does not mean ``start'', instead it means ``hello world, I am here''.

\hypertarget{section-3}{%
\subsection{1.4}\label{section-3}}

It is important to note that \textbf{R is case-sensitive}. This means that it distinguishes capitalized from non-capitalized characters, so logical and Logical are read as two separate things by R!

Try typing Logical with a capitalized ``L''. How does R respond to this?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#Logical}
    \DocumentationTok{\#\#\# an error message that says "object \textquotesingle{}Logical\textquotesingle{} not found" pops up}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-4}{%
\subsection{1.5}\label{section-4}}

Why do you think numeric, character, and logical are not in "" but Number, Text, and T/F are?

Because numeric, character, and logical are known variables that hold meanings (and that we already defined), while Number, Text, and T/F are not. They are actually just texts that we use to rename our column names - they do not hold any meanings.

\hypertarget{section-5}{%
\subsection{1.6}\label{section-5}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  What are 2 ways that we can print rows 1 to 5 of the data frame faithful?
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# 1. print(faithful[1:12, ])}

\DocumentationTok{\#\# 2. faithful[1:12, ]}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  What is the value of the cell in the fourth row and second column of the data frame faithful?
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# faithful[4,2]}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-6}{%
\subsection{1.7}\label{section-6}}

Try it yourself
Write a code to find the structure of the variable waiting in the faithful dataset.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# str(faithful$waiting)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-7}{%
\subsection{1.8}\label{section-7}}

Remember those variables that we created earlier in the tutorial? Try finding the lengths of data frame and numeric.

\textbf{Challenge:} Psst! There are actually 2 ways for you to find the length of numeric.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# length(dataframe)}

\DocumentationTok{\#\# length(numeric) \#OR}
\DocumentationTok{\#\# length(dataframe$numeric)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-8}{%
\subsection{1.9}\label{section-8}}

Recall that in order for us to refer to a variable in a dataset, we need to first type the dataset name following by a \$ before we can type the variable name.

A way to avoid repeating \texttt{faithful\$} everytime is to attach the dataset using \texttt{attach(faithful)}.

Try attaching the dataset faithful then find the mean of the variable eruptions without using \$!

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# attach(faithful)}
\DocumentationTok{\#\# mean(eruptions)}
\end{Highlighting}
\end{Shaded}

\hypertarget{importing-data-into-r-with-readr-1}{%
\section{Importing Data into R with readr}\label{importing-data-into-r-with-readr-1}}

This notebook contains the solutions for all of the \textbf{Try it yourself} sections of \textbf{tutorial 2: Importing Data into R with readr}. Make sure that you have at least tried to solve these sections first before viewing this notebook.

\hypertarget{section-9}{%
\subsection{2.1}\label{section-9}}

Can you try importing the \texttt{bpx.csv} file into R using the function \texttt{read\_csv()}?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#read\_csv("../input/import/bpx.csv")}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-10}{%
\subsection{2.2}\label{section-10}}

Can you identify the mistakes of the following codes?

\textbf{a.} The pathway is not in ""

\textbf{b.} ``DEMO'' should not be capitalized

\textbf{c.} ``Read\_csv'' should not be capitalized

\textbf{d.} The entire pathway needs to be in "" instead of just the file name

\hypertarget{section-11}{%
\subsection{2.3}\label{section-11}}

Just by looking at the actual data frame, can you guess what type of data \texttt{col\_double()} and \texttt{col\_character()} are?

(\textbf{HINT}: doubles? integers? logical? character?)

Here is a list of \texttt{col\_x()} and what they mean:
* \texttt{col\_double()} -- Doubles
* \texttt{col\_integer()} -- Integers
* \texttt{col\_logical()} -- True/False
* \texttt{col\_date()} -- Date
* \texttt{col\_time()} -- Time
* \texttt{col\_datetime} -- Date and Time
* \texttt{col\_character()} -- Text, Character, and everything else

This list is not extensive, so you can use \texttt{?cols} to learn more about column specification!

\hypertarget{section-12}{%
\subsection{2.4}\label{section-12}}

You may also notice that the header of \emph{Skip\_2} is incorrect. This is because R recognizes the header of our data as the first row, thus omiting it when importing \texttt{demo.csv} into R.

Let's say this is not what we really want. What we actually want to do is to remove the first two rows of actual data while keeping the header. What do you think we have to do to achieve this?

(\textbf{HINT}: Recall what we learn about extracting rows in tutorial 1)

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#DEMO[3:10, ]}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-13}{%
\subsection{2.5}\label{section-13}}

Import the \texttt{bpx.xlsx} into R using the \texttt{read\_excel()} function.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#read\_excel("../input/import/bpx.xlsx")}
\end{Highlighting}
\end{Shaded}

\hypertarget{introduction-to-nhanes-2}{%
\section{Introduction to NHANES}\label{introduction-to-nhanes-2}}

This notebook contains the solutions for all of the \textbf{Try it yourself} sections of \textbf{Tutorial 3: Introduction to NHANES}. Make sure that you have at least tried to solve these sections first before viewing this notebook.

\hypertarget{section-14}{%
\subsection{3.1}\label{section-14}}

Find all the Examination Data in survey cycle 2013-2014

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# nhanesTables(\textquotesingle{}EXAM\textquotesingle{}, 2013)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-15}{%
\subsection{3.2}\label{section-15}}

Import the blood pressure dataset in the Examination Data in survey cycle 2013-2014

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# bpx \textless{}{-} nhanes(\textquotesingle{}BPX\_H\textquotesingle{})}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-16}{%
\subsection{3.3}\label{section-16}}

Translate the following variables in the BPX dataset

BPXPULS - Pulse regular or irregular?

BPAARM - Arm selected

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# bpxtranslate \textless{}{-} nhanesTranslate(\textquotesingle{}BPX\_H\textquotesingle{},  c(\textquotesingle{}BPXPULS\textquotesingle{}, \textquotesingle{}BPAARM\textquotesingle{}), data = bpx)}
\end{Highlighting}
\end{Shaded}

\hypertarget{data-analysis-with-dplyr-1}{%
\section{Data Analysis with dplyr}\label{data-analysis-with-dplyr-1}}

This notebook contains the solutions for all of the \textbf{Try it yourself} sections of \textbf{Tutorial 4: Data Analysis with dplyr}. Make sure that you have at least tried to solve these sections first before viewing this notebook.

\hypertarget{section-17}{%
\subsection{4.1}\label{section-17}}

In the bpx dataframe, keep the following variables and top 5 rows only:

\begin{itemize}
\tightlist
\item
  SEQN
\item
  PEASCST1
\item
  PEASCTM1
\item
  BPXSY1
\item
  BPXDI1
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# new\_bpx \textless{}{-} select(bpx,}
\DocumentationTok{\#\#                    c(SEQN,}
\DocumentationTok{\#\#                     PEASCST1,}
\DocumentationTok{\#\#                     PEASCTM1,}
\DocumentationTok{\#\#                     BPXSY1,}
\DocumentationTok{\#\#                     BPXDI1))}
\DocumentationTok{\#\# new\_bpx \textless{}{-} head(new\_bpx,5)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-18}{%
\subsection{4.2}\label{section-18}}

\begin{itemize}
\tightlist
\item
  SEQN -\textgreater{} id
\item
  PEASCST1 -\textgreater{} bp\_status
\item
  PEASCTM1 -\textgreater{} bpt\_sec
\item
  BPXSY1 -\textgreater{} systolic
\item
  BPXDI1 -\textgreater{} diastolic
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# new\_bpx \textless{}{-} rename(bpx,}
\DocumentationTok{\#\#                    id = SEQN,}
\DocumentationTok{\#\#                    bp\_status = PEASCST1,}
\DocumentationTok{\#\#                    bpt\_sec = PEASCTM1,}
\DocumentationTok{\#\#                    systolic = BPXSY1,}
\DocumentationTok{\#\#                    diastolic = BPXDI1)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-19}{%
\subsection{4.3}\label{section-19}}

In the demo dataframe, find all the records that:

\hypertarget{the-participant-who-is-a-male}{%
\subsubsection{4.3.1 the participant who is a male}\label{the-participant-who-is-a-male}}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# filter(final\_demo, gender == "Male")}
\end{Highlighting}
\end{Shaded}

\hypertarget{the-participant-who-is-a-male-and-is-older-tha-50-years-old}{%
\subsubsection{4.3.2 the participant who is a male and is older tha 50 years old}\label{the-participant-who-is-a-male-and-is-older-tha-50-years-old}}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# filter(final\_demo, gender == \textquotesingle{}Male\textquotesingle{} \&\& age \textgreater{} 50)}
\end{Highlighting}
\end{Shaded}

\hypertarget{the-education-level-is-missing}{%
\subsubsection{4.3.3 the education level is missing}\label{the-education-level-is-missing}}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# filter(final\_demo, is.na(edu))}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-20}{%
\subsection{4.4}\label{section-20}}

Re-order the rows in the bpx dataset by Blood Pressure Time in Seconds (bpt\_sec) in descending order:

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# arrange(final\_bpx,desc(bpt\_sec))}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-21}{%
\subsection{4.5}\label{section-21}}

\hypertarget{section-22}{%
\subsubsection{4.5.1}\label{section-22}}

Create a new variable called called \textbf{rescale\_bpt\_sec} that records the Blood Pressure Time in miuntes. Keep both original and new variables.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#  mutate(final\_bpx,rescale\_bpt\_sec = bpt\_sec/60)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-23}{%
\subsubsection{4.5.2}\label{section-23}}

Create \textbf{rescale\_bpt\_sec} in the same way above and \textbf{only keep new variables}.

Note: Try to avoid using select().

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#  transmute(final\_bpx,rescale\_bpt\_sec = bpt\_sec/60)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-24}{%
\subsection{4.6}\label{section-24}}

Find the average age in the demo dataframe per education level

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#  by\_edu \textless{}{-} group\_by(edu)}

\DocumentationTok{\#\# summarize(by\_edu, average\_age = mean(age, na.rm = TRUE))}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-25}{%
\subsection{4.7}\label{section-25}}

Return the observations which has more than 3 records in each gender group.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# by\_gender \textless{}{-}group\_by(final\_demo,gender)}

\DocumentationTok{\#\# filter(by\_edu,n()\textgreater{}3)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-26}{%
\subsection{4.8}\label{section-26}}

Compute the difference in each age and the average mean in each education level group

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# by\_edu \textless{}{-}group\_by(final\_demo,edu)}

\DocumentationTok{\#\# mutate(by\_edu, diff\_age = age {-} mean(age, na.rm = T))}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-27}{%
\subsection{4.9}\label{section-27}}

Re-write the following code using pipe operator

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# temp \textless{}{-} filter(final\_bpx, systolic \textgreater{} 120)}
\DocumentationTok{\#\# temp \textless{}{-} mutate(temp, bpt\_min = bpt\_sec/60)}
\DocumentationTok{\#\# temp}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# final\_bpx \%\textgreater{}\%}
\DocumentationTok{\#\#    filter(systolic \textgreater{} 120) \%\textgreater{}\%}
\DocumentationTok{\#\#    mutate(bpt\_min = bpt\_sec/60)}
\end{Highlighting}
\end{Shaded}

\hypertarget{data-visualization-with-ggplot2-1}{%
\section{Data Visualization with ggplot2}\label{data-visualization-with-ggplot2-1}}

This notebook contains the solutions for all of the \textbf{Try it yourself} sections of tutorial 5: Data Visualization with ggplot. Make sure that you have at least tried to solve these sections first before viewing this notebook.

\hypertarget{section-28}{%
\subsection{1.1}\label{section-28}}

Plot a scatterplot to show the relationship between Diastolic Blood Pressure (x-axis) and Blood Pressure Time in Seconds (y-axis).

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# ggplot(data = demo\_bpx) +}
\DocumentationTok{\#\#   geom\_point(aes(x = Diastolic, }
\DocumentationTok{\#\#                  y = BPT), }
\DocumentationTok{\#\#              na.rm = TRUE)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-29}{%
\subsection{1.2}\label{section-29}}

Plot a scatterplot using the Diastolic (x-axis) and Systolic (y-axis) variables in the data frame demo\_bpx where all of the data points are blue.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# ggplot(demo\_bpx) +}
\DocumentationTok{\#\#   geom\_point(aes(x = Systolic, }
\DocumentationTok{\#\#                  y = Diastolic), }
\DocumentationTok{\#\#              color = "blue",}
\DocumentationTok{\#\#              na.rm = TRUE)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-30}{%
\subsection{1.3}\label{section-30}}

Try increasing and decreasing the binwidth of a frequency polygon. What differences do you see? What does binwidth actually mean?

Higher binwidths give us less fluctuations than lower binwidths. When we are increasing the binwidths, we are actually increasing the length of intervals, which leads to less intervals. In other words, each data point are a bit further away from each other, so when connected, the graph looks less detailed and smoother.

\hypertarget{section-31}{%
\subsection{1.4}\label{section-31}}

Try recreating the graph above but without any missing (NA) values.

\textbf{HINT}: Filter out any information we do not need using logical operators!

First, we need to filter out all of the NA values:

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# no\_NA \textless{}{-} filter(demo\_bpx, Race != "NA" \& Gender != "NA")}
\end{Highlighting}
\end{Shaded}

Then, we can graph our facets normally:

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# ggplot(no\_NA) +}
\DocumentationTok{\#\#   geom\_point(aes(x = Diastolic, y = Systolic), na.rm = TRUE) +}
\DocumentationTok{\#\#   facet\_grid(Race \textasciitilde{} Gender)}
\end{Highlighting}
\end{Shaded}

\hypertarget{date-and-time-data-with-lubridate}{%
\section{Date and Time Data with lubridate}\label{date-and-time-data-with-lubridate}}

This notebook contains the solutions for all of the \textbf{Try it yourself} sections of \textbf{tutorial 6: Date \& Time Data with lubridate}. Make sure that you have at least tried to solve these sections first before viewing this notebook.

\hypertarget{section-32}{%
\subsection{6.1}\label{section-32}}

After running the \texttt{today()} and \texttt{now()} codes above, what do you see?

Try to also change the time zone to where you are or to something else. Now what do you see when you run \texttt{today()} and \texttt{now()}?

After running \texttt{today()} and \texttt{now()}, you should see that \texttt{today()} is a date data and \texttt{now()} is a datetime data.

Changing the time zone means that the date and time will be different if we run \texttt{today()} and \texttt{now()} again.

\hypertarget{section-33}{%
\subsection{6.2}\label{section-33}}

Try creating a new column named ``Day\_visit'' that only contains information of the Year, Month, and Day columns using the Friends\_visits dataframe that we just created.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# head(}
\DocumentationTok{\#\#   Friends\_visits \%\textgreater{}\% }
\DocumentationTok{\#\#   mutate(Hour\_visit = make\_datetime(Year, Month, Day))}
\DocumentationTok{\#\#    )}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-34}{%
\subsection{6.3}\label{section-34}}

Using the functions introduced above, solve the following questions:
1. What day of the week is April 2, 2014?
2. What day of the year is 2017-09-15?
3. What day of the month is 20190830?
4. Find the months of the last 11 records of the column Visit\_hour.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#1. wday(mdy("April 2, 2014"), label = TRUE)}

\CommentTok{\#2. yday(ymd("2017{-}09{-}05"))}

\CommentTok{\#3. mday(ymd(20190830))}

\CommentTok{\#4. tail(month(Friends\_visits$Visit\_time, label = TRUE), 11)}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-35}{%
\subsection{6.4}\label{section-35}}

Using the same Friends\_visit dataset, create a similar graph as above but the x-axis is days of the week. In other words, create a bar graph that shows how many visits there are in each day of the week.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Friends\_visits \%\textgreater{}\%}
\DocumentationTok{\#\#  mutate(Week\_day = wday(Visit\_time, label = TRUE, abbr = FALSE)) \%\textgreater{}\%}
\DocumentationTok{\#\#  ggplot(aes(Week\_day)) +}
\DocumentationTok{\#\#  geom\_bar()}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-36}{%
\subsection{6.5}\label{section-36}}

Try to update our month to 13. What happened to our date/time? What is the output?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# DT \%\textgreater{}\%}
\CommentTok{\#     update(month = 13)}

\DocumentationTok{\#\# The year turns to 2021 because a year only has 12 months!}
\end{Highlighting}
\end{Shaded}

\hypertarget{section-37}{%
\subsection{6.6}\label{section-37}}

Recreate the frequency polygon above but change the binwidth so that all flights within each 30 minutes are clumped into one single data point. How do the graphs differ? Can you think of a few scenarios where one would be preferred?

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# Friends\_visits \%\textgreater{}\%}
\DocumentationTok{\#\#    mutate(Visit\_hour = update(Visit\_time, yday = 1)) \%\textgreater{}\%}
\DocumentationTok{\#\#    ggplot(aes(Visit\_hour)) +}
\DocumentationTok{\#\#    geom\_freqpoly(binwidth = 900)}
\end{Highlighting}
\end{Shaded}

\hypertarget{data-summary-with-tableone-1}{%
\section{Data Summary with tableone}\label{data-summary-with-tableone-1}}

This notebook contains the solutions for all of the \textbf{Try it yourself} sections of \textbf{tutorial 7: Data Summary with tableone}. Make sure that you have at least tried to solve these sections first before viewing this notebook.

\hypertarget{section-38}{%
\subsection{7.1}\label{section-38}}

\textbf{Challenge}: Why do you think we need to change the names of our variables AFTER we translate them?

\textbf{Hint}: Think about the \texttt{data\ =\ demo} argument in \texttt{nhanesTranslate()}

Because after we use the function \texttt{names()} our data is no longer recognizable by R as being connected to the DEMO\_H dataset that we downloaded from NHANES.

\hypertarget{section-39}{%
\subsection{7.2}\label{section-39}}

Create a tableone without the \texttt{vars} argument. What do you see?
Do you think the \texttt{vars} argument is necessary in our case? If not, in what situation(s) do you think it would be necessary?

The \texttt{vars} argument tells R which variables you want to include in your tableone. If it is missing from \texttt{CreateTableOne()}, this means that we want R to select \textbf{ALL} variables of the original table in our tablone. Therefore, in our case, \texttt{vars} is not neccesary because we are selecting all variables anyway. But in cases where we only want to select some variables to include in our tableone, \texttt{vars} is an absolute must!

\hypertarget{section-40}{%
\subsection{7.3}\label{section-40}}

How do you know if a variable is nonnormal? Try using the function \texttt{summary()} and look at the number under skew. How do you decide if something is normal or nonnormal? Is the decision to make ``Age'' nonnormal accurate?

After you plug the dataset name into \texttt{summary()}, you should see a numerical value below ``skew'' that tells us the skewness of the data. The further it is from 0 (both negative and positive), the further it is from normal! The decision to make ``Age'' nonnormal is arguably not quite accurate because the skewness of ``Age'' is only 0.4.

\hypertarget{section-41}{%
\subsection{7.4}\label{section-41}}

Create a tableone using the demo\_translate dataset. Keep all variables and stratified the data using ``Age''. What do you see? Do you think this is a helpful tableone?

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\# CreateTableOne(data = demo\_translate,}
\DocumentationTok{\#\#               vars = c("Race", "Education", "Gender"),}
\DocumentationTok{\#\#               factorVars = c("Race","Education", "Gender"),}
\DocumentationTok{\#\#               strata = "Age"}
\DocumentationTok{\#\#              )}
\end{Highlighting}
\end{Shaded}

Just like how we should not use continuous variables to create facets (check ggplot tutorial), we should also not stratified our data using continuous variables. When we stratify our data using numerical continuous variables, the tableone becomes too big to handle. The information that we get is also not meaningful as there is a lot of values including lots of NA values. If we want to stratify our data by age, it may be better to use age groups instead of single age values.

\hypertarget{refs}{}
\begin{CSLReferences}{0}{0}
\end{CSLReferences}

  \bibliography{book.bib,packages.bib}

\end{document}
